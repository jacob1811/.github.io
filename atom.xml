<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>èŠ¸è±†blog</title>
  
  
  <link href="/blog/atom.xml" rel="self"/>
  
  <link href="https://jacob1811.github.io/blog/"/>
  <updated>2019-11-27T07:55:46.178Z</updated>
  <id>https://jacob1811.github.io/blog/</id>
  
  <author>
    <name>jacob</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Taro-cliæ‹†è§£</title>
    <link href="https://jacob1811.github.io/blog/2019/11/27/Taro-cli%E6%8B%86%E8%A7%A3/"/>
    <id>https://jacob1811.github.io/blog/2019/11/27/Taro-cliæ‹†è§£/</id>
    <published>2019-11-27T07:55:41.000Z</published>
    <updated>2019-11-27T07:55:46.178Z</updated>
    
    <content type="html"><![CDATA[<h3 id="taro-cli-æ˜¯æ€ä¹ˆç©çš„ï¼Ÿ"><a href="#taro-cli-æ˜¯æ€ä¹ˆç©çš„ï¼Ÿ" class="headerlink" title="taro-cli æ˜¯æ€ä¹ˆç©çš„ï¼Ÿ"></a>taro-cli æ˜¯æ€ä¹ˆç©çš„ï¼Ÿ</h3><p>æ‰€æœ‰çš„å·¥ç¨‹åŒ–é¡¹ç›®éƒ½ä¸€æ ·ï¼Œè‚¯å®šéœ€è¦CLIè„šæ‰‹æ¶ï¼ŒTaroè„šæ‰‹æ¶å®‰è£…ï¼š</p><blockquote><p>npm install -g @tarojs/cli<br>(yarn npxä¹Ÿå¯ä»¥)</p></blockquote><p>å®‰è£…åï¼Œæ­å–œä½ æ‹¥æœ‰äº† taro å‘½ä»¤ï¼Œä¸»è¦è´Ÿè´£é¡¹ç›®åˆå§‹åŒ–ï¼Œç¼–è¯‘ï¼Œæ„å»ºç­‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">âœ  taro-ui git:(master) âœ— taro</span><br><span class="line">ğŸ‘½ Taro v1<span class="number">.3</span><span class="number">.19</span></span><br><span class="line"></span><br><span class="line">Usage: taro &lt;command&gt; [options]</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -V, --version       output the version number</span><br><span class="line">  -h, --help          output usage information</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  init [projectName]  Init a project <span class="keyword">with</span> <span class="keyword">default</span> templete</span><br><span class="line">  config &lt;cmd&gt;        Taro config</span><br><span class="line">  create              Create page <span class="keyword">for</span> project</span><br><span class="line">  build               Build a project <span class="keyword">with</span> options</span><br><span class="line">  update              Update packages <span class="keyword">of</span> taro</span><br><span class="line">  convert             Convert weapp to taro</span><br><span class="line">  info                Diagnostics Taro env info</span><br><span class="line">  doctor              Diagnose taro project</span><br><span class="line">  help [cmd]          display help <span class="keyword">for</span> [cmd]</span><br></pre></td></tr></table></figure><h3 id="åŒ…ç®¡ç†ä¸å‘å¸ƒ"><a href="#åŒ…ç®¡ç†ä¸å‘å¸ƒ" class="headerlink" title="åŒ…ç®¡ç†ä¸å‘å¸ƒ"></a>åŒ…ç®¡ç†ä¸å‘å¸ƒ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">âœ  taro-master tree -L <span class="number">2</span></span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ CHANGELOG.md</span><br><span class="line">â”œâ”€â”€ CONTRIBUTING.md</span><br><span class="line">â”œâ”€â”€ LICENSE</span><br><span class="line">â”œâ”€â”€ PLANS.md</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ build</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ docs-version.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ docs.js</span><br><span class="line">â”œâ”€â”€ docs</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ CONTRIBUTING.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ GETTING-STARTED.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ README.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ apis</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ <span class="keyword">async</span>-<span class="keyword">await</span>.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ before-dev-remind.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ best-practice.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ children.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ component-style.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ components</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ components-desc.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ composition.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ condition.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ config-detail.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ config.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ context.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ css-modules.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ debug.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ envs-debug.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ envs.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ event.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ functional-component.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ hooks.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ hybrid.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ jsx.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ list.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ mini-third-party.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ miniprogram-plugin.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ mobx.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ optimized-practice.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ project-config.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ props.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ quick-app.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ react-native.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ redux.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ref.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ relations.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ render-props.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ report.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ router.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ size.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ spec-<span class="keyword">for</span>-taro.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ specials.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ state.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ <span class="keyword">static</span>-reference.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-quickapp-manifest.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taroize.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ team.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ template.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ tutorial.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ui-lib.md</span><br><span class="line">â”‚Â Â  â””â”€â”€ wxcloud.md</span><br><span class="line">â”œâ”€â”€ lerna.json      <span class="comment">// åŒ…ç®¡ç†å·¥å…·Lernaé…ç½®</span></span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ packages</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ babel-plugin-transform-jsx-to-stylesheet</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ babel-plugin-transform-taroapi</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ css-to-react-native</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ eslint-config-taro</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ eslint-plugin-taro</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ postcss-plugin-constparse</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ postcss-pxtransform</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ postcss-unit-transform</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ stylelint-config-taro-rn</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ stylelint-taro-rn</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-alipay</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-<span class="keyword">async</span>-<span class="keyword">await</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-cli</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-components</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-components-qa</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-components-rn</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-h5</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-jd</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-mobx</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-mobx-common</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-mobx-h5</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-mobx-rn</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-plugin-babel</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-plugin-csso</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-plugin-less</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-plugin-sass</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-plugin-stylus</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-plugin-typescript</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-plugin-uglifyjs</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-qq</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-quickapp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-redux</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-redux-h5</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-redux-rn</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-rn</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-rn-runner</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-router</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-router-rn</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-swan</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-transformer-wx</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-tt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-utils</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-weapp</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-webpack-runner</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-<span class="keyword">with</span>-weapp</span><br><span class="line">â”‚Â Â  â””â”€â”€ taroize</span><br><span class="line">â”œâ”€â”€ website</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ core</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ i18n</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ pages</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ sidebars.json</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ siteConfig.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ <span class="keyword">static</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ versioned_docs</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ versioned_sidebars</span><br><span class="line">â”‚Â Â  â””â”€â”€ versions.json</span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure><p>packages ç›®å½•ä¸‹åå‡ ä¸ªåŒ…ä¸­ï¼Œæœ€å¸¸ç”¨çš„é¡¹ç›®åˆå§‹åŒ–ä¸æ„å»ºçš„å‘½ä»¤è¡Œå·¥å…· taro-cli å°±æ˜¯å…¶ä¸­ä¸€ä¸ªã€‚åœ¨ Taro å·¥ç¨‹æ ¹ç›®å½•è¿è¡Œ lerna publish å‘½ä»¤ä¹‹åï¼Œlerna.json é‡Œé¢é…ç½®å¥½çš„æ‰€æœ‰çš„åŒ…ä¼šè¢«å‘å¸ƒåˆ° npm ä¸Šå»ã€‚</p><h3 id="lerna"><a href="#lerna" class="headerlink" title="lerna"></a>lerna</h3><p><a href="https://github.com/lerna/lerna" target="_blank" rel="noopener">lerna github</a><br><a href="https://lerna.js.org/" target="_blank" rel="noopener">æ–‡æ¡£</a></p><p>å®‰è£…</p><blockquote><p>npm install â€“global lerna</p></blockquote><p>åˆå§‹åŒ–é¡¹ç›®ä»“åº“</p><blockquote><p>git init lerna-repo &amp;&amp; cd lerna-repo</p></blockquote><p>lernaåˆå§‹åŒ–</p><blockquote><p>lerna init</p></blockquote><h4 id="taro-cli-åŒ…ç›®å½•ç»“æ„"><a href="#taro-cli-åŒ…ç›®å½•ç»“æ„" class="headerlink" title="taro-cli åŒ…ç›®å½•ç»“æ„"></a>taro-cli åŒ…ç›®å½•ç»“æ„</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br></pre></td><td class="code"><pre><span class="line">âœ  taro-cli tree</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ CHANGELOG.md</span><br><span class="line">â”œâ”€â”€ __tests__</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ __snapshots__</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ rn.test.js.snap</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ mocks</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app.js</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ config</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ dev.js</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.js</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ prod.js</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ page.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ rn.test.js</span><br><span class="line">â”œâ”€â”€ bin    <span class="comment">// å‘½ä»¤è¡Œ</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro        <span class="comment">// taro å‘½ä»¤</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-build  <span class="comment">// taro buildå‘½ä»¤</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-config   <span class="comment">// Taro config</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-convert  <span class="comment">// Convert weapp to taro</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-create   <span class="comment">// Create page for project</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-doctor   <span class="comment">// Diagnose taro project</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-info    <span class="comment">// Diagnostics Taro env info</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-init   <span class="comment">// taro initå‘½ä»¤  Init a project with default templete</span></span><br><span class="line">â”‚Â Â  â””â”€â”€ taro-update <span class="comment">// taro updateå‘½ä»¤ Update packages of taro</span></span><br><span class="line">â”œâ”€â”€ global.d.ts</span><br><span class="line">â”œâ”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ jest.config.js</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ scripts</span><br><span class="line">â”‚Â Â  â””â”€â”€ prepublish.js</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ build.ts            <span class="comment">// taro build å‘½ä»¤è°ƒç”¨ï¼Œæ ¹æ® type ç±»å‹è°ƒç”¨ä¸åŒçš„è„šæœ¬</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ config</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ babel.ts        <span class="comment">// Babel é…ç½®</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ babylon.ts      <span class="comment">// JavaScript è§£æå™¨ babylon é…ç½®</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ browser_list.ts <span class="comment">// autoprefixer browsers é…ç½®</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.ts        <span class="comment">// ç›®å½•ååŠå…¥å£æ–‡ä»¶åç›¸å…³é…ç½®</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ manifest.default.json</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ rn-stylelint.json</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tsconfig.json</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ uglify.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ convertor</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ helper.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ create</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ creator.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ fetchTemplate.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ init.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ page.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ project.ts         <span class="comment">// taro init å‘½ä»¤è°ƒç”¨ï¼Œåˆå§‹åŒ–é¡¹ç›® </span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ doctor</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ abilityXMLValidator.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ configSchema.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ configValidator.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ eslintValidator.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ interface.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ joi2desc.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ packageValidator.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ recommandValidator.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ validatorEslintrc.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ h5                <span class="comment">// æ„å»ºh5 å¹³å°ä»£ç </span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ constants.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ helper.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ jdreact</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ convert_to_jdreact.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pkg</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ template</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ JDReact.version</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ JDReact.web.js</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ test.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ mini</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ astProcess.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ compileScript.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ compileStyle.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ component.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ constants.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ entry.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ helper.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ interface.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ native.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ page.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ watch.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ plugin.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ quickapp</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ style</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ declaration</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ animation</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ background</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ border</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ box</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ color</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ component</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ dimension</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ flexbox</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ font</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ list</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ margin</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ padding</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ position</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ text</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ transform</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ transform.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ transition</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ visibility</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â      â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ selector</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ util.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ style-rewriter.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ template</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ constant.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ node.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ parser.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ serialize.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tag</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ span</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ taro-camera</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ taro-canvas</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ taro-image</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ taro-input</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ taro-label</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ taro-map</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ taro-picker</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ taro-textarea</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ taro-video</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ text</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â      â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ utils.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ template-rewriter.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ rn</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ StyleSheet</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ColorPropType.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ImageResizeMode.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ImageStylePropTypes.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ LayoutPropTypes.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ShadowPropTypesIOS.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ StyleSheetValidation.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ TextStylePropTypes.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ TransformPropTypes.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ViewStylePropTypes.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ deprecatedPropType.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ normalizeColor.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ styleProcess.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ transformJS.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ rn.ts   <span class="comment">// æ„å»ºReact Native å¹³å°ä»£ç </span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ taro-config</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ui.ts   <span class="comment">// ä¸€ç³»åˆ—å·¥å…·å‡½æ•°</span></span><br><span class="line">â”‚Â Â  â””â”€â”€ util</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ astConvert.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ constants.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ dowload.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ hash.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ index.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ npm.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ npmExact.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ resolve_npm_files.ts</span><br><span class="line">â”‚Â Â      â””â”€â”€ types.ts</span><br><span class="line">â”œâ”€â”€ templates    <span class="comment">// è„šæ‰‹æ¶æ¨¡ç‰ˆ</span></span><br><span class="line">â”‚Â Â  â””â”€â”€ <span class="keyword">default</span></span><br><span class="line">â”‚Â Â      â”œâ”€â”€ _editorconfig</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ _eslintrc</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ _gitignore</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ _npmrc</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ config</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ dev.js</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ index.js</span><br><span class="line">â”‚Â Â      â”‚Â Â  â””â”€â”€ prod.js</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ global.d.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ package.json</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ project.config.json</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ src         <span class="comment">// åˆå§‹åŒ–æ–‡ä»¶åŠç›®å½•ï¼Œcopyæ¨¡ç‰ˆç­‰</span></span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ app.css</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ app.jsx</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ index.html</span><br><span class="line">â”‚Â Â      â”‚Â Â  â””â”€â”€ pages</span><br><span class="line">â”‚Â Â      â”‚Â Â      â””â”€â”€ index</span><br><span class="line">â”‚Â Â      â”‚Â Â          â”œâ”€â”€ index.css</span><br><span class="line">â”‚Â Â      â”‚Â Â          â””â”€â”€ index.jsx</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ template_creator.js</span><br><span class="line">â”‚Â Â      â””â”€â”€ tsconfig.json</span><br><span class="line">â”œâ”€â”€ tsconfig.json</span><br><span class="line">â”œâ”€â”€ tslint.json</span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure><h3 id="taro-init"><a href="#taro-init" class="headerlink" title="taro init:"></a>taro init:</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82dhdr37hj311m0cyq42.jpg" alt=""></p><h3 id="taro-å‘½ä»¤å…¥å£"><a href="#taro-å‘½ä»¤å…¥å£" class="headerlink" title="taro å‘½ä»¤å…¥å£"></a>taro å‘½ä»¤å…¥å£</h3><p>é‚£ä¹ˆ taro å‘½ä»¤æ˜¯æ€æ ·æ·»åŠ è¿›å»çš„å‘¢ï¼Œå…¶åŸå› åœ¨äº package.json é‡Œé¢çš„ bin å­—æ®µï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// node_moudle/taro-cli/package.json</span></span><br><span class="line"><span class="string">"bin"</span>: &#123;</span><br><span class="line">    <span class="string">"taro"</span>: <span class="string">"bin/taro"</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>taro å‘½ä»¤å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸º bin/taro<br>npm ä¼šå¯»æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨ [prefix]/bin ç›®å½•ä¸‹å»ºç«‹ç¬¦å·é“¾æ¥ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œtaroä¼šå»ºç«‹ç¬¦å·é“¾æ¥ [prefix]/bin/taroã€‚ç”±äº [prefix]/bin ç›®å½•ä¼šåœ¨è¿è¡Œæ—¶åŠ å…¥ç³»ç»Ÿçš„ PATH å˜é‡ï¼Œå› æ­¤åœ¨è¿è¡Œ npm æ—¶ï¼Œå°±å¯ä»¥ä¸å¸¦è·¯å¾„ï¼Œç›´æ¥é€šè¿‡å‘½ä»¤æ¥è°ƒç”¨è¿™äº›è„šæœ¬ã€‚</p><p>å…³äºprefixï¼Œå¯ä»¥é€šè¿‡npm config get prefixè·å–ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm config <span class="keyword">get</span> prefix</span><br><span class="line">/usr/local</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸‹åˆ—å‘½ä»¤å¯ä»¥æ›´åŠ æ¸…æ™°çš„çœ‹åˆ°å®ƒä»¬ä¹‹é—´çš„ç¬¦å·é“¾æ¥ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls -al <span class="string">`which taro`</span></span><br><span class="line">lrwxr-xr-x  <span class="number">1</span> chengshuai  admin  <span class="number">40</span>  <span class="number">6</span> <span class="number">15</span> <span class="number">10</span>:<span class="number">51</span> /usr/local/bin/taro -&gt; ../lib/node_modules/@tarojs/cli/bin/taro</span><br></pre></td></tr></table></figure><h3 id="taro-å­å‘½ä»¤"><a href="#taro-å­å‘½ä»¤" class="headerlink" title="taro å­å‘½ä»¤"></a>taro å­å‘½ä»¤</h3><p>ä¸Šé¢æˆ‘ä»¬å·²ç»çŸ¥é“ taro-cli åŒ…å®‰è£…ä¹‹åï¼Œtaro å‘½ä»¤æ˜¯æ€ä¹ˆå’Œ /bin/taro æ–‡ä»¶ç›¸å…³è”èµ·æ¥çš„ï¼Œ é‚£ taro init å’Œ taro build åˆæ˜¯æ€æ ·å’Œå¯¹åº”çš„æ–‡ä»¶å…³è”èµ·æ¥çš„å‘¢ï¼Ÿ</p><p><a href="https://github.com/tj/commander.js/" target="_blank" rel="noopener">tj/commander.js</a><br>å‘½ä»¤è¡Œæ¥å£å…¨é¢çš„è§£å†³æ–¹æ¡ˆï¼Œçµæ„Ÿæ¥è‡ªäº Rubyâ€™s commanderã€‚å¯ä»¥è‡ªåŠ¨çš„è§£æå‘½ä»¤å’Œå‚æ•°ï¼Œåˆå¹¶å¤šé€‰é¡¹ï¼Œå¤„ç†çŸ­å‚ç­‰ç­‰ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä¸Šæ‰‹ç®€å•</p><h4 id="å‘½ä»¤å…³è”ä¸å‚æ•°è§£æ"><a href="#å‘½ä»¤å…³è”ä¸å‚æ•°è§£æ" class="headerlink" title="å‘½ä»¤å…³è”ä¸å‚æ•°è§£æ"></a>å‘½ä»¤å…³è”ä¸å‚æ•°è§£æ</h4><p>commander æ”¯æŒ git é£æ ¼çš„å­å‘½ä»¤å¤„ç†ï¼Œå¯ä»¥æ ¹æ®å­å‘½ä»¤è‡ªåŠ¨å¼•å¯¼åˆ°ä»¥ç‰¹å®šæ ¼å¼å‘½åçš„å‘½ä»¤æ‰§è¡Œæ–‡ä»¶ï¼Œæ–‡ä»¶åçš„æ ¼å¼æ˜¯ [command]-[subcommand]ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">taro init =&gt; taro-init</span><br><span class="line">taro build =&gt; taro-build</span><br></pre></td></tr></table></figure><p>/bin/taro æ–‡ä»¶å†…å®¹ä¸å¤šï¼Œæ ¸å¿ƒä»£ç ä¹Ÿå°±é‚£å‡ è¡Œ .command() å‘½ä»¤ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /usr/bin/env node</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> program = <span class="built_in">require</span>(<span class="string">'commander'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; getPkgVersion, printPkgVersion &#125; = <span class="built_in">require</span>(<span class="string">'../dist/util'</span>)</span><br><span class="line"></span><br><span class="line">printPkgVersion()</span><br><span class="line"></span><br><span class="line">program</span><br><span class="line">  .version(getPkgVersion())</span><br><span class="line">  .usage(<span class="string">'&lt;command&gt; [options]'</span>)</span><br><span class="line">  .command(<span class="string">'init [projectName]'</span>, <span class="string">'Init a project with default templete'</span>)</span><br><span class="line">  .command(<span class="string">'config &lt;cmd&gt;'</span>, <span class="string">'Taro config'</span>)</span><br><span class="line">  .command(<span class="string">'create'</span>, <span class="string">'Create page for project'</span>)</span><br><span class="line">  .command(<span class="string">'build'</span>, <span class="string">'Build a project with options'</span>)</span><br><span class="line">  .command(<span class="string">'update'</span>, <span class="string">'Update packages of taro'</span>)</span><br><span class="line">  .command(<span class="string">'convert'</span>, <span class="string">'Convert weapp to taro'</span>)</span><br><span class="line">  .command(<span class="string">'info'</span>, <span class="string">'Diagnostics Taro env info'</span>)</span><br><span class="line">  .command(<span class="string">'doctor'</span>, <span class="string">'Diagnose taro project'</span>)</span><br><span class="line">  .parse(process.argv)</span><br></pre></td></tr></table></figure><h4 id="commandæ–¹æ³•"><a href="#commandæ–¹æ³•" class="headerlink" title="commandæ–¹æ³•"></a>commandæ–¹æ³•</h4><blockquote><p>ç”¨æ³•ï¼š.command(â€˜init <path>â€˜, â€˜descriptionâ€™)<br>commandçš„ åŸåˆ™ä¸Šä»–å¯ä»¥æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºå‘½ä»¤å®šä¹‰ï¼Œç¬¬äºŒä¸ªå‘½ä»¤æè¿°ï¼Œç¬¬ä¸‰ä¸ªä¸ºå‘½ä»¤è¾…åŠ©ä¿®é¥°å¯¹è±¡ã€‚</p></blockquote><ul><li><p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸­å¯ä»¥ä½¿ç”¨ &lt;&gt; æˆ–è€… [] ä¿®é¥°å‘½ä»¤å‚æ•°</p></li><li><p>ç¬¬äºŒä¸ªå‚æ•°å¯é€‰ã€‚</p><ol><li>å½“æ²¡æœ‰ç¬¬äºŒä¸ªå‚æ•°æ—¶ï¼Œcommander.js å°†è¿”å› Command å¯¹è±¡ï¼Œè‹¥æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œå°†è¿”å›åŸå‹å¯¹è±¡ã€‚</li><li>å½“å¸¦æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¹¶ä¸”æ²¡æœ‰æ˜¾ç¤ºè°ƒç”¨ action(fn) æ—¶ï¼Œåˆ™å°†ä¼šä½¿ç”¨å­å‘½ä»¤æ¨¡å¼ã€‚</li><li>æ‰€è°“å­å‘½ä»¤æ¨¡å¼å³ï¼Œ./pmï¼Œ./pm-installï¼Œ./pm-searchç­‰ã€‚è¿™äº›å­å‘½ä»¤è·Ÿä¸»å‘½ä»¤åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚</li></ol></li><li><p>ç¬¬ä¸‰ä¸ªå‚æ•°ä¸€èˆ¬ä¸ç”¨ï¼Œå®ƒå¯ä»¥è®¾ç½®æ˜¯å¦æ˜¾ç¤ºçš„ä½¿ç”¨å­å‘½ä»¤æ¨¡å¼</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;taro-cli-æ˜¯æ€ä¹ˆç©çš„ï¼Ÿ&quot;&gt;&lt;a href=&quot;#taro-cli-æ˜¯æ€ä¹ˆç©çš„ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;taro-cli æ˜¯æ€ä¹ˆç©çš„ï¼Ÿ&quot;&gt;&lt;/a&gt;taro-cli æ˜¯æ€ä¹ˆç©çš„ï¼Ÿ&lt;/h3&gt;&lt;p&gt;æ‰€æœ‰çš„å·¥ç¨‹åŒ–é¡¹ç›®éƒ½ä¸€æ ·ï¼Œè‚¯å®šéœ€è¦CL
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Taroä»‹ç»</title>
    <link href="https://jacob1811.github.io/blog/2019/11/27/Taro%E4%BB%8B%E7%BB%8D/"/>
    <id>https://jacob1811.github.io/blog/2019/11/27/Taroä»‹ç»/</id>
    <published>2019-11-27T07:54:37.000Z</published>
    <updated>2019-11-27T07:54:53.430Z</updated>
    
    <content type="html"><![CDATA[<p>å‚è€ƒæ–‡ç« <br><a href="https://aotu.io/notes/2018/06/07/Taro/index.html" target="_blank" rel="noopener">å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ - Taro</a></p><h3 id="Taroæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Taroæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Taroæ˜¯ä»€ä¹ˆï¼Ÿ"></a>Taroæ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><a href="https://github.com/NervJS/taro" target="_blank" rel="noopener">Taro github</a><br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g889tg83x3j313202yaad.jpg" alt=""><br>Taro æ˜¯ç”±å‡¹å‡¸å®éªŒå®¤æ‰“é€ çš„ä¸€å¥—éµå¾ª React è¯­æ³•è§„èŒƒçš„å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ã€‚<br>å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ï¼Œæ”¯æŒç”¨ React çš„å¼€å‘æ–¹å¼ç¼–å†™ä¸€æ¬¡ä»£ç ï¼Œç”Ÿæˆèƒ½è¿è¡Œåœ¨å¾®ä¿¡/ç™¾åº¦/æ”¯ä»˜å®/å­—èŠ‚è·³åŠ¨/ QQ å°ç¨‹åºã€å¿«åº”ç”¨ã€H5ã€React Native ç­‰çš„åº”ç”¨</p><p>æ€»ç»“ï¼šä¸€æ¬¡ç¼–å†™ï¼Œå¤šç«¯è¿è¡Œ</p><h3 id="Taro-è®¾è®¡æŠ€æœ¯"><a href="#Taro-è®¾è®¡æŠ€æœ¯" class="headerlink" title="Taro è®¾è®¡æŠ€æœ¯"></a>Taro è®¾è®¡æŠ€æœ¯</h3><p>å¯¹äºå¾®ä¿¡å°ç¨‹åºè¿™æ ·ä¸å¼€æ”¾ä¸å¼€æºçš„ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæŠŠ React ä»£ç åˆ†ææˆä¸€é¢—æŠ½è±¡è¯­æ³•æ ‘ï¼Œæ ¹æ®è¿™é¢—æ ‘ç”Ÿæˆå°ç¨‹åºæ”¯æŒçš„æ¨¡æ¿ä»£ç ï¼Œå†åšä¸€ä¸ªå°ç¨‹åºè¿è¡Œæ—¶æ¡†æ¶å¤„ç†äº‹ä»¶å’Œç”Ÿå‘½å‘¨æœŸä¸å°ç¨‹åºæ¡†æ¶å…¼å®¹ï¼Œç„¶åæŠŠä¸šåŠ¡ä»£ç è·‘åœ¨è¿è¡Œæ—¶æ¡†æ¶å°±å®Œæˆäº†å°ç¨‹åºç«¯çš„é€‚é…ã€‚</p><p>å¯¹äº React å·²ç»æ”¯æŒçš„ç«¯ï¼Œä¾‹å¦‚ Webã€React Native ç”šè‡³æœªæ¥çš„ React VRï¼Œæˆ‘ä»¬åªè¦åŒ…ä¸€å±‚ç»„ä»¶åº“å†åšäº›è®¸æ ·å¼æ”¯æŒå³å¯ã€‚é‰´äºæ—¶ä¸‹å°ç¨‹åºçš„çƒ­åº¦å’Œæˆ‘ä»¬å›¢é˜Ÿæœ¬èº«çš„ä¸šåŠ¡ä¾§é‡ç¨‹åº¦ï¼Œç»„ä»¶åº“çš„ API æ˜¯ä»¥å°ç¨‹åºä¸ºæ ‡å‡†ï¼Œå…¶ä»–ç«¯çš„ç»„ä»¶åº“çš„ API éƒ½ä¼šå’Œå°ç¨‹åºç«¯çš„ç»„ä»¶ä¿æŒä¸€è‡´ã€‚<br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g88954w3toj311y08a3zl.jpg" alt=""></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g878ku2rgyj30v80u0adw.jpg" alt=""></p><h3 id="ç°ä»£å‰ç«¯å¼€å‘æµç¨‹"><a href="#ç°ä»£å‰ç«¯å¼€å‘æµç¨‹" class="headerlink" title="ç°ä»£å‰ç«¯å¼€å‘æµç¨‹"></a>ç°ä»£å‰ç«¯å¼€å‘æµç¨‹</h3><p>å’Œå¾®ä¿¡è‡ªå¸¦çš„å°ç¨‹åºæ¡†æ¶ä¸ä¸€æ ·ï¼ŒTaro ç§¯ææ‹¥æŠ±ç¤¾åŒºç°æœ‰çš„ç°ä»£å¼€å‘æµç¨‹ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š</p><p>NPM åŒ…ç®¡ç†ç³»ç»Ÿ<br>ES6+ è¯­æ³•<br>è‡ªç”±çš„èµ„æºå¼•ç”¨<br>CSS é¢„å¤„ç†å™¨å’Œåå¤„ç†å™¨ï¼ˆSCSSã€Lessã€PostCSSï¼‰</p><p>å¯¹äºå¾®ä¿¡å°ç¨‹åºçš„ç¼–è¯‘æµç¨‹ï¼Œæˆ‘ä»¬ä» Parcel å¾—åˆ°çµæ„Ÿï¼Œè‡ªç ”äº†ä¸€å¥—æ‰“åŒ…æœºåˆ¶å°† AST ä¸æ–­ä¼ é€’ï¼Œå› æ­¤ä»£ç åˆ†æçš„é€Ÿåº¦å¾—åˆ°äº†å¾ˆå¤§çš„æé«˜ã€‚ä¸€å° 2015 å¹´ çš„ 15å¯¸ RMBP åœ¨ç¼–è¯‘ä¸Šç™¾ä¸ªç»„ä»¶æ—¶ä»…éœ€è¦å¤§çº¦ 15 ç§’å·¦å³ã€‚</p><h3 id="å’Œ-React-å®Œå…¨ä¸€è‡´çš„-API-å’Œç»„ä»¶åŒ–ç³»ç»Ÿ"><a href="#å’Œ-React-å®Œå…¨ä¸€è‡´çš„-API-å’Œç»„ä»¶åŒ–ç³»ç»Ÿ" class="headerlink" title="å’Œ React å®Œå…¨ä¸€è‡´çš„ API å’Œç»„ä»¶åŒ–ç³»ç»Ÿ"></a>å’Œ React å®Œå…¨ä¸€è‡´çš„ API å’Œç»„ä»¶åŒ–ç³»ç»Ÿ</h3><blockquote><p>åœ¨ Taro ä¸­ï¼Œä½ ä¸ç”¨åƒå°ç¨‹åºä¸€æ ·åŒºåˆ†ä»€ä¹ˆæ˜¯ App ç»„ä»¶ï¼Œä»€ä¹ˆæ˜¯ Page ç»„ä»¶ï¼Œä»€ä¹ˆæ˜¯ Component ç»„ä»¶ï¼ŒTaro å…¨éƒ½æ˜¯ Component ç»„ä»¶ï¼Œå¹¶ä¸”å’Œ React çš„ç”Ÿå‘½å‘¨æœŸå®Œå…¨ä¸€è‡´</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€ä¸ªå…¸å‹çš„ Taro ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> Taro, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@tarojs/taro'</span></span><br><span class="line"><span class="keyword">import</span> &#123; View, Button &#125; <span class="keyword">from</span> <span class="string">'@tarojs/components'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Home</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> (props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      title: <span class="string">'é¦–é¡µ'</span>,</span><br><span class="line">      list: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  componentWillMount () &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  componentDidMount () &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  componentWillUpdate (nextProps, nextState) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  componentDidUpdate (prevProps, prevState) &#123;&#125;</span><br><span class="line"> </span><br><span class="line">  shouldComponentUpdate (nextProps, nextState) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  add = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// dosth</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; list, title &#125; = <span class="keyword">this</span>.state</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View className=<span class="string">'index'</span>&gt;</span><br><span class="line">        &lt;View className=<span class="string">'title'</span>&gt;&#123;title&#125;&lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">        &lt;View className='content'&gt;</span></span><br><span class="line"><span class="regexp">          &#123;list.map(item =&gt; &#123;</span></span><br><span class="line"><span class="regexp">            return (</span></span><br><span class="line"><span class="regexp">              &lt;View className='item'&gt;&#123;item&#125;&lt;/</span>View&gt;</span><br><span class="line">            )</span><br><span class="line">          &#125;)&#125;</span><br><span class="line">          &lt;Button className=<span class="string">'add'</span> onClick=&#123;<span class="keyword">this</span>.add&#125;&gt;æ·»åŠ &lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>View&gt;</span><br><span class="line">      &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="å„ç§å°ç¨‹åºå¯¹æ¯”"><a href="#å„ç§å°ç¨‹åºå¯¹æ¯”" class="headerlink" title="å„ç§å°ç¨‹åºå¯¹æ¯”"></a>å„ç§å°ç¨‹åºå¯¹æ¯”</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g878iz61rvj315m0u07bz.jpg" alt=""></p><p><a href="https://github.com/yingye/Blog/issues/3" target="_blank" rel="noopener">wepyç¼–è¯‘åŸç†</a></p><h3 id="æ”¯æŒå°ç¨‹åºç«¯åˆ†åŒ…åŠ è½½ä»¥åŠæ’ä»¶å¼•ç”¨"><a href="#æ”¯æŒå°ç¨‹åºç«¯åˆ†åŒ…åŠ è½½ä»¥åŠæ’ä»¶å¼•ç”¨" class="headerlink" title="æ”¯æŒå°ç¨‹åºç«¯åˆ†åŒ…åŠ è½½ä»¥åŠæ’ä»¶å¼•ç”¨"></a>æ”¯æŒå°ç¨‹åºç«¯åˆ†åŒ…åŠ è½½ä»¥åŠæ’ä»¶å¼•ç”¨</h3><p>Taro ä¸­ä¹ŸåŠ å…¥å¯¹åŸç”Ÿå°ç¨‹åºåˆ†åŒ…åŠ è½½åŠŸèƒ½çš„æ”¯æŒï¼Œé…ç½®çš„æ–¹å¼ä¸åŸç”Ÿå°ç¨‹åºåŸºæœ¬ä¸€è‡´ï¼Œåªéœ€è¦åœ¨ app.js å…¥å£æ–‡ä»¶ä¸­åŠ å…¥ subPackage å­—æ®µå³å¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Taro, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@tarojs/taro'</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  config = &#123;</span><br><span class="line">    pages: [</span><br><span class="line">      <span class="string">'pages/index'</span>,</span><br><span class="line">      <span class="string">'pages/logs'</span></span><br><span class="line">    ],</span><br><span class="line">    subPackages: [</span><br><span class="line">      &#123;</span><br><span class="line">        root: <span class="string">'moduleA'</span>,</span><br><span class="line">        pages: [</span><br><span class="line">          <span class="string">'pages/rabbit'</span>,</span><br><span class="line">          <span class="string">'pages/squirrel'</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Taro ä¹Ÿæ”¯æŒäº†ä½¿ç”¨å°ç¨‹åºçš„æ’ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Taro, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@tarojs/taro'</span></span><br><span class="line"><span class="keyword">import</span> &#123; View &#125; <span class="keyword">from</span> <span class="string">'@tarojs/Components'</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PageA</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  config = &#123;</span><br><span class="line">    usingComponents: &#123;</span><br><span class="line">      <span class="string">'hello-component'</span>: <span class="string">'plugin://myPlugin/hello-component'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View&gt;</span><br><span class="line">        &lt;hello-component&gt;<span class="xml"><span class="tag">&lt;/<span class="name">hello-component</span>&gt;</span></span></span><br><span class="line">      &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p><a href="https://aotu.io/notes/2018/11/30/taro_practice/" target="_blank" rel="noopener">æœ€ä½³å®è·µ</a></p><h3 id="ä¸ºä»€ä¹ˆé€‰æ‹©ä½¿ç”¨Reactè¯­æ³•"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©ä½¿ç”¨Reactè¯­æ³•" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹©ä½¿ç”¨Reactè¯­æ³•"></a>ä¸ºä»€ä¹ˆé€‰æ‹©ä½¿ç”¨Reactè¯­æ³•</h3><p>è¿™ä¸ªè¦ä»ä¸¤ä¸ªæ–¹é¢æ¥è¯´ï¼Œä¸€æ˜¯å°ç¨‹åºåŸç”Ÿçš„å¼€å‘æ–¹å¼ä¸å¤Ÿå‹å¥½ï¼Œæˆ–è€…è¯´ä¸å¤Ÿå·¥ç¨‹åŒ–ï¼Œåœ¨å¼€å‘ä¸€äº›å¤§å‹é¡¹ç›®æ—¶å°±ä¼šæ˜¾å¾—å¾ˆåƒåŠ›ï¼Œä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ç‚¹ï¼š</p><p>ä¸€ä¸ªå°ç¨‹åºé¡µé¢æˆ–ç»„ä»¶ï¼Œéœ€è¦åŒæ—¶åŒ…å« 4 ä¸ªæ–‡ä»¶ï¼Œä»¥è‡³å¼€å‘ä¸€ä¸ªåŠŸèƒ½æ¨¡å—æ—¶ï¼Œéœ€è¦å¤šä¸ªæ–‡ä»¶é—´æ¥å›åˆ‡æ¢<br>æ²¡æœ‰è‡ªå®šä¹‰æ–‡ä»¶é¢„å¤„ç†ï¼Œæ— æ³•ç›´æ¥ä½¿ç”¨ Sassã€Less ä»¥åŠè¾ƒæ–°çš„ ES Next è¯­æ³•<br>å­—ç¬¦ä¸²æ¨¡æ¿å¤ªè¿‡å­±å¼±ï¼Œå°ç¨‹åºçš„å­—ç¬¦ä¸²æ¨¡æ¿ä»¿çš„æ˜¯ Vueï¼Œä½†æ˜¯æ²¡æœ‰æä¾› Vue é‚£ä¹ˆå¤šçš„è¯­æ³•ç³–ï¼Œå½“å®ç°ä¸€äº›æ¯”è¾ƒå¤æ‚çš„å¤„ç†æ—¶ï¼Œå†™èµ·æ¥å°±éå¸¸éº»çƒ¦ï¼Œè™½ç„¶æä¾›äº† wxs ä½œä¸ºè¡¥å……ï¼Œä½†æ˜¯ä½¿ç”¨ä½“éªŒè¿˜æ˜¯éå¸¸ç³Ÿç³•<br>ç¼ºä¹æµ‹è¯•å¥—ä»¶ï¼Œæ— æ³•ç¼–å†™æµ‹è¯•ä»£ç æ¥ä¿è¯é¡¹ç›®è´¨é‡ï¼Œä¹Ÿå°±ä¸èƒ½è¿›è¡ŒæŒç»­é›†æˆï¼Œè‡ªåŠ¨åŒ–æ‰“åŒ…<br>åŸç”Ÿçš„å¼€å‘æ–¹å¼ä¸å‹å¥½ï¼Œè‡ªç„¶å°±æƒ³è¦æœ‰æ›´é«˜æ•ˆçš„æ›¿ä»£æ–¹æ¡ˆã€‚æ‰€ä»¥æˆ‘ä»¬å°†ç›®å…‰æŠ•å‘äº†å¸‚é¢ä¸Šæµè¡Œçš„ä¸‰å¤§å‰ç«¯æ¡†æ¶Reactã€Vueã€Angular ã€‚Angularåœ¨å›½å†…çš„æµè¡Œç¨‹åº¦ä¸é«˜ï¼Œæˆ‘ä»¬é¦–å…ˆæ’é™¤äº†è¿™ç§è¯­æ³•è§„èŒƒã€‚è€Œç±» Vue çš„å°ç¨‹åºå¼€å‘æ¡†æ¶å¸‚é¢ä¸Šå·²ç»æœ‰ä¸€äº›ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼ŒåŒæ—¶æˆ‘ä»¬éƒ¨é—¨å†…çš„æŠ€æœ¯æ ˆä¸»è¦æ˜¯ Reactï¼Œé‚£ä¹ˆ React è¯­æ³•è§„èŒƒ ä¹Ÿè‡ªç„¶æˆä¸ºäº†æˆ‘ä»¬çš„ç¬¬ä¸€é€‰æ‹©ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æœ‰ä»¥ä¸‹å‡ ç‚¹çš„è€ƒè™‘ï¼š</p><p>React ä¸€é—¨éå¸¸æµè¡Œçš„æ¡†æ¶ï¼Œä¹Ÿæœ‰å¹¿å¤§çš„å—ä¼—ï¼Œä½¿ç”¨å®ƒä¹Ÿèƒ½é™ä½å°ç¨‹åºå¼€å‘çš„å­¦ä¹ æˆæœ¬<br>å°ç¨‹åºçš„æ•°æ®é©±åŠ¨æ¨¡æ¿æ›´æ–°çš„æ€æƒ³ä¸å®ç°æœºåˆ¶ï¼Œä¸ React ç±»ä¼¼<br>React é‡‡ç”¨ JSX ä½œä¸ºè‡ªèº«æ¨¡æ¿ï¼ŒJSX ç›¸æ¯”å­—ç¬¦ä¸²æ¨¡æ¿æ¥è¯´æ›´åŠ è‡ªç”±ï¼Œæ›´è‡ªç„¶ï¼Œæ›´å…·è¡¨ç°åŠ›ï¼Œä¸éœ€è¦ä¾èµ–å­—ç¬¦ä¸²æ¨¡æ¿çš„å„ç§è¯­æ³•ç³–ï¼Œä¹Ÿèƒ½å®Œæˆå¤æ‚çš„å¤„ç†<br>React æœ¬èº«æœ‰è·¨ç«¯çš„å®ç°æ–¹æ¡ˆ ReactNativeï¼Œå¹¶ä¸”éå¸¸æˆç†Ÿï¼Œç¤¾åŒºæ´»è·ƒï¼Œå¯¹äº Taro æ¥è¯´æœ‰æ›´å¤šçš„å¤šç«¯å¼€å‘å¯èƒ½æ€§<br>ç»¼ä¸Šæ‰€è¿°ï¼ŒTaro æœ€ç»ˆé‡‡ç”¨äº† React è¯­æ³• æ¥ä½œä¸ºè‡ªå·±çš„è¯­æ³•æ ‡å‡†ï¼Œé…åˆå‰ç«¯å·¥ç¨‹åŒ–çš„æ€æƒ³ï¼Œä¸ºå°ç¨‹åºå¼€å‘æ‰“é€ äº†æ›´åŠ ä¼˜é›…çš„å¼€å‘ä½“éªŒã€‚</p><h3 id="redux-ç»“æ„"><a href="#redux-ç»“æ„" class="headerlink" title="redux ç»“æ„"></a>redux ç»“æ„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ config</span><br><span class="line">â”‚   â”œâ”€â”€ dev.js</span><br><span class="line">â”‚   â”œâ”€â”€ index.js</span><br><span class="line">â”‚   â””â”€â”€ prod.js</span><br><span class="line">â”œâ”€â”€ dist</span><br><span class="line">â”‚   â”œâ”€â”€ actions</span><br><span class="line">â”‚   â”‚   â””â”€â”€ counter.js</span><br><span class="line">â”‚   â”œâ”€â”€ app.js</span><br><span class="line">â”‚   â”œâ”€â”€ app.json</span><br><span class="line">â”‚   â”œâ”€â”€ app.wxss</span><br><span class="line">â”‚   â”œâ”€â”€ constants</span><br><span class="line">â”‚   â”‚   â””â”€â”€ counter.js</span><br><span class="line">â”‚   â”œâ”€â”€ npm</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ @tarojs</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ promise-polyfill</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ redux</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ redux-logger</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ redux-thunk</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ regenerator-runtime</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ symbol-observable</span><br><span class="line">â”‚   â”‚   â””â”€â”€ tslib</span><br><span class="line">â”‚   â”œâ”€â”€ pages</span><br><span class="line">â”‚   â”‚   â””â”€â”€ index</span><br><span class="line">â”‚   â”œâ”€â”€ project.config.json</span><br><span class="line">â”‚   â”œâ”€â”€ reducers</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ counter.js</span><br><span class="line">â”‚   â”‚   â””â”€â”€ index.js</span><br><span class="line">â”‚   â”œâ”€â”€ sitemap.json</span><br><span class="line">â”‚   â””â”€â”€ store</span><br><span class="line">â”‚       â””â”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ global.d.ts</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ project.config.json</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â”œâ”€â”€ actions</span><br><span class="line">â”‚   â”‚   â””â”€â”€ counter.ts</span><br><span class="line">â”‚   â”œâ”€â”€ app.less</span><br><span class="line">â”‚   â”œâ”€â”€ app.tsx</span><br><span class="line">â”‚   â”œâ”€â”€ constants</span><br><span class="line">â”‚   â”‚   â””â”€â”€ counter.ts</span><br><span class="line">â”‚   â”œâ”€â”€ index.html</span><br><span class="line">â”‚   â”œâ”€â”€ pages</span><br><span class="line">â”‚   â”‚   â””â”€â”€ index</span><br><span class="line">â”‚   â”œâ”€â”€ reducers</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ counter.ts</span><br><span class="line">â”‚   â”‚   â””â”€â”€ index.ts</span><br><span class="line">â”‚   â””â”€â”€ store</span><br><span class="line">â”‚       â””â”€â”€ index.ts</span><br><span class="line">â”œâ”€â”€ tsconfig.json</span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure><p>å¯ä»¥å€Ÿé‰´ä¸€ä¸‹ï¼š<br>ç»„ä»¶éƒ½æ”¾åœ¨componentsé‡Œé¢ã€‚é‡Œé¢çš„ç›®å½•æ˜¯è¿™æ ·çš„ï¼Œå‡å¦‚æœ‰ä¸ªcouponä¼˜æƒ åˆ¸é¡µé¢ï¼Œåœ¨pagesè‡ªç„¶å…ˆæœ‰ä¸ªcouponï¼Œä½œä¸ºé¡µé¢å…¥å£ï¼Œç„¶åå®ƒçš„ç»„ä»¶å°±ä¼šå­˜æ”¾åœ¨components/couponé‡Œé¢ï¼Œå°±æ˜¯componentsé‡Œé¢ä¹Ÿä¼šæŒ‰ç…§é¡µé¢åˆ†æ¨¡å—ï¼Œå…¬å…±çš„ç»„ä»¶å¯ä»¥å»ºä¸€ä¸ªcomponents/publicæ–‡ä»¶å¤¹ï¼Œè¿›è¡Œå¤ç”¨</p><p>è¿™æ ·çš„å¥½å¤„æ˜¯é¡µé¢ä¹‹é—´äº’ç›¸ç‹¬ç«‹ï¼Œäº’ä¸å½±å“ã€‚æ‰€ä»¥æˆ‘ä»¬å‡ ä¸ªå¼€å‘äººå‘˜ï¼Œä¹Ÿæ˜¯æŒ‰ç…§é¡µé¢çš„ç»´åº¦æ¥è¿›è¡Œåˆ†å·¥ï¼Œäº’ä¸å¹²æ‰°ï¼Œå¤§å¤§æé«˜äº†æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ã€‚</p><p>actionsè¿™ä¸ªæ–‡ä»¶å¤¹ä¹Ÿæ˜¯æ¯”è¾ƒé‡è¦ï¼Œè¿™é‡Œå¤„ç†çš„æ˜¯æ‹‰å–æ•°æ®ï¼Œæ•°æ®å†å¤„ç†çš„é€»è¾‘ã€‚å¯ä»¥è¯´ï¼Œæ•°æ®å¤„ç†å¾—å¥½ï¼ŒæµåŠ¨æ¸…æ™°ï¼Œæ•´ä¸ªé¡¹ç›®å°±æˆåŠŸäº†ä¸€åŠï¼Œå…·ä½“å¯ä»¥çœ‹ä¸‹é¢æ•°æ®çŠ¶æ€ç®¡ç†çš„éƒ¨åˆ†ã€‚å¦‚ä¸Šï¼Œå‡å¦‚æ˜¯couponé¡µé¢çš„actionsï¼Œé‚£ä¹ˆå°±ä¼šæ”¾åœ¨actions/couponé‡Œé¢ï¼Œå¯ä»¥å†ä¸€æ¬¡è§åˆ°ï¼Œæ‰€æœ‰çš„æ¨¡å—éƒ½æ˜¯ä»¥é¡µé¢çš„ç»´åº¦æ¥åŒºåˆ†çš„ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œassetæ–‡ä»¶ç”¨æ¥å­˜æ”¾çš„é™æ€èµ„æºï¼Œå¦‚ä¸€äº›iconç±»çš„å›¾ç‰‡ï¼Œä½†å»ºè®®ä¸è¦å­˜æ”¾å¤ªå¤šï¼Œæ¯•ç«Ÿç¨‹åºåŒ…æœ‰é™åˆ¶ã€‚è€Œconstantsåˆ™æ˜¯ä¸€äº›å­˜æ”¾å¸¸é‡çš„åœ°æ–¹ï¼Œä¾‹å¦‚apiåŸŸåï¼Œé…ç½®ç­‰ç­‰ã€‚</p><h3 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h3><h4 id="setStateçš„ä½¿ç”¨"><a href="#setStateçš„ä½¿ç”¨" class="headerlink" title="setStateçš„ä½¿ç”¨"></a>setStateçš„ä½¿ç”¨</h4><p>å®åœ¨å°ç¨‹åºçš„å¼€å‘ä¸­ï¼Œæœ€å¤§å¯èƒ½çš„ä¼šé‡åˆ°çš„æ€§èƒ½é—®é¢˜ï¼Œå¤§å¤šæ•°å‡ºç°åœ¨setDataï¼ˆå…·ä½“åˆ° Taro ä¸­å°±æ˜¯è°ƒç”¨ setState å‡½æ•°ï¼‰ä¸Šã€‚è¿™æ˜¯ç”±å°ç¨‹åºçš„è®¾è®¡æœºåˆ¶æ‰€å¯¼è‡´çš„ï¼Œæ¯è°ƒç”¨ä¸€æ¬¡ setDataï¼Œå°ç¨‹åºå†…éƒ¨éƒ½ä¼šå°†è¯¥éƒ¨åˆ†æ•°æ®åœ¨é€»è¾‘å±‚ï¼ˆè¿è¡Œç¯å¢ƒ JSCoreï¼‰è¿›è¡Œç±»ä¼¼åºåˆ—åŒ–çš„æ“ä½œï¼Œå°†æ•°æ®è½¬æ¢æˆå­—ç¬¦ä¸²å½¢å¼ä¼ é€’ç»™è§†å›¾å±‚ï¼ˆè¿è¡Œç¯å¢ƒ WebViewï¼‰ï¼Œè§†å›¾å±‚é€šè¿‡ååºåˆ—åŒ–æ‹¿åˆ°æ•°æ®åå†è¿›è¡Œé¡µé¢æ¸²æŸ“ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸‹æ¥æœ‰ä¸€å®šæ€§èƒ½å¼€é”€ã€‚</p><p>å°ç¨‹åºçš„è§†å›¾å±‚ç›®å‰ä½¿ç”¨ WebView ä½œä¸ºæ¸²æŸ“è½½ä½“ï¼Œè€Œé€»è¾‘å±‚æ˜¯ç”±ç‹¬ç«‹çš„ JavascriptCore ä½œä¸ºè¿è¡Œç¯å¢ƒï¼Œåœ¨æ¶æ„ä¸Šï¼ŒWebView å’Œ JavascriptCore éƒ½æ˜¯ç‹¬ç«‹çš„æ¨¡å—ï¼Œå¹¶ä¸å…·å¤‡æ•°æ®ç›´æ¥å…±äº«çš„é€šé“ã€‚åœ¨è°ƒç”¨ setData ä¹‹åï¼Œä¼šå°†æ•°æ®ä½¿ç”¨ JSON.stringify è¿›è¡Œåºåˆ—åŒ–ï¼Œå†æ‹¼æ¥æˆè„šæœ¬ï¼Œç„¶åå†ä¼ ç»™è§†å›¾å±‚æ¸²æŸ“ï¼Œè¿™æ ·çš„è¯ï¼Œå½“æ•°æ®é‡éå¸¸å¤§çš„æ—¶å€™ï¼Œå°ç¨‹åºå°±ä¼šå˜å¾—å¼‚å¸¸å¡é¡¿ï¼Œæ€§èƒ½å¾ˆå·®ã€‚<br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g87zrz1y8wj31do0dignd.jpg" alt=""></p><p>æ‰€ä»¥å…³äºsetStateçš„ä½¿ç”¨ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªåŸåˆ™<br>é¿å…ä¸€æ¬¡æ€§æ›´æ–°å·¨å¤§çš„æ•°æ®ã€‚è¿™ä¸ªæ›´å¤šçš„æ˜¯ç»„ä»¶è®¾è®¡çš„é—®é¢˜ï¼Œåœ¨å¹³è¡¡å¥½å¼€å‘æ•ˆç‡çš„æƒ…å†µä¸‹å°½å¯èƒ½åœ°ç»†åˆ†ç»„ä»¶ã€‚<br>é¿å…é¢‘ç¹åœ°è°ƒç”¨ setStateã€‚å®é™…ä¸Šåœ¨ Taro ä¸­ setState æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šå¸®ä½ åšäº†è¿™å±‚ä¼˜åŒ–ï¼Œä¾‹å¦‚ä¸€ä¸ªå‡½æ•°é‡Œè°ƒç”¨äº†ä¸¤æ¬¡ setStateï¼Œæœ€å Taro ä¼šåœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­å°†ä¸¤è€…åˆå¹¶ï¼Œå¹¶å‰”é™¤é‡å¤æ•°æ®ã€‚<br>é¿å…åå°æ€é¡µé¢è¿›è¡Œ setStateã€‚è¿™ä¸ªæ›´æœ‰å¯èƒ½æ˜¯å› ä¸ºåœ¨å®šæ—¶å™¨ç­‰å¼‚æ­¥æ“ä½œä¸­ä½¿ç”¨äº† setStateï¼Œå¯¼è‡´åå°æ€é¡µé¢è¿›è¡Œäº† setState æ“ä½œã€‚è¦è§£å†³é—®é¢˜è¯¥å°±åœ¨é¡µé¢é”€æ¯æˆ–æ˜¯éšè—æ—¶è¿›è¡Œé”€æ¯å®šæ—¶å™¨æ“ä½œå³å¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹ state</span></span><br><span class="line"><span class="keyword">this</span>.state = &#123;</span><br><span class="line">  a: [<span class="number">0</span>],</span><br><span class="line">  b: &#123;</span><br><span class="line">    x: &#123;</span><br><span class="line">      y: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨ this.setState</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.setState(&#123;</span><br><span class="line">  a: [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">  b: &#123;</span><br><span class="line">    x: &#123;</span><br><span class="line">      y: <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ä¼˜åŒ–</span></span><br><span class="line"><span class="keyword">this</span>.$scope.setData(&#123;</span><br><span class="line">  a: [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">  b: &#123;</span><br><span class="line">    x: &#123;</span><br><span class="line">      y: <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// ä¼˜åŒ–</span></span><br><span class="line"><span class="keyword">this</span>.$scope.setData(&#123;</span><br><span class="line">  <span class="string">'a[0]'</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">'a[1]'</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="string">'b.x.y'</span>: <span class="number">10</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–"><a href="#åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–" class="headerlink" title="åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–"></a>åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–</h4><p>å½“åŠ è½½çš„å•†å“æ•°æ®è¶Šæ¥è¶Šå¤šæ—¶ï¼Œå°±ä¼šæŠ¥é”™ï¼ŒinvokeWebviewMethod æ•°æ®ä¼ è¾“é•¿åº¦ä¸º 1227297 å·²ç»è¶…è¿‡æœ€å¤§é•¿åº¦ 1048576ã€‚åŸå› å°±æ˜¯æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„ï¼Œå°ç¨‹åºåœ¨ setData çš„æ—¶å€™ä¼šå°†è¯¥éƒ¨åˆ†æ•°æ®åœ¨é€»è¾‘å±‚ä¸è§†å›¾å±‚ä¹‹é—´ä¼ é€’ï¼Œå½“æ•°æ®é‡è¿‡å¤§æ—¶å°±ä¼šè¶…å‡ºé™åˆ¶ã€‚</p><p>æ‰€æœ‰çš„åŸå§‹æ•°æ®æ”¾åœ¨listä¸­ï¼Œç„¶ååˆ¤æ–­æ ¹æ®é¡µé¢çš„æ»šåŠ¨é«˜åº¦ï¼Œåœ¨é¡µé¢æ»šåŠ¨äº‹ä»¶ä¸­åˆ¤æ–­å½“å‰çš„é¡µç ã€‚é¡µç å°äº10ï¼Œå– list.slice çš„å‰åé¡¹ï¼Œå¤§äºç­‰äº10ï¼Œåˆ™å–ååé¡¹ï¼Œæœ€åå†è°ƒç”¨ this.setState è¿›è¡Œåˆ—è¡¨æ¸²æŸ“ã€‚è¿™é‡Œçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼ŒæŠŠçœ‹å¾—è§çš„æ•°æ®æ‰æ¸²æŸ“å‡ºæ¥ï¼Œä»è€Œé¿å…æ•°æ®é‡è¿‡å¤§è€Œå¯¼è‡´çš„æŠ¥é”™<br>åŒæ—¶ä¸ºäº†æå‰æ¸²æŸ“ï¼Œæˆ‘ä»¬ä¼šé¢„è®¾ä¸€ä¸ª500çš„é˜ˆå€¼ï¼Œä½¿æ•´ä¸ªæ¸²æŸ“åˆ‡æ¢çš„æµç¨‹æ›´åŠ é¡ºç•…ã€‚</p><h4 id="å¤šç«¯å…¼å®¹"><a href="#å¤šç«¯å…¼å®¹" class="headerlink" title="å¤šç«¯å…¼å®¹"></a>å¤šç«¯å…¼å®¹</h4><p>ä½¿ç”¨process.env.TARO_ENVå¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ¤æ–­å½“å‰çš„ç¼–è¯‘ç¯å¢ƒï¼Œä»è€Œåšä¸€äº›ç‰¹æ®Šå¤„ç†ï¼Œç›®å‰å®ƒçš„å–å€¼æœ‰ weapp ã€swan ã€ alipay ã€ h5 ã€ rn äº”ä¸ªã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (process.env.TARO_ENV === <span class="string">'weapp'</span>) &#123;</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">'path/to/weapp/name'</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (process.env.TARO_ENV === <span class="string">'h5'</span>) &#123;</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">'path/to/h5/name'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ»šåŠ¨äº‹ä»¶å…¼å®¹"><a href="#æ»šåŠ¨äº‹ä»¶å…¼å®¹" class="headerlink" title="æ»šåŠ¨äº‹ä»¶å…¼å®¹"></a>æ»šåŠ¨äº‹ä»¶å…¼å®¹</h4><p>åœ¨å°ç¨‹åºä¸­ï¼Œç›‘å¬é¡µé¢æ»šåŠ¨éœ€è¦åœ¨é¡µé¢ä¸­çš„onPageScrolläº‹ä»¶é‡Œè¿›è¡Œï¼Œè€Œåœ¨ H5 ä¸­åˆ™æ˜¯éœ€è¦æ‰‹åŠ¨è°ƒç”¨window.addEventListeneræ¥è¿›è¡Œäº‹ä»¶ç»‘å®š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>(...arguments)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.pageScrollFn = throttle(<span class="keyword">this</span>.scrollFn, <span class="number">200</span>, <span class="keyword">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  scrollFn = <span class="function">(<span class="params">scrollTop</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// åœ¨H5æˆ–è€…å…¶å®ƒç«¯ä¸­ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¢«å¿½ç•¥</span></span><br><span class="line">  onPageScroll (e) &#123;</span><br><span class="line">    <span class="keyword">this</span>.pageScrollFn(e.scrollTop)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount () &#123;</span><br><span class="line">    <span class="comment">// åªæœ‰ç¼–è¯‘ä¸ºh5æ—¶ä¸‹é¢ä»£ç æ‰ä¼šè¢«ç¼–è¯‘</span></span><br><span class="line"><span class="keyword">if</span> (process.env.TARO_ENV === <span class="string">'h5'</span>) &#123;</span><br><span class="line">      <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, <span class="keyword">this</span>.pageScrollFn)</span><br><span class="line">&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="canvaså…¼å®¹"><a href="#canvaså…¼å®¹" class="headerlink" title="canvaså…¼å®¹"></a>canvaså…¼å®¹</h4><p>canvas åœ¨å°ç¨‹åºå’Œ H5 ä¸­çš„ API åŸºæœ¬éƒ½æ˜¯ä¸€è‡´çš„ï¼Œä½†æœ‰å‡ ç‚¹ä¸åŒ:<br>canvas ä¸Šä¸‹æ–‡çš„è·å–æ–¹å¼ä¸åŒï¼Œh5 ä¸­æ˜¯ç›´æ¥ä» dom ä¸­è·å–ï¼›è€Œå°ç¨‹åºé‡Œè¦é€šè¿‡è°ƒç”¨ Taro.createCanvasContext æ¥æ‰‹åŠ¨åˆ›å»º<br>ç»˜åˆ¶æ—¶ï¼Œå°ç¨‹åºé‡Œè¿˜éœ€åœ¨æ‰‹åŠ¨è°ƒç”¨ CanvasContext.draw æ¥è¿›è¡Œç»˜åˆ¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount () &#123;</span><br><span class="line">    <span class="comment">// åªæœ‰ç¼–è¯‘ä¸ºh5ä¸‹é¢ä»£ç æ‰ä¼šè¢«ç¼–è¯‘</span></span><br><span class="line">    <span class="keyword">if</span> (process.env.TARO_ENV === <span class="string">'h5'</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.context = <span class="built_in">document</span>.getElementById(<span class="string">'canvas-id'</span>).getContext(<span class="string">'2d'</span>)</span><br><span class="line">    <span class="comment">// åªæœ‰ç¼–è¯‘ä¸ºå°ç¨‹åºä¸‹é¢ä»£ç æ‰ä¼šè¢«ç¼–è¯‘</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (process.env.TARO_ENV === <span class="string">'weapp'</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.context = Taro.createCanvasContext(<span class="string">'canvas-id'</span>, <span class="keyword">this</span>.$scope)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»˜åˆ¶çš„å‡½æ•°</span></span><br><span class="line">draw () &#123;</span><br><span class="line">    <span class="comment">// è¿›è¡Œä¸€äº›ç»˜åˆ¶æ“ä½œ</span></span><br><span class="line">  <span class="comment">// .....</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å…¼å®¹å°ç¨‹åºç«¯çš„ç»˜åˆ¶</span></span><br><span class="line">    <span class="keyword">typeof</span> <span class="keyword">this</span>.context.draw === <span class="string">'function'</span> &amp;&amp; <span class="keyword">this</span>.context.draw(<span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render () &#123;</span><br><span class="line">    <span class="comment">// åŒæ—¶æ ‡è®°ä¸Šidå’Œcanvas-id</span></span><br><span class="line"><span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Canvas</span> <span class="attr">id</span>=<span class="string">'canvas-id'</span> <span class="attr">canvas-id</span>=<span class="string">'canvas-id'</span>/&gt;</span></span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="ui"><a href="#ui" class="headerlink" title="ui"></a>ui</h3><p><a href="https://taro-ui.aotu.io/#/" target="_blank" rel="noopener">Taro-ui</a></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g880mztj79j31bu0u00yz.jpg" alt=""></p><h3 id="å°†å·²æœ‰å¾®ä¿¡å°ç¨‹åºè½¬æ¢ä¸ºå¤šç«¯åº”ç”¨-Taro"><a href="#å°†å·²æœ‰å¾®ä¿¡å°ç¨‹åºè½¬æ¢ä¸ºå¤šç«¯åº”ç”¨-Taro" class="headerlink" title="å°†å·²æœ‰å¾®ä¿¡å°ç¨‹åºè½¬æ¢ä¸ºå¤šç«¯åº”ç”¨(Taro)"></a>å°†å·²æœ‰å¾®ä¿¡å°ç¨‹åºè½¬æ¢ä¸ºå¤šç«¯åº”ç”¨(Taro)</h3><p><a href="https://github.com/NervJS/taro/issues/955" target="_blank" rel="noopener">!!! åªèƒ½åŸç”Ÿï¼Œä¸æ”¯æŒwepyç­‰ç¬¬ä¸‰æ–¹æ¡†æ¶</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">taro convert </span><br><span class="line"><span class="comment">// æ ¹ç›®å½•ä¸‹ç”ŸæˆtaroConvertæ–‡ä»¶å¤¹</span></span><br><span class="line"></span><br><span class="line">cd taroConvert </span><br><span class="line">cnpm i</span><br><span class="line"></span><br><span class="line">npm run dev:weapp</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•é¡¹ç›®"><a href="#æµ‹è¯•é¡¹ç›®" class="headerlink" title="æµ‹è¯•é¡¹ç›®"></a>æµ‹è¯•é¡¹ç›®</h4><p><a href="https://github.com/RebeccaHanjw/weapp-wechat-zhihu" target="_blank" rel="noopener">githubå¼€æºå°ç¨‹åºé¡¹ç›®-çŸ¥ä¹</a><br><a href="https://nervjs.github.io/taro/docs/taroize.html" target="_blank" rel="noopener">Taroè½¬æ¢åŸç†</a><br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g882rczljaj314h0u0115.jpg" alt=""></p><h4 id="é¡µé¢æ–‡ä»¶å¯¹æ¯”"><a href="#é¡µé¢æ–‡ä»¶å¯¹æ¯”" class="headerlink" title="é¡µé¢æ–‡ä»¶å¯¹æ¯”"></a>é¡µé¢æ–‡ä»¶å¯¹æ¯”</h4><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g882t4kd4sj30hi0te75x.jpg" alt=""></p><p>//jså¯¹æ¯”<br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g882uk11fzj30yb0gs0vd.jpg" alt=""></p><p>//htmlå¯¹æ¯”<br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g882ws6zvsj30zb0ef784.jpg" alt=""></p><p>æœ€é‡è¦çš„åŒºåˆ«å°±åœ¨äº @withWeapp() è¿™ä¸ªè£…é¥°å™¨ï¼Œä½ å¯ä»¥å°†å®ƒç†è§£ä¸ºè½¬æ¢ä»£ç çš„è¿è¡Œæ—¶ï¼Œ@withWeapp() ä¼šå¢åŠ ä¸€äº›åŸæ¥ Taro æ²¡æœ‰æ–¹æ³•å’Œå±æ€§</p><h4 id="this-setData"><a href="#this-setData" class="headerlink" title="this.setData"></a>this.setData</h4><p>è½¬æ¢åçš„ this.setData çš„ API ç›¸å½“äºå°ç¨‹åºçš„ this.setData çš„ polyfillï¼Œä»–å’Œ this.setState æœ€å¤§çš„åŒºåˆ«å°±åœ¨äºï¼Œthis.setData ä¹‹å data çš„æ•°æ®æ˜¯åŒæ­¥æ›´æ–°ï¼Œè€Œæ¸²æŸ“æ˜¯å¼‚æ­¥æ›´æ–°ï¼Œè€Œ setState ä¸¤è€…éƒ½æ˜¯å¼‚æ­¥çš„ã€‚</p><h4 id="this-data-å’Œ-this-properties"><a href="#this-data-å’Œ-this-properties" class="headerlink" title="this.data å’Œ this.properties"></a>this.data å’Œ this.properties</h4><p>this.data å’Œ this.properties ç›¸å½“äº Taro çš„ this.state å’Œ this.props çš„ aliasï¼Œå½“å®ƒä»¬çš„æ•°æ®æ›´æ–°æ—¶ï¼Œå¯¹åº”çš„ state å’Œ props ä¹Ÿä¼šåŒæ­¥æ›´æ–°ã€‚</p><h4 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h4><p>Taro ä¼šå°†åŸå§‹æ–‡ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°è½¬æ¢ä¸º Taro çš„ç”Ÿå‘½å‘¨æœŸ<br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8833fh6svj30lo0osju6.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å‚è€ƒæ–‡ç« &lt;br&gt;&lt;a href=&quot;https://aotu.io/notes/2018/06/07/Taro/index.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ - Taro
&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Taroæ˜¯ä»€
      
    
    </summary>
    
    
    
      <category term="react" scheme="https://jacob1811.github.io/blog/tags/react/"/>
    
      <category term="Taro" scheme="https://jacob1811.github.io/blog/tags/Taro/"/>
    
  </entry>
  
  <entry>
    <title>Taroå¿«é€Ÿå¼€å§‹</title>
    <link href="https://jacob1811.github.io/blog/2019/11/27/Taro%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/"/>
    <id>https://jacob1811.github.io/blog/2019/11/27/Taroå¿«é€Ÿå¼€å§‹/</id>
    <published>2019-11-27T07:53:47.000Z</published>
    <updated>2019-11-27T07:54:07.749Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Taro"><a href="#Taro" class="headerlink" title="Taro"></a>Taro</h2><h3 id="ç¯å¢ƒè¦æ±‚"><a href="#ç¯å¢ƒè¦æ±‚" class="headerlink" title="ç¯å¢ƒè¦æ±‚"></a>ç¯å¢ƒè¦æ±‚</h3><blockquote><p>node &gt;=8.0.0</p></blockquote><h3 id="CLI-å·¥å…·å®‰è£…"><a href="#CLI-å·¥å…·å®‰è£…" class="headerlink" title="CLI å·¥å…·å®‰è£…"></a>CLI å·¥å…·å®‰è£…</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># ä½¿ç”¨ npm å®‰è£… CLI</span><br><span class="line">$ npm install -g @tarojs/cli</span><br><span class="line"># OR ä½¿ç”¨ yarn å®‰è£… CLI</span><br><span class="line">$ yarn global add @tarojs/cli</span><br><span class="line"># OR å®‰è£…äº† cnpmï¼Œä½¿ç”¨ cnpm å®‰è£… CLI</span><br><span class="line">$ cnpm install -g @tarojs/cli</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®åˆå§‹åŒ–"><a href="#é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="é¡¹ç›®åˆå§‹åŒ–"></a>é¡¹ç›®åˆå§‹åŒ–</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ taro init myApp</span><br><span class="line">cd myApp</span><br><span class="line">yarn</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># yarn</span><br><span class="line">$ yarn dev:weapp</span><br><span class="line">$ yarn build:weapp</span><br><span class="line"># npm script</span><br><span class="line">$ npm run dev:weapp</span><br><span class="line">$ npm run build:weapp</span><br><span class="line"># ä»…é™å…¨å±€å®‰è£…</span><br><span class="line">$ taro build --type weapp --watch</span><br><span class="line">$ taro build --type weapp</span><br><span class="line"># npx ç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨</span><br><span class="line">$ npx taro build --type weapp --watch</span><br><span class="line">$ npx taro build --type weapp</span><br></pre></td></tr></table></figure><h3 id="è§„èŒƒ"><a href="#è§„èŒƒ" class="headerlink" title="è§„èŒƒ"></a>è§„èŒƒ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ config                 é…ç½®ç›®å½•</span><br><span class="line">|   â”œâ”€â”€ dev.js             å¼€å‘æ—¶é…ç½®</span><br><span class="line">|   â”œâ”€â”€ index.js           é»˜è®¤é…ç½®</span><br><span class="line">|   â””â”€â”€ prod.js            æ‰“åŒ…æ—¶é…ç½®</span><br><span class="line">â”œâ”€â”€ src                    æºç ç›®å½•</span><br><span class="line">|   â”œâ”€â”€ components         å…¬å…±ç»„ä»¶ç›®å½•</span><br><span class="line">|   â”œâ”€â”€ pages              é¡µé¢æ–‡ä»¶ç›®å½•</span><br><span class="line">|   |   â”œâ”€â”€ index          index é¡µé¢ç›®å½•</span><br><span class="line">|   |   |   â”œâ”€â”€ banner     é¡µé¢ index ç§æœ‰ç»„ä»¶</span><br><span class="line">|   |   |   â”œâ”€â”€ index.js   index é¡µé¢é€»è¾‘</span><br><span class="line">|   |   |   â””â”€â”€ index.css  index é¡µé¢æ ·å¼</span><br><span class="line">|   â”œâ”€â”€ utils              å…¬å…±æ–¹æ³•åº“</span><br><span class="line">|   â”œâ”€â”€ app.css            é¡¹ç›®æ€»é€šç”¨æ ·å¼</span><br><span class="line">|   â””â”€â”€ app.js             é¡¹ç›®å…¥å£æ–‡ä»¶</span><br><span class="line">â””â”€â”€ package.json</span><br></pre></td></tr></table></figure><h4 id="æ–‡ä»¶å‘½å"><a href="#æ–‡ä»¶å‘½å" class="headerlink" title="æ–‡ä»¶å‘½å"></a>æ–‡ä»¶å‘½å</h4><blockquote><p>Taro ä¸­æ™®é€š JS/TS æ–‡ä»¶ä»¥å°å†™å­—æ¯å‘½åï¼Œå¤šä¸ªå•è¯ä»¥ä¸‹åˆ’çº¿è¿æ¥ï¼Œä¾‹å¦‚ util.jsã€util_helper.js</p></blockquote><blockquote><p>Taro ç»„ä»¶æ–‡ä»¶å‘½åéµå¾ª Pascal å‘½åæ³•ï¼Œä¾‹å¦‚ ReservationCard.jsx</p></blockquote><h4 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h4><p><a href="https://taro-docs.jd.com/taro/docs/best-practice.html" target="_blank" rel="noopener">https://taro-docs.jd.com/taro/docs/best-practice.html</a></p><h4 id="JSX-æ”¯æŒç¨‹åº¦è¯´æ˜"><a href="#JSX-æ”¯æŒç¨‹åº¦è¯´æ˜" class="headerlink" title="JSX æ”¯æŒç¨‹åº¦è¯´æ˜"></a>JSX æ”¯æŒç¨‹åº¦è¯´æ˜</h4><ol><li><p><a href="https://github.com/NervJS/taro/blob/master/packages/eslint-plugin-taro/docs/manipulate-jsx-as-array.md" target="_blank" rel="noopener">ä¸èƒ½ä½¿ç”¨ Array#map ä¹‹å¤–çš„æ–¹æ³•æ“ä½œ JSX æ•°ç»„</a></p></li><li><p><a href="https://github.com/NervJS/taro/blob/master/packages/eslint-plugin-taro/docs/no-jsx-in-class-method.md" target="_blank" rel="noopener">æš‚ä¸æ”¯æŒåœ¨ render() ä¹‹å¤–çš„æ–¹æ³•å®šä¹‰ JSX</a></p></li><li><p><a href="https://github.com/NervJS/taro/blob/master/packages/eslint-plugin-taro/docs/no-spread-in-props.md" target="_blank" rel="noopener">ä¸èƒ½åœ¨ JSX å‚æ•°ä¸­ä½¿ç”¨å¯¹è±¡å±•å¼€ç¬¦ </a></p></li><li><p><a href="https://github.com/NervJS/taro/blob/master/packages/eslint-plugin-taro/docs/no-stateless-function.md" target="_blank" rel="noopener">ä¸æ”¯æŒæ— çŠ¶æ€ç»„ä»¶</a></p></li></ol><h4 id="æœ€ä½³ç¼–ç æ–¹å¼"><a href="#æœ€ä½³ç¼–ç æ–¹å¼" class="headerlink" title="æœ€ä½³ç¼–ç æ–¹å¼"></a>æœ€ä½³ç¼–ç æ–¹å¼</h4><h4 id="ç»„ä»¶æ ·å¼è¯´æ˜"><a href="#ç»„ä»¶æ ·å¼è¯´æ˜" class="headerlink" title="ç»„ä»¶æ ·å¼è¯´æ˜"></a>ç»„ä»¶æ ·å¼è¯´æ˜</h4><h5 id="ç»™ç»„ä»¶è®¾ç½®-defaultProps"><a href="#ç»™ç»„ä»¶è®¾ç½®-defaultProps" class="headerlink" title="ç»™ç»„ä»¶è®¾ç½® defaultProps"></a>ç»™ç»„ä»¶è®¾ç½® defaultProps</h5><blockquote><p>åœ¨å¾®ä¿¡å°ç¨‹åºç«¯çš„è‡ªå®šä¹‰ç»„ä»¶ä¸­ï¼Œåªæœ‰åœ¨ properties ä¸­æŒ‡å®šçš„å±æ€§ï¼Œæ‰èƒ½ä»çˆ¶ç»„ä»¶ä¼ å…¥å¹¶æ¥æ”¶</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">  properties: &#123;</span><br><span class="line">    myProperty: &#123; // å±æ€§å</span><br><span class="line">      type: String, // ç±»å‹ï¼ˆå¿…å¡«ï¼‰ï¼Œç›®å‰æ¥å—çš„ç±»å‹åŒ…æ‹¬ï¼šString, Number, Boolean, Object, Array, nullï¼ˆè¡¨ç¤ºä»»æ„ç±»å‹ï¼‰</span><br><span class="line">      value: &apos;&apos;, // å±æ€§åˆå§‹å€¼ï¼ˆå¯é€‰ï¼‰ï¼Œå¦‚æœæœªæŒ‡å®šåˆ™ä¼šæ ¹æ®ç±»å‹é€‰æ‹©ä¸€ä¸ª</span><br><span class="line">      observer: function (newVal, oldVal, changedPath) &#123;</span><br><span class="line">         // å±æ€§è¢«æ”¹å˜æ—¶æ‰§è¡Œçš„å‡½æ•°ï¼ˆå¯é€‰ï¼‰ï¼Œä¹Ÿå¯ä»¥å†™æˆåœ¨ methods æ®µä¸­å®šä¹‰çš„æ–¹æ³•åå­—ç¬¦ä¸², å¦‚ï¼š&apos;_propertyChange&apos;</span><br><span class="line">         // é€šå¸¸ newVal å°±æ˜¯æ–°è®¾ç½®çš„æ•°æ®ï¼Œ oldVal æ˜¯æ—§æ•°æ®</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    myProperty2: String // ç®€åŒ–çš„å®šä¹‰æ–¹å¼</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="ç»„ä»¶ä¼ é€’å‡½æ•°å±æ€§åä»¥-on-å¼€å¤´"><a href="#ç»„ä»¶ä¼ é€’å‡½æ•°å±æ€§åä»¥-on-å¼€å¤´" class="headerlink" title="ç»„ä»¶ä¼ é€’å‡½æ•°å±æ€§åä»¥ on å¼€å¤´"></a>ç»„ä»¶ä¼ é€’å‡½æ•°å±æ€§åä»¥ on å¼€å¤´</h5><blockquote><p>åœ¨ v1.3.0-beta.0 ä¹‹åï¼Œè‡ªå®šä¹‰ç»„ä»¶é—´çš„äº‹ä»¶ä¼ é€’å¯ä»¥ä¸ç”¨ on å¼€å¤´ï¼Œä½†å†…ç½®ç»„ä»¶çš„äº‹ä»¶ä¾ç„¶æ˜¯ä»¥ on å¼€å¤´çš„ï¼Œä¸ºäº†ä¸€è‡´æ€§æˆ‘ä»¬ä»ç„¶æ¨èä½ ä»¥ on å¼€å¤´å‘½åä½ çš„äº‹ä»¶ã€‚</p></blockquote><p>åœ¨ Taro ä¸­ï¼Œçˆ¶ç»„ä»¶è¦å¾€å­ç»„ä»¶ä¼ é€’å‡½æ•°ï¼Œå±æ€§åå¿…é¡»ä»¥ on å¼€å¤´</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// è°ƒç”¨ Custom ç»„ä»¶ï¼Œä¼ å…¥ handleEvent å‡½æ•°ï¼Œå±æ€§åä¸º onTrigger</span><br><span class="line">class Parent extends Component &#123;</span><br><span class="line"></span><br><span class="line">  handleEvent () &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;Custom onTrigger=&#123;this.handleEvent&#125;&gt;&lt;/Custom&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºï¼Œå¾®ä¿¡å°ç¨‹åºç«¯ç»„ä»¶åŒ–æ˜¯ä¸èƒ½ç›´æ¥ä¼ é€’å‡½æ•°ç±»å‹ç»™å­ç»„ä»¶çš„ï¼Œåœ¨ Taro ä¸­æ˜¯å€ŸåŠ©ç»„ä»¶çš„äº‹ä»¶æœºåˆ¶æ¥å®ç°è¿™ä¸€ç‰¹æ€§ï¼Œè€Œå°ç¨‹åºä¸­ä¼ å…¥äº‹ä»¶çš„æ—¶å€™å±æ€§åå†™æ³•ä¸º bindmyevent æˆ–è€… bind:myevent</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å½“è‡ªå®šä¹‰ç»„ä»¶è§¦å‘ myevent äº‹ä»¶æ—¶ï¼Œè°ƒç”¨ onMyEvent æ–¹æ³• --&gt;</span><br><span class="line">&lt;component-tag-name bindmyevent=<span class="string">"onMyEvent"</span> /&gt;</span><br><span class="line">&lt;!-- æˆ–è€…å¯ä»¥å†™æˆ --&gt;</span><br><span class="line">&lt;component-tag-name bind:myevent=<span class="string">"onMyEvent"</span> /&gt;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ Taro ä¸­çº¦å®šç»„ä»¶ä¼ é€’å‡½æ•°å±æ€§åä»¥ on å¼€å¤´ï¼ŒåŒæ—¶è¿™ä¹Ÿå’Œå†…ç½®ç»„ä»¶çš„äº‹ä»¶ç»‘å®šå†™æ³•ä¿æŒä¸€è‡´äº†ã€‚</p><h5 id="å°ç¨‹åºç«¯ä¸è¦åœ¨ç»„ä»¶ä¸­æ‰“å°ä¼ å…¥çš„å‡½æ•°"><a href="#å°ç¨‹åºç«¯ä¸è¦åœ¨ç»„ä»¶ä¸­æ‰“å°ä¼ å…¥çš„å‡½æ•°" class="headerlink" title="å°ç¨‹åºç«¯ä¸è¦åœ¨ç»„ä»¶ä¸­æ‰“å°ä¼ å…¥çš„å‡½æ•°"></a>å°ç¨‹åºç«¯ä¸è¦åœ¨ç»„ä»¶ä¸­æ‰“å°ä¼ å…¥çš„å‡½æ•°</h5><blockquote><p>å‰é¢å·²ç»æåˆ°å°ç¨‹åºç«¯çš„ç»„ä»¶ä¼ å…¥å‡½æ•°çš„åŸç†ï¼Œæ‰€ä»¥åœ¨å°ç¨‹åºç«¯ä¸è¦åœ¨ç»„ä»¶ä¸­æ‰“å°ä¼ å…¥çš„å‡½æ•°ï¼Œå› ä¸ºæ‹¿ä¸åˆ°ç»“æœï¼Œä½†æ˜¯ this.props.onXxx &amp;&amp; this.props.onXxx() è¿™ç§åˆ¤æ–­å‡½æ•°æ˜¯å¦ä¼ å…¥æ¥è¿›è¡Œè°ƒç”¨çš„å†™æ³•æ˜¯å®Œå…¨æ”¯æŒçš„ã€‚</p></blockquote><h5 id="å°ç¨‹åºç«¯ä¸è¦å°†åœ¨æ¨¡æ¿ä¸­ç”¨åˆ°çš„æ•°æ®è®¾ç½®ä¸º-undefined"><a href="#å°ç¨‹åºç«¯ä¸è¦å°†åœ¨æ¨¡æ¿ä¸­ç”¨åˆ°çš„æ•°æ®è®¾ç½®ä¸º-undefined" class="headerlink" title="å°ç¨‹åºç«¯ä¸è¦å°†åœ¨æ¨¡æ¿ä¸­ç”¨åˆ°çš„æ•°æ®è®¾ç½®ä¸º undefined"></a>å°ç¨‹åºç«¯ä¸è¦å°†åœ¨æ¨¡æ¿ä¸­ç”¨åˆ°çš„æ•°æ®è®¾ç½®ä¸º undefined</h5><blockquote><p>ç”±äºå°ç¨‹åºä¸æ”¯æŒå°† data ä¸­ä»»ä½•ä¸€é¡¹çš„ value è®¾ä¸º undefined ï¼Œåœ¨ setState çš„æ—¶å€™ä¹Ÿè¯·é¿å…è¿™ä¹ˆç”¨ã€‚ä½ å¯ä»¥ä½¿ç”¨ null æ¥æ›¿ä»£ã€‚</p></blockquote><h5 id="å°ç¨‹åºç«¯ä¸è¦åœ¨ç»„ä»¶ä¸­æ‰“å°-this-props-children"><a href="#å°ç¨‹åºç«¯ä¸è¦åœ¨ç»„ä»¶ä¸­æ‰“å°-this-props-children" class="headerlink" title="å°ç¨‹åºç«¯ä¸è¦åœ¨ç»„ä»¶ä¸­æ‰“å° this.props.children"></a>å°ç¨‹åºç«¯ä¸è¦åœ¨ç»„ä»¶ä¸­æ‰“å° this.props.children</h5><blockquote><p>åœ¨å¾®ä¿¡å°ç¨‹åºç«¯æ˜¯é€šè¿‡ <slot /> æ¥å®ç°å¾€è‡ªå®šä¹‰ç»„ä»¶ä¸­ä¼ å…¥å…ƒç´ çš„ï¼Œè€Œ Taro åˆ©ç”¨ this.props.children åœ¨ç¼–è¯‘æ—¶å®ç°äº†è¿™ä¸€åŠŸèƒ½ï¼Œ this.props.children ä¼šç›´æ¥è¢«ç¼–è¯‘æˆ <slot /> æ ‡ç­¾ï¼Œæ‰€ä»¥å®ƒåœ¨å°ç¨‹åºç«¯å±äºè¯­æ³•ç³–çš„å­˜åœ¨ï¼Œè¯·ä¸è¦åœ¨ç»„ä»¶ä¸­æ‰“å°å®ƒã€‚</p></blockquote><blockquote><p>æ”¯æŒ props ä¼ å…¥ JSX<br>æ”¯æŒ props ä¼ å…¥ JSXï¼Œä½†æ˜¯å…ƒç´ ä¼ å…¥ JSX çš„å±æ€§åå¿…é¡»ä»¥ render å¼€å¤´</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­ç»„ä»¶</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dialog</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View className=<span class="string">'dialog'</span>&gt;</span><br><span class="line">        &lt;View className=<span class="string">'header'</span>&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.props.renderHeader&#125;</span><br><span class="line">        &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">        &lt;View className='body'&gt;</span></span><br><span class="line"><span class="regexp">          &#123;this.props.children&#125;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>View&gt;</span><br><span class="line">        &lt;View className=<span class="string">'footer'</span>&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.props.renderFooter&#125;</span><br><span class="line">        &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>View&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//çˆ¶ç»„ä»¶</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View className=<span class="string">'container'</span>&gt;</span><br><span class="line">        &lt;Dialog</span><br><span class="line">          renderHeader=&#123;</span><br><span class="line">            &lt;View className=<span class="string">'welcome-message'</span>&gt;Welcome!<span class="xml"><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">          &#125;</span><br><span class="line">          renderFooter=&#123;</span><br><span class="line">            &lt;Button className=<span class="string">'close'</span>&gt;Close&lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">          &#125;</span></span><br><span class="line"><span class="regexp">        &gt;</span></span><br><span class="line"><span class="regexp">          &lt;View className="dialog-message"&gt;</span></span><br><span class="line"><span class="regexp">            Thank you for using Taro.</span></span><br><span class="line"><span class="regexp">          &lt;/</span>View&gt;</span><br><span class="line">        &lt;<span class="regexp">/Dialog&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>View&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä¸è¦ä»¥ idã€classã€style ä½œä¸ºè‡ªå®šä¹‰ç»„ä»¶çš„å±æ€§ä¸å†…éƒ¨ state çš„åç§°ï¼Œå› ä¸ºè¿™äº›å±æ€§ååœ¨å¾®ä¿¡å°ç¨‹åºå°ç¨‹åºä¸­ä¼šä¸¢å¤±ã€‚</p></blockquote><blockquote><p>ä¸è¦åœ¨ state ä¸ props ä¸Šç”¨åŒåçš„å­—æ®µï¼Œå› ä¸ºè¿™äº›å­—æ®µåœ¨å¾®ä¿¡å°ç¨‹åºä¸­éƒ½ä¼šæŒ‚åœ¨ data ä¸Šã€‚</p></blockquote><p>å°ç¨‹åºä¸­é¡µé¢ç”Ÿå‘½å‘¨æœŸ componentWillMount ä¸ä¸€è‡´é—®é¢˜</p><blockquote><p>ç”±äºå¾®ä¿¡å°ç¨‹åºé‡Œé¡µé¢åœ¨ onLoad æ—¶æ‰èƒ½æ‹¿åˆ°é¡µé¢çš„è·¯ç”±å‚æ•°ï¼Œè€Œé¡µé¢ onLoad å‰ç»„ä»¶éƒ½å·²ç» attached äº†ã€‚å› æ­¤é¡µé¢çš„ componentWillMount å¯èƒ½ä¼šä¸é¢„æœŸä¸å¤ªä¸€è‡´</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯å†™æ³•</span></span><br><span class="line">render () &#123;</span><br><span class="line">  <span class="comment">// åœ¨ willMount ä¹‹å‰æ— æ³•æ‹¿åˆ°è·¯ç”±å‚æ•°</span></span><br><span class="line">  <span class="keyword">const</span> abc = <span class="keyword">this</span>.$router.params.abc</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Custom</span> <span class="attr">adc</span>=<span class="string">&#123;abc&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">// æ­£ç¡®å†™æ³•</span></span><br><span class="line"><span class="xml">componentWillMount () &#123;</span></span><br><span class="line"><span class="xml">  const abc = this.$router.params.abc</span></span><br><span class="line"><span class="xml">  this.setState(&#123;</span></span><br><span class="line"><span class="xml">    abc</span></span><br><span class="line"><span class="xml">  &#125;)</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">render () &#123;</span></span><br><span class="line"><span class="xml">  // å¢åŠ ä¸€ä¸ªå…¼å®¹åˆ¤æ–­</span></span><br><span class="line">  return this.state.abc &amp;&amp; &lt;Custom adc=&#123;abc&#125; /&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»„ä»¶çš„ constructor ä¸ render æå‰è°ƒç”¨</p><blockquote><p>å¾ˆå¤šç»†å¿ƒçš„å¼€å‘è€…åº”è¯¥å·²ç»æ³¨æ„åˆ°äº†ï¼Œåœ¨ Taro ç¼–è¯‘åˆ°å°ç¨‹åºç«¯åï¼Œç»„ä»¶çš„ constructor ä¸ render é»˜è®¤ä¼šå¤šè°ƒç”¨ä¸€æ¬¡ï¼Œè¡¨ç°å¾—ä¸ React ä¸å¤ªä¸€è‡´ã€‚</p></blockquote><blockquote><p>è¿™æ˜¯å› ä¸ºï¼ŒTaro çš„ç»„ä»¶ç¼–è¯‘åå°±æ˜¯å°ç¨‹åºçš„è‡ªå®šä¹‰ç»„ä»¶ï¼Œè€Œå°ç¨‹åºçš„è‡ªå®šä¹‰ç»„ä»¶çš„åˆå§‹åŒ–æ—¶æ˜¯å¯ä»¥æŒ‡å®š data æ¥è®©ç»„ä»¶æ‹¥æœ‰åˆå§‹åŒ–æ•°æ®çš„ã€‚å¼€å‘è€…ä¸€èˆ¬ä¼šåœ¨ç»„ä»¶çš„ constructor ä¸­è®¾ç½®ä¸€äº›åˆå§‹åŒ–çš„ stateï¼ŒåŒæ—¶ä¹Ÿå¯èƒ½ä¼šåœ¨ render ä¸­å¤„ç† state ä¸ props äº§ç”Ÿæ–°çš„æ•°æ®ï¼Œåœ¨ Taro ä¸­å¤šå‡ºçš„è¿™ä¸€æ¬¡æå‰è°ƒç”¨ï¼Œå°±æ˜¯ä¸ºäº†æ”¶é›†ç»„ä»¶çš„åˆå§‹åŒ–æ•°æ®ï¼Œç»™è‡ªå®šä¹‰ç»„ä»¶æå‰ç”Ÿæˆ data ï¼Œä»¥ä¿è¯ç»„ä»¶åˆå§‹åŒ–æ—¶èƒ½å¸¦æœ‰æ•°æ®ï¼Œè®©ç»„ä»¶åˆæ¬¡æ¸²æŸ“æ­£å¸¸ã€‚</p></blockquote><blockquote><p>æ‰€ä»¥ï¼Œåœ¨ç¼–ç æ—¶ï¼Œéœ€è¦åœ¨å¤„ç†æ•°æ®çš„æ—¶å€™åšä¸€äº›å®¹é”™å¤„ç†ï¼Œè¿™æ ·å¯ä»¥é¿å…åœ¨ constructor ä¸ render æå‰è°ƒç”¨æ—¶å‡ºç°ç”±äºæ²¡æœ‰æ•°æ®å¯¼è‡´å‡ºé”™çš„æƒ…å†µã€‚</p></blockquote><blockquote><p>åœ¨ Taro ä¸­ï¼ŒJS ä»£ç é‡Œå¿…é¡»ä¹¦å†™å•å¼•å·ï¼Œç‰¹åˆ«æ˜¯ JSX ä¸­ï¼Œå¦‚æœå‡ºç°åŒå¼•å·ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚</p></blockquote><blockquote><p>ä¸è¦ä»¥è§£æ„çš„æ–¹å¼æ¥è·å–é€šè¿‡ env é…ç½®çš„ process.env ç¯å¢ƒå˜é‡ï¼Œè¯·ç›´æ¥ä»¥å®Œæ•´ä¹¦å†™çš„æ–¹å¼ process.env.NODE_ENV æ¥è¿›è¡Œä½¿ç”¨</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// é”™è¯¯å†™æ³•ï¼Œä¸æ”¯æŒ</span><br><span class="line">const &#123; NODE_ENV = &apos;development&apos; &#125; = process.env</span><br><span class="line">if (NODE_ENV === &apos;development&apos;) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ­£ç¡®å†™æ³•</span><br><span class="line">if (process.env.NODE_ENV === &apos;development&apos;) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>this.$componentType å¯èƒ½å–å€¼åˆ†åˆ«ä¸º PAGE å’Œ COMPONENTï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®æ­¤å˜é‡çš„å–å€¼åˆ†åˆ«é‡‡å–ä¸åŒé€»è¾‘ã€‚</p></blockquote><blockquote><p>åŸç”Ÿå°ç¨‹åºç»„ä»¶ä¼ é€’ props ç»™ Taro ç»„ä»¶</p></blockquote><p>Taro v1.3+ å¯¹ props ç³»ç»Ÿè¿›è¡Œäº†æ”¹é€ ï¼Œä½¿å¾—ä¸èƒ½å…¼å®¹åŸç”Ÿç»„ä»¶é€šè¿‡ properties ä¼ å…¥çš„å±æ€§ã€‚</p><p>ç›®å‰å¯ä»¥é€šè¿‡æŠŠæ‰€æœ‰éœ€è¦ä¼ å…¥ Taro ç»„ä»¶çš„ propsï¼Œé€šè¿‡å€ŸåŠ© extraProps å±æ€§æ¥è§£å†³ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// å°ç¨‹åºç»„ä»¶å¸¸è§„ props ä¼ é€’</span><br><span class="line">&lt;plugin title=&quot;&#123;&#123;name&#125;&#125;&quot; desc=&quot;&#123;&#123;desc&#125;&#125;&quot; bindonclick=&quot;onClick&quot;&gt;&lt;/plugin&gt;</span><br><span class="line"></span><br><span class="line">// åŸç”Ÿå°ç¨‹åºç»„ä»¶è°ƒç”¨ Taro ç»„ä»¶æ—¶éœ€è¦æ”¹é€ æˆä»¥ä¸‹å½¢å¼ï¼š</span><br><span class="line">this.setData(&#123;</span><br><span class="line">  extraProps: &#123;</span><br><span class="line">    name,</span><br><span class="line">    desc,</span><br><span class="line">    onClick: this.onClick</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;plugin extraProps=&quot;&#123;&#123;extraProps&#125;&#125;&quot; &gt;&lt;/plugin&gt;</span><br></pre></td></tr></table></figure><h2 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h2><blockquote><p>æ–°å¢ä¸€ä¸ªè‡ªè¡Œå‘½åçš„ JS æ–‡ä»¶ï¼Œä¾‹å¦‚ global_data.jsï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const globalData = &#123;&#125;</span><br><span class="line"></span><br><span class="line">export function set (key, val) &#123;</span><br><span class="line">  globalData[key] = val</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export function get (key) &#123;</span><br><span class="line">  return globalData[key]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>éšåå°±å¯ä»¥åœ¨ä»»æ„ä½ç½®è¿›è¡Œä½¿ç”¨å•¦</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#123; set as setGlobalData, get as getGlobalData &#125; from &apos;./path/name/global_data&apos;</span><br><span class="line"></span><br><span class="line">setGlobalData(&apos;test&apos;, 1)</span><br><span class="line"></span><br><span class="line">getGlobalData(&apos;test&apos;)</span><br></pre></td></tr></table></figure><h2 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h2><p>taroçš„è·¯ç”±æ˜¯è‡ªå¸¦çš„ï¼Œä¸éœ€è¦æˆ‘ä»¬é¢å¤–é…ç½®ï¼Œåªéœ€è¦æˆ‘ä»¬åœ¨app.jsä¸‹configä¸­é…ç½®pageså³å¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class App extends Component &#123;</span><br><span class="line">    config = &#123;</span><br><span class="line">        pages: [</span><br><span class="line">            &apos;pages/test/test&apos;,</span><br><span class="line">            &apos;pages/index/index&apos;</span><br><span class="line">        ],</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è°ƒç”¨   æ­¤å¤„æ³¨æ„éœ€è¦æ·»åŠ  â€˜/â€™</span><br><span class="line">Taro.navigateTo(&#123;</span><br><span class="line">  url:&apos;/pages/test/test&apos;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="ç»„ä»¶çš„å¤–éƒ¨æ ·å¼å’Œå…¨å±€æ ·å¼"><a href="#ç»„ä»¶çš„å¤–éƒ¨æ ·å¼å’Œå…¨å±€æ ·å¼" class="headerlink" title="ç»„ä»¶çš„å¤–éƒ¨æ ·å¼å’Œå…¨å±€æ ·å¼"></a>ç»„ä»¶çš„å¤–éƒ¨æ ·å¼å’Œå…¨å±€æ ·å¼</h3><p>è‡ªå®šä¹‰ç»„ä»¶å¯¹åº”çš„æ ·å¼æ–‡ä»¶ï¼Œåªå¯¹è¯¥ç»„ä»¶å†…çš„èŠ‚ç‚¹ç”Ÿæ•ˆã€‚ç¼–å†™ç»„ä»¶æ ·å¼æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>ç»„ä»¶å’Œå¼•ç”¨ç»„ä»¶çš„é¡µé¢ä¸èƒ½ä½¿ç”¨ id é€‰æ‹©å™¨ï¼ˆ#aï¼‰ã€å±æ€§é€‰æ‹©å™¨ï¼ˆ[a]ï¼‰å’Œæ ‡ç­¾åé€‰æ‹©å™¨ï¼Œè¯·æ”¹ç”¨ class é€‰æ‹©å™¨ã€‚</li><li>ç»„ä»¶å’Œå¼•ç”¨ç»„ä»¶çš„é¡µé¢ä¸­ä½¿ç”¨åä»£é€‰æ‹©å™¨ï¼ˆ.a .bï¼‰åœ¨ä¸€äº›æç«¯æƒ…å†µä¸‹ä¼šæœ‰éé¢„æœŸçš„è¡¨ç°ï¼Œå¦‚é‡ï¼Œè¯·é¿å…ä½¿ç”¨ã€‚</li><li>å­å…ƒç´ é€‰æ‹©å™¨ï¼ˆ.a &gt; .bï¼‰åªèƒ½ç”¨äº View ç»„ä»¶ä¸å…¶å­èŠ‚ç‚¹ä¹‹é—´ï¼Œç”¨äºå…¶ä»–ç»„ä»¶å¯èƒ½å¯¼è‡´éé¢„æœŸçš„æƒ…å†µã€‚</li><li>ç»§æ‰¿æ ·å¼ï¼Œå¦‚ font ã€ color ï¼Œä¼šä»ç»„ä»¶å¤–ï¼ˆçˆ¶ç»„ä»¶ï¼‰ç»§æ‰¿åˆ°ç»„ä»¶å†…ã€‚ä½†æ˜¯å¼•ç”¨ç»„ä»¶æ—¶åœ¨ç»„ä»¶èŠ‚ç‚¹ä¸Šä¹¦å†™çš„ className æ— æ•ˆã€‚ ï¼ˆå…·ä½“è§£å†³æ–¹æ¡ˆè¯·å‚è§ä¸‹é¢çš„å¤–éƒ¨å’Œå…¨å±€æ ·å¼ä»‹ç»ã€‚ï¼‰</li><li>é™¤ç»§æ‰¿æ ·å¼å¤–ï¼Œ app.scss ä¸­çš„æ ·å¼ã€ç»„ä»¶æ‰€åœ¨é¡µé¢çš„æ ·å¼ï¼Œå‡å¯¹è‡ªå®šä¹‰ç»„ä»¶æ— æ•ˆã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#a &#123; &#125; /* åœ¨ç»„ä»¶ä¸­ä¸èƒ½ä½¿ç”¨ */</span><br><span class="line">[a] &#123; &#125; <span class="comment">/* åœ¨ç»„ä»¶ä¸­ä¸èƒ½ä½¿ç”¨ */</span></span><br><span class="line">button &#123; &#125; <span class="comment">/* åœ¨ç»„ä»¶ä¸­ä¸èƒ½ä½¿ç”¨ */</span></span><br><span class="line">.a &gt; .b &#123; &#125; <span class="comment">/* é™¤é .a æ˜¯ view ç»„ä»¶èŠ‚ç‚¹ï¼Œå¦åˆ™ä¸ä¸€å®šä¼šç”Ÿæ•ˆ */</span></span><br></pre></td></tr></table></figure>é™¤æ­¤ä»¥å¤–ï¼Œç»„ä»¶å¯ä»¥æŒ‡å®šå®ƒæ‰€åœ¨èŠ‚ç‚¹çš„é»˜è®¤æ ·å¼ï¼Œä½¿ç”¨ :host é€‰æ‹©å™¨ï¼ˆéœ€è¦åŒ…å«åŸºç¡€åº“ 1.7.2 æˆ–æ›´é«˜ç‰ˆæœ¬çš„å¼€å‘è€…å·¥å…·æ”¯æŒï¼‰ã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/* è¯¥è‡ªå®šä¹‰ç»„ä»¶çš„é»˜è®¤æ ·å¼ */</span><br><span class="line">:host &#123;</span><br><span class="line">  color: yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤–éƒ¨æ ·å¼ç±»"><a href="#å¤–éƒ¨æ ·å¼ç±»" class="headerlink" title="å¤–éƒ¨æ ·å¼ç±»"></a>å¤–éƒ¨æ ·å¼ç±»</h3><p>å¦‚æœæƒ³ä¼ é€’æ ·å¼ç»™å¼•ç”¨çš„è‡ªå®šä¹‰ç»„ä»¶ï¼Œä»¥ä¸‹å†™æ³•ï¼ˆç›´æ¥ä¼ é€’ classNameï¼‰ä¸å¯è¡Œï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* CustomComp.js */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomComp</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">    className: <span class="string">''</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">className</span>=<span class="string">&#123;this.props.className&#125;</span>&gt;</span>è¿™æ®µæ–‡æœ¬çš„é¢œè‰²ä¸ä¼šç”±ç»„ä»¶å¤–çš„ class å†³å®š<span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* MyPage.js */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPage</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">CustomComp</span> <span class="attr">className</span>=<span class="string">"red-text"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">/* MyPage.scss */</span></span><br><span class="line"><span class="xml">.red-text &#123;</span></span><br><span class="line"><span class="xml">  color: red;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure><p>å–è€Œä»£ä¹‹çš„ï¼Œéœ€è¦åˆ©ç”¨ externalClasses å®šä¹‰æ®µå®šä¹‰è‹¥å¹²ä¸ªå¤–éƒ¨æ ·å¼ç±»ã€‚è¿™ä¸ªç‰¹æ€§ä»å°ç¨‹åºåŸºç¡€åº“ç‰ˆæœ¬ 1.9.90 å¼€å§‹æ”¯æŒã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* CustomComp.js */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomComp</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> externalClasses = [<span class="string">'my-class'</span>]</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">className</span>=<span class="string">"my-class"</span>&gt;</span>è¿™æ®µæ–‡æœ¬çš„é¢œè‰²ç”±ç»„ä»¶å¤–çš„ class å†³å®š<span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* MyPage.js */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPage</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">CustomComp</span> <span class="attr">my-class</span>=<span class="string">"red-text"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">/* MyPage.scss */</span></span><br><span class="line"><span class="xml">.red-text &#123;</span></span><br><span class="line"><span class="xml">  color: red;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šexternalClasses éœ€è¦ä½¿ç”¨ çŸ­æ¨ªçº¿å‘½åæ³• (kebab-case)ï¼Œè€Œä¸æ˜¯ React æƒ¯ç”¨çš„ é©¼å³°å‘½åæ³• (camelCase)ã€‚å¦åˆ™æ— æ•ˆã€‚</p></blockquote><h3 id="å…¨å±€æ ·å¼ç±»"><a href="#å…¨å±€æ ·å¼ç±»" class="headerlink" title="å…¨å±€æ ·å¼ç±»"></a>å…¨å±€æ ·å¼ç±»</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* CustomComp.js */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomComp</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> options = &#123;</span><br><span class="line">    addGlobalClass: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">className</span>=<span class="string">"red-text"</span>&gt;</span>è¿™æ®µæ–‡æœ¬çš„é¢œè‰²ç”±ç»„ä»¶å¤–çš„ class å†³å®š<span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç»„ä»¶å¤–çš„æ ·å¼å®šä¹‰ */</span></span><br><span class="line">.red-text &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Jsx"><a href="#Jsx" class="headerlink" title="Jsx"></a>Jsx</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import Taro, &#123; Component &#125; from &apos;@tarojs/taro&apos;</span><br><span class="line">import &#123; View &#125; from &apos;@tarojs/components&apos;</span><br><span class="line"></span><br><span class="line">class Home extends Component &#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;View&gt;Hello World!&lt;/View&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¿…é¡»å£°æ˜ Taro å’Œç»„ä»¶<br>é¦–å­—æ¯å¤§å†™ä¸é©¼å³°å¼å‘½å<br>React å¯ä»¥ä½¿ç”¨ â€¦ æ‹“å±•æ“ä½œç¬¦æ¥ä¼ é€’å±æ€§ï¼Œä½†åœ¨ Taro ä¸­ä½ ä¸èƒ½è¿™ä¹ˆåšã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> props = &#123;<span class="attr">firstName</span>: <span class="string">'Plus'</span>, <span class="attr">lastName</span>: <span class="string">'Second'</span>&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Greeting</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span></span><br><span class="line"><span class="xml">//è¿™æ ·çš„æ“ä½œä¼šæŠ¥é”™ã€‚ä½ åªèƒ½æ‰‹åŠ¨åœ°æŠŠæ‰€æœ‰éœ€è¦å¼•ç”¨çš„ props å†™ä¸Šå»ï¼š</span></span><br><span class="line"> &lt;Greeting firstName="Plus" lastName="Second" /&gt;</span><br></pre></td></tr></table></figure><h3 id="å¸ƒå°”å€¼ã€Null-å’Œ-Undefined-è¢«å¿½ç•¥"><a href="#å¸ƒå°”å€¼ã€Null-å’Œ-Undefined-è¢«å¿½ç•¥" class="headerlink" title="å¸ƒå°”å€¼ã€Null å’Œ Undefined è¢«å¿½ç•¥"></a>å¸ƒå°”å€¼ã€Null å’Œ Undefined è¢«å¿½ç•¥</h3><blockquote><p>falseã€nullã€undefined å’Œ true éƒ½æ˜¯æœ‰æ•ˆçš„ childrenï¼Œä½†å®ƒä»¬ä¸ä¼šç›´æ¥è¢«æ¸²æŸ“ã€‚ä¸‹é¢çš„è¡¨è¾¾å¼æ˜¯ç­‰ä»·çš„ï¼š</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;View /&gt;</span><br><span class="line"></span><br><span class="line">&lt;View&gt;<span class="xml"><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;View&gt;&#123;<span class="literal">false</span>&#125;&lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;View&gt;&#123;null&#125;&lt;/</span>View&gt;</span><br><span class="line"></span><br><span class="line">&lt;View&gt;&#123;<span class="literal">undefined</span>&#125;&lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;View&gt;&#123;true&#125;&lt;/</span>View&gt;</span><br></pre></td></tr></table></figure><h3 id="Taro-å’Œ-React-ä¸€æ ·ï¼Œä¹Ÿæœ‰ä¸€ä¸ªä¸¥æ ¼çš„è§„åˆ™ï¼š"><a href="#Taro-å’Œ-React-ä¸€æ ·ï¼Œä¹Ÿæœ‰ä¸€ä¸ªä¸¥æ ¼çš„è§„åˆ™ï¼š" class="headerlink" title="Taro å’Œ React ä¸€æ ·ï¼Œä¹Ÿæœ‰ä¸€ä¸ªä¸¥æ ¼çš„è§„åˆ™ï¼š"></a>Taro å’Œ React ä¸€æ ·ï¼Œä¹Ÿæœ‰ä¸€ä¸ªä¸¥æ ¼çš„è§„åˆ™ï¼š</h3><blockquote><p>æ‰€æœ‰çš„ Taro ç»„ä»¶å¿…é¡»åƒçº¯å‡½æ•°é‚£æ ·ä½¿ç”¨å®ƒä»¬çš„ propsã€‚</p></blockquote><h4 id="ä½¿ç”¨-PropTypes-æ£€æŸ¥ç±»å‹"><a href="#ä½¿ç”¨-PropTypes-æ£€æŸ¥ç±»å‹" class="headerlink" title="ä½¿ç”¨ PropTypes æ£€æŸ¥ç±»å‹"></a>ä½¿ç”¨ PropTypes æ£€æŸ¥ç±»å‹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Greeting</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;h1&gt;Hello, &#123;<span class="keyword">this</span>.props.name&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">Greeting.propTypes = &#123;</span></span><br><span class="line"><span class="regexp">  name: PropTypes.string</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ å¦‚ä¸Šä¾‹ï¼ŒTaro ä¸ React ä¸€æ ·ï¼Œä¹Ÿæ”¯æŒ PropTypes æ£€æŸ¥ç±»å‹ï¼Œç›®å‰åœ¨å°ç¨‹åºç«¯è¿˜æœ‰äº›é—®é¢˜ï¼Œä½†åœ¨ H5 ç«¯å¯ä»¥ä½¿ç”¨ï¼Œç”¨æ³•å’Œåœ¨ React é‡Œä¸€æ ·ã€‚ æ›´å¤šå¯å‚ç…§ React çš„ç›¸å…³æ–‡æ¡£ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="ç”Ÿå‘½å‘¨æœŸ-amp-State"><a href="#ç”Ÿå‘½å‘¨æœŸ-amp-State" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ &amp; State"></a>ç”Ÿå‘½å‘¨æœŸ &amp; State</h3><h4 id="çŠ¶æ€æ›´æ–°ä¸€å®šæ˜¯å¼‚æ­¥çš„"><a href="#çŠ¶æ€æ›´æ–°ä¸€å®šæ˜¯å¼‚æ­¥çš„" class="headerlink" title="çŠ¶æ€æ›´æ–°ä¸€å®šæ˜¯å¼‚æ­¥çš„"></a>çŠ¶æ€æ›´æ–°ä¸€å®šæ˜¯å¼‚æ­¥çš„</h4><p>Taro å¯ä»¥å°†å¤šä¸ª setState() è°ƒç”¨åˆå¹¶æˆä¸€ä¸ªè°ƒç”¨æ¥æé«˜æ€§èƒ½ã€‚</p><p>å› ä¸º this.state å’Œ props ä¸€å®šæ˜¯å¼‚æ­¥æ›´æ–°çš„ï¼Œæ‰€ä»¥ä½ ä¸èƒ½åœ¨ setState é©¬ä¸Šæ‹¿åˆ° state çš„å€¼ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬ä¹‹å‰è®¾ç½®äº† this.state.counter = 0</span></span><br><span class="line">updateCounter () &#123;</span><br><span class="line">  <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    counter: <span class="number">1</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.counter) <span class="comment">// è¿™é‡Œ counter è¿˜æ˜¯ 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­£ç¡®çš„åšæ³•æ˜¯è¿™æ ·ï¼Œåœ¨ setState çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ª callbackï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// å‡è®¾æˆ‘ä»¬ä¹‹å‰è®¾ç½®äº† this.state.counter = 0</span><br><span class="line">updateCounter () &#123;</span><br><span class="line">  this.setState(&#123;</span><br><span class="line">    counter: 1</span><br><span class="line">  &#125;, () =&gt; &#123;</span><br><span class="line">    // åœ¨è¿™ä¸ªå‡½æ•°å†…ä½ å¯ä»¥æ‹¿åˆ° setState ä¹‹åçš„å€¼</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äº‹ä»¶å¤„ç†"><a href="#äº‹ä»¶å¤„ç†" class="headerlink" title="äº‹ä»¶å¤„ç†"></a>äº‹ä»¶å¤„ç†</h3><p>Taro äº‹ä»¶ç»‘å®šå±æ€§çš„å‘½åé‡‡ç”¨é©¼å³°å¼å†™æ³•ï¼Œè€Œä¸æ˜¯å°å†™ã€‚ å¦‚æœé‡‡ç”¨ JSX çš„è¯­æ³•ä½ éœ€è¦ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² (DOM å…ƒç´ çš„å†™æ³•)ã€‚ ä¾‹å¦‚ï¼Œä¼ ç»Ÿçš„å¾®ä¿¡å°ç¨‹åºæ¨¡æ¿ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onclick=<span class="string">"activateLasers"</span>&gt;</span><br><span class="line">  Activate Lasers</span><br><span class="line">&lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure><p>Taro ä¸­ç¨ç¨æœ‰ç‚¹ä¸åŒï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="keyword">this</span>.activateLasers&#125;&gt;</span><br><span class="line">  Activate Lasers</span><br><span class="line">&lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ Taro ä¸­å¦ä¸€ä¸ªä¸åŒæ˜¯ä½ ä¸èƒ½ä½¿ç”¨ catchEvent çš„æ–¹å¼é˜»æ­¢äº‹ä»¶å†’æ³¡ã€‚ä½ å¿…é¡»æ˜ç¡®çš„ä½¿ç”¨ stopPropagation</p><h4 id="å‘äº‹ä»¶å¤„ç†ç¨‹åºä¼ é€’å‚æ•°"><a href="#å‘äº‹ä»¶å¤„ç†ç¨‹åºä¼ é€’å‚æ•°" class="headerlink" title="å‘äº‹ä»¶å¤„ç†ç¨‹åºä¼ é€’å‚æ•°"></a>å‘äº‹ä»¶å¤„ç†ç¨‹åºä¼ é€’å‚æ•°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="keyword">this</span>.deleteRow.bind(<span class="keyword">this</span>, id)&#125;&gt;Delete Row&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ å½“ä½ é€šè¿‡ bind æ–¹å¼å‘ç›‘å¬å‡½æ•°ä¼ å‚ï¼Œåœ¨ç±»ç»„ä»¶ä¸­å®šä¹‰çš„ç›‘å¬å‡½æ•°ï¼Œäº‹ä»¶å¯¹è±¡ e è¦æ’åœ¨æ‰€ä¼ é€’å‚æ•°çš„åé¢ã€‚</span></span><br><span class="line"><span class="regexp">class Popper extends Component &#123;</span></span><br><span class="line"><span class="regexp">  constructor () &#123;</span></span><br><span class="line"><span class="regexp">    super(...arguments)</span></span><br><span class="line"><span class="regexp">    this.state = &#123; name:'Hello world!' &#125;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ ä½ å¯ä»¥é€šè¿‡ bind ä¼ å…¥å¤šä¸ªå‚æ•°</span></span><br><span class="line"><span class="regexp">  preventPop (name, test, e) &#123;    /</span><span class="regexp">/äº‹ä»¶å¯¹è±¡ e è¦æ”¾åœ¨æœ€å</span></span><br><span class="line"><span class="regexp">    e.stopPropagation()</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  render () &#123;</span></span><br><span class="line"><span class="regexp">    return &lt;Button </span></span><br><span class="line"><span class="regexp">    onClick=&#123;this.preventPop.bind(this, this.state.name, 'test')&#125;&gt;&lt;/</span>Button&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨åŒ¿åå‡½æ•°"><a href="#ä½¿ç”¨åŒ¿åå‡½æ•°" class="headerlink" title="ä½¿ç”¨åŒ¿åå‡½æ•°"></a>ä½¿ç”¨åŒ¿åå‡½æ•°</h4><blockquote><p>æ³¨æ„ï¼šåœ¨å„å°ç¨‹åºç«¯ï¼Œä½¿ç”¨åŒ¿åå‡½æ•°ï¼Œå°¤å…¶æ˜¯åœ¨ å¾ªç¯ä¸­ ä½¿ç”¨åŒ¿åå‡½æ•°ï¼Œæ¯”ä½¿ç”¨ bind è¿›è¡Œäº‹ä»¶ä¼ å‚å ç”¨æ›´å¤§çš„å†…å­˜ï¼Œé€Ÿåº¦ä¹Ÿä¼šæ›´æ…¢ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Popper</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">    <span class="keyword">super</span>(...arguments)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123; <span class="attr">name</span>: <span class="string">'Hello world!'</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">const</span> name = <span class="string">'test'</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Button onClick=&#123;(e) =&gt; &#123;</span><br><span class="line">        e.stopPropagation()</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">          name</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;&#125;&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.state.name&#125;</span><br><span class="line">      &lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="æŸ¯é‡ŒåŒ–ä¼ å‚"><a href="#æŸ¯é‡ŒåŒ–ä¼ å‚" class="headerlink" title="æŸ¯é‡ŒåŒ–ä¼ å‚"></a>æŸ¯é‡ŒåŒ–ä¼ å‚</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Title</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  handleClick = <span class="function">(<span class="params">index</span>) =&gt;</span> <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.stopPropagation()</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      currentIndex: index</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; currentIndex &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &#123;<span class="comment">/* è°ƒç”¨ `this.handleClick(currentIndex)` ä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥è®¿é—®åˆ° `currentIndex` åŒæ—¶ä¹Ÿèƒ½æ»¡è¶³ `onClick` çš„ç­¾å */</span>&#125;</span><br><span class="line">      &lt;View onClick=&#123;<span class="keyword">this</span>.handleClick(currentIndex)&#125;&gt;</span><br><span class="line">      &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"> &#125;</span></span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°å¼ç»„ä»¶"><a href="#å‡½æ•°å¼ç»„ä»¶" class="headerlink" title="å‡½æ•°å¼ç»„ä»¶"></a>å‡½æ•°å¼ç»„ä»¶</h4><p>åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ï¼Œäº‹ä»¶ä¼ å‚å¯ä»¥ä¼ å…¥äº‹ä»¶çš„å¼•ç”¨ä¹Ÿå¯ä»¥ä¼ å…¥åŒ¿åå‡½æ•°ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [c1, setC1] = useState(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> [c2, setC2] = useState(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> [c3, setC3] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> increment = <span class="function"><span class="params">c</span> =&gt;</span> c + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// åªæœ‰ useCallback å¯¹åº”çš„ c1 æˆ– c2 çš„å€¼æ”¹å˜æ—¶ï¼Œæ‰ä¼šè¿”å›æ–°çš„å‡½æ•°</span></span><br><span class="line">  <span class="keyword">const</span> increment1 = useCallback(<span class="function"><span class="params">()</span> =&gt;</span> setC1(increment), [c1]);</span><br><span class="line">  <span class="keyword">const</span> increment2 = useCallback(<span class="function"><span class="params">()</span> =&gt;</span> setC2(increment), [c2]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Text</span>&gt;</span> Counter 1 is &#123;c1&#125; <span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Text</span>&gt;</span> Counter 2 is &#123;c2&#125; <span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Text</span>&gt;</span> Counter 3 is &#123;c3&#125; <span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line">    &lt;View&gt;</span><br><span class="line">      &lt;Button onClick=&#123;increment1&#125;&gt;Increment Counter 1&lt;/Button&gt;</span><br><span class="line">      &lt;Button onClick=&#123;increment2&#125;&gt;Increment Counter 2&lt;/Button&gt;</span><br><span class="line">      &lt;Button onClick=&#123;() =&gt; setC3(increment)&#125;&gt;Increment Counter 3&lt;/Button&gt;</span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä»»ä½•ç»„ä»¶çš„äº‹ä»¶ä¼ é€’éƒ½è¦ä»¥-on-å¼€å¤´"><a href="#ä»»ä½•ç»„ä»¶çš„äº‹ä»¶ä¼ é€’éƒ½è¦ä»¥-on-å¼€å¤´" class="headerlink" title="ä»»ä½•ç»„ä»¶çš„äº‹ä»¶ä¼ é€’éƒ½è¦ä»¥ on å¼€å¤´"></a>ä»»ä½•ç»„ä»¶çš„äº‹ä»¶ä¼ é€’éƒ½è¦ä»¥ on å¼€å¤´</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œå¯èƒ½ä½ ä¼šçœ‹åˆ°åƒ bindTap è¿™æ ·çš„ç”¨æ³•ï¼Œä½†åœ¨ Taro ä¸­ï¼Œäº‹ä»¶å‚æ•°(props)éƒ½ä»¥ on å¼€å¤´:</span></span><br><span class="line"><span class="comment">// é”™è¯¯ </span></span><br><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">bindtap</span>=<span class="string">&#123;this.onTag&#125;</span> /&gt;</span></span></span><br><span class="line">const element2 = &lt;Input bindfocus=&#123;this.onFocus&#125; /&gt;</span><br><span class="line">const element3 = &lt;CustomElement animationEnd=&#123;this.props.onAnimationEnd&#125; /&gt;</span><br><span class="line"></span><br><span class="line">// åªè¦å½“ JSX ç»„ä»¶ä¼ å…¥çš„å‚æ•°æ˜¯å‡½æ•°ï¼Œå‚æ•°åå°±å¿…é¡»ä»¥ on å¼€å¤´ï¼š</span><br><span class="line"></span><br><span class="line">// æ­£ç¡®</span><br><span class="line">const element = &lt;View onClick=&#123;this.onTag&#125; /&gt;</span><br><span class="line">const element2 = &lt;Input onFocus=&#123;this.onFocus&#125; /&gt;</span><br><span class="line">const element3 = &lt;CustomElement onAnimationEnd=&#123;this.props.onAnimationEnd&#125; /&gt;</span><br></pre></td></tr></table></figure><h3 id="åˆ—è¡¨æ¸²æŸ“"><a href="#åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="åˆ—è¡¨æ¸²æŸ“"></a>åˆ—è¡¨æ¸²æŸ“</h3><p>taroKey é€‚ç”¨äºå¾ªç¯æ¸²æŸ“åŸç”Ÿå°ç¨‹åºç»„ä»¶ï¼Œèµ‹äºˆæ¯ä¸ªå…ƒç´ å”¯ä¸€ç¡®å®šæ ‡è¯†ï¼Œè½¬æ¢ä¸ºå°ç¨‹åºçš„ wx:keyã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [...Array(<span class="number">100</span>).keys()] <span class="comment">// [0, 1, 2, ..., 98, 99]</span></span><br><span class="line"><span class="keyword">const</span> listItems = numbers.map(<span class="function">(<span class="params">number</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="comment">// native component</span></span><br><span class="line">    &lt;g-list</span><br><span class="line">      taroKey=&#123;<span class="built_in">String</span>(number)&#125;</span><br><span class="line">      className=<span class="string">'g-list'</span></span><br><span class="line">    &gt;</span><br><span class="line">    æˆ‘æ˜¯ç¬¬ &#123;number + <span class="number">1</span>&#125; ä¸ªæ•°å­—</span><br><span class="line">    &lt;<span class="regexp">/g-list&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;)</span></span><br></pre></td></tr></table></figure><p>å…ƒç´ çš„ key åœ¨ä»–çš„å…„å¼Ÿå…ƒç´ ä¹‹é—´åº”è¯¥å”¯ä¸€</p><h4 id="ä¸-React-çš„ä¸åŒ"><a href="#ä¸-React-çš„ä¸åŒ" class="headerlink" title="ä¸ React çš„ä¸åŒ"></a>ä¸ React çš„ä¸åŒ</h4><blockquote><p>åœ¨ React ä¸­ï¼ŒJSX æ˜¯ä¼šç¼–è¯‘æˆæ™®é€šçš„ JS çš„æ‰§è¡Œï¼Œæ¯ä¸€ä¸ª JSX å…ƒç´ ï¼Œå…¶å®ä¼šé€šè¿‡ createElement å‡½æ•°åˆ›å»ºæˆä¸€ä¸ª JavaScript å¯¹è±¡ï¼ˆReact Elementï¼‰ï¼Œå› æ­¤å®é™…ä¸Šä½ å¯ä»¥è¿™æ ·å†™ä»£ç  React ä¹Ÿæ˜¯å®Œå…¨èƒ½æ¸²æŸ“çš„ï¼š</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = <span class="keyword">this</span>.state.list.map(<span class="function"><span class="params">l</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (l.selected) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;l.text&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;).filter(React.isValidElement)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”šè‡³</span></span><br><span class="line"><span class="keyword">const</span> list = <span class="keyword">this</span>.state.list.map(<span class="function"><span class="params">l</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (l.selected) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">'$$typeof'</span>: <span class="built_in">Symbol</span>(react.element),</span><br><span class="line">      <span class="string">'props'</span>: &#123;</span><br><span class="line">        children: l.text</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">'type'</span>: <span class="string">'li'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).filter(React.isValidElement)</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°å¼ç»„ä»¶-1"><a href="#å‡½æ•°å¼ç»„ä»¶-1" class="headerlink" title="å‡½æ•°å¼ç»„ä»¶"></a>å‡½æ•°å¼ç»„ä»¶</h3><p>å®šä¹‰ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶éå¸¸ç®€å•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">View</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° propsï¼Œå¹¶ä¸”è¿”å›çš„æ˜¯ä¸€ä¸ª JSX å…ƒç´ ã€‚è¿™æ ·çš„å‡½æ•°å°±æ˜¯å‡½æ•°å¼ç»„ä»¶ã€‚ç›¸å¯¹äºçš„ ES6 Class ç»„ä»¶æ˜¯ï¼š</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Welcome</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span>Hello, &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">View</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç±»å‡½æ•°å¼ç»„ä»¶"><a href="#ç±»å‡½æ•°å¼ç»„ä»¶" class="headerlink" title="ç±»å‡½æ•°å¼ç»„ä»¶"></a>ç±»å‡½æ•°å¼ç»„ä»¶</h3><blockquote><p>ç”±äºä¸€ä¸ªæ–‡ä»¶ä¸èƒ½å®šä¹‰ä¸¤ä¸ªç»„ä»¶ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç»„ä»¶å†…éƒ¨çš„æŠ½è±¡ç»„ä»¶ï¼Œè¿™æ—¶ç±»å‡½æ•°å¼ç»„ä»¶å°±æ˜¯ä½ æƒ³è¦ç­”æ¡ˆã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª Class ç»„ä»¶ï¼Œå®ƒåŒ…æ‹¬äº†ä¸€ä¸ª Header ä¸€ä¸ª Footerï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ï¼š</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomePage</span> <span class="keyword">extends</span> <span class="title">Taro</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  renderHeader () &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; header &#125; = <span class="keyword">this</span>.state</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span>&#123;header&#125;<span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  renderFooter (footer) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span>&#123;footer&#125;<span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.renderHeader()&#125;</span><br><span class="line">        &#123;...&#125;</span><br><span class="line">        &#123;<span class="keyword">this</span>.renderFooter(<span class="string">'footer'</span>)&#125;</span><br><span class="line">      &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>åœ¨ renderHeader æˆ– renderFooter å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®ç±»çš„ thisï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ä¸é™é‡çš„å‚æ•°ï¼Œè¿™ç±»å‹çš„å‡½æ•°ä¹Ÿå¯ä»¥è°ƒç”¨æ— é™æ¬¡æ•°ã€‚ä½†è¿™æ ·çš„å†™æ³•ä¹Ÿå­˜åœ¨ä¸€äº›é™åˆ¶ï¼š</p><ul><li>å‡½æ•°çš„å‘½åå¿…é¡»ä»¥ render å¼€å¤´ï¼Œrender åçš„ç¬¬ä¸€ä¸ªå­—æ¯éœ€è¦å¤§å†™</li><li>å‡½æ•°çš„å‚æ•°ä¸å¾—ä¼ å…¥ JSX å…ƒç´ æˆ– JSX å…ƒç´ å¼•ç”¨</li><li>å‡½æ•°ä¸èƒ½é€’å½’åœ°è°ƒç”¨è‡ªèº«<blockquote><p>å½¢å¦‚ renderHeader è¿™æ ·çš„å‡½æ•°åœ¨å°ç¨‹åºä¸­ä¼šç¼–è¯‘æˆ templateï¼Œè€Œå°ç¨‹åºçš„ template æ˜¯æ— æ³•åšåˆ°é€’å½’è°ƒç”¨è‡ªèº«çš„ã€‚å½“ä½ æœ‰è¿™æ ·çš„éœ€æ±‚æ—¶ï¼Œå¯ä»¥æ–°å»ºä¸¤ä¸ªä¸€æ¨¡ä¸€æ ·çš„ç»„ä»¶å’Œæ–‡ä»¶ï¼šComponentA å’Œ ComponentBï¼Œåœ¨ ComponentA ä¸­è°ƒç”¨ ComponentBï¼Œåœ¨ ComponentB ä¸­è°ƒç”¨ ComponnetAã€‚</p></blockquote></li></ul><h3 id="é—­åŒ…å‡½æ•°å¼ç»„ä»¶"><a href="#é—­åŒ…å‡½æ•°å¼ç»„ä»¶" class="headerlink" title="é—­åŒ…å‡½æ•°å¼ç»„ä»¶"></a>é—­åŒ…å‡½æ•°å¼ç»„ä»¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Header</span> (<span class="params">&#123; user &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> name = user.name</span><br><span class="line">  <span class="keyword">const</span> renderTitle = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// renderTitle æ¯æ¬¡éƒ½èƒ½è·å–åˆ°å½“å‰ä½œç”¨åŸŸ `name` çš„å€¼</span></span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span>Welcome, &#123;name&#125;<span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;View&gt;</span><br><span class="line">      &#123;<span class="comment">/* é‡è¦äººå£«æˆ‘ä»¬è¦æ¬¢è¿ä»–ä¸‰æ¬¡ */</span> &#125;</span><br><span class="line">      &#123;renderTitle()&#125;</span><br><span class="line">      &#123;renderTitle()&#125;</span><br><span class="line">      &#123;renderTitle()&#125;</span><br><span class="line">    &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2><blockquote><p>const MyContext = Taro.createContext(defaultValue)<br>åˆ›å»ºä¸€ä¸ª Context å¯¹è±¡ã€‚å½“ Taro æ¸²æŸ“ä¸€ä¸ªè®¢é˜…äº†è¿™ä¸ª Context å¯¹è±¡çš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ä¼šä»æœ€å…ˆæ¸²æŸ“çš„ Provider ä¸­è¯»å–åˆ° Provider çš„ valueã€‚<br>åœ¨ Taro ä¸­ï¼Œå³ä¾¿åœ¨æ¡†æ¶å±‚é¢ä¹Ÿæ— æ³•çŸ¥é“ç»„ä»¶çš„æ ‘ç»“æ„ï¼Œå› æ­¤ Taro æ— æ³•åƒ React ä¸€æ ·å¾€çˆ¶ç»„ä»¶æ‰¾ç¦»è‡ªå·±æœ€è¿‘çš„ Providerã€‚å› æ­¤åˆ›å»ºçš„ Context æœ€å¥½åªåœ¨ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨ã€‚</p></blockquote><blockquote><p>&lt;MyContext.Provider value={/* æŸä¸ªå€¼ */}&gt;</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> <span class="keyword">extends</span> <span class="title">Taro</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">let</span> value = <span class="keyword">this</span>.context;</span><br><span class="line">    <span class="comment">/* åœ¨ç»„ä»¶æŒ‚è½½å®Œæˆåï¼Œä½¿ç”¨ MyContext ç»„ä»¶çš„å€¼æ¥æ‰§è¡Œä¸€äº›æœ‰å‰¯ä½œç”¨çš„æ“ä½œ */</span></span><br><span class="line">  &#125;</span><br><span class="line">  componentDidUpdate() &#123;</span><br><span class="line">    <span class="keyword">let</span> value = <span class="keyword">this</span>.context;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">  &#125;</span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    <span class="keyword">let</span> value = <span class="keyword">this</span>.context;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">let</span> value = <span class="keyword">this</span>.context;</span><br><span class="line">    <span class="comment">/* åŸºäº MyContext ç»„ä»¶çš„å€¼è¿›è¡Œæ¸²æŸ“ */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">MyClass.contextType = MyContext;</span><br></pre></td></tr></table></figure><h4 id="contextä½¿ç”¨"><a href="#contextä½¿ç”¨" class="headerlink" title="contextä½¿ç”¨"></a>contextä½¿ç”¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// counter-context.ts</span></span><br><span class="line"><span class="keyword">import</span> Taro <span class="keyword">from</span> <span class="string">'@tarojs/taro'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> CounterContext = Taro.createContext(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> UserContext = Taro.createContext(&#123;</span><br><span class="line">  name: <span class="string">'Guest'</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.tsx</span></span><br><span class="line"><span class="keyword">import</span> Taro, &#123; Component, Config, useContext &#125; <span class="keyword">from</span> <span class="string">'@tarojs/taro'</span></span><br><span class="line"><span class="keyword">import</span> &#123; CounterContext,UserContext &#125; <span class="keyword">from</span> <span class="string">'./counter-context'</span></span><br><span class="line"><span class="keyword">import</span> &#123; View&#125; <span class="keyword">from</span> <span class="string">'@tarojs/components'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// static contextType = CounterContext</span></span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="comment">// const value = this.context</span></span><br><span class="line">    <span class="comment">// const user = this.context</span></span><br><span class="line">    <span class="keyword">const</span> value =  useContext(CounterContext)</span><br><span class="line">    <span class="keyword">const</span> &#123;name&#125; =  useContext(UserContext)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View&gt;</span><br><span class="line">        Count: &#123;value&#125;</span><br><span class="line">        name:&#123;name&#125;</span><br><span class="line">      &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ counter.ts</span></span><br><span class="line"><span class="regexp">import Taro, &#123; Component, Config, useState &#125; from '@tarojs/</span>taro<span class="string">'</span></span><br><span class="line"><span class="string">import &#123; CounterContext,UserContext &#125;  from '</span>./counter-context<span class="string">'</span></span><br><span class="line"><span class="string">import Child  from '</span>./child<span class="string">'</span></span><br><span class="line"><span class="string">import &#123; View, Button&#125; from '</span>@tarojs/components<span class="string">'</span></span><br><span class="line"><span class="string">export default class ContextValue extends Component &#123;</span></span><br><span class="line"><span class="string">  gogogo()&#123;</span></span><br><span class="line"><span class="string">    console.log('</span>gogo<span class="string">');</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  render () &#123;</span></span><br><span class="line"><span class="string">    const [ count , setCount] = useState(0)</span></span><br><span class="line"><span class="string">    const [ val ] = useState(&#123;name:'</span>asd<span class="string">'&#125;)</span></span><br><span class="line"><span class="string">    return (</span></span><br><span class="line"><span class="string">      &lt;CounterContext.Provider value=&#123;count&#125;&gt;</span></span><br><span class="line"><span class="string">        &lt;UserContext.Provider value=&#123;val&#125;&gt;</span></span><br><span class="line"><span class="string">        &lt;View className='</span>container<span class="string">'&gt;</span></span><br><span class="line"><span class="string">          &lt;Child /&gt;</span></span><br><span class="line"><span class="string">          &lt;Button onClick=&#123;() =&gt; setCount(0)&#125;&gt;Reset&lt;/Button&gt;</span></span><br><span class="line"><span class="string">          &lt;Button onClick=&#123;() =&gt; setCount(prevCount =&gt; prevCount + 1)&#125;&gt;+&lt;/Button&gt;</span></span><br><span class="line"><span class="string">          &lt;Button onClick=&#123;() =&gt; setCount(prevCount =&gt; prevCount - 1)&#125;&gt;-&lt;/Button&gt;</span></span><br><span class="line"><span class="string">        &lt;/View&gt;</span></span><br><span class="line"><span class="string">        &lt;/UserContext.Provider&gt;</span></span><br><span class="line"><span class="string">      &lt;/CounterContext.Provider&gt;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="Children"><a href="#Children" class="headerlink" title="Children"></a>Children</h3><p>åœ¨æˆ‘ä»¬è®¾è®¡ç»„ä»¶æ—¶ï¼Œæœ‰äº›ç»„ä»¶é€šå¸¸ä¸çŸ¥é“è‡ªå·±çš„å­ç»„ä»¶ä¼šæœ‰ä»€ä¹ˆå†…å®¹ï¼Œä¾‹å¦‚ Sidebar å’Œ Dialog è¿™æ ·çš„å®¹å™¨ç»„ä»¶ã€‚</p><p>æˆ‘ä»¬å»ºè®®åœ¨è¿™æ ·çš„æƒ…å†µä½¿ç”¨ this.props.children æ¥ä¼ é€’å­å…ƒç´ </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dialog</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View className=<span class="string">'dialog'</span>&gt;</span><br><span class="line">        &lt;View className=<span class="string">'header'</span>&gt;Welcome!<span class="xml"><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">        &lt;View className=<span class="string">'body'</span>&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.props.children&#125;</span><br><span class="line">        &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">        &lt;View className='footer'&gt;-- divider --&lt;/</span>View&gt;</span><br><span class="line">      &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±èƒ½å…è®¸å…¶å®ƒç»„ä»¶åœ¨ JSX ä¸­åµŒå¥—ä»»æ„å­ç»„ä»¶ä¼ é€’ç»™ Dialog:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class App extends Component &#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;View className=&apos;container&apos;&gt;</span><br><span class="line">        &lt;Dialog&gt;</span><br><span class="line">          &lt;View className=&quot;dialog-message&quot;&gt;</span><br><span class="line">            Thank you for using Taro.</span><br><span class="line">          &lt;/View&gt;</span><br><span class="line">        &lt;/Dialog&gt;</span><br><span class="line">      &lt;/View&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <Dialog /> JSX æ ‡ç­¾å†…çš„ä»»ä½•å†…å®¹éƒ½ä¼šä½œä¸ºå®ƒçš„å­å…ƒç´ (Children)éƒ½ä¼šä¼ é€’åˆ°å®ƒçš„ç»„ä»¶ã€‚</p><p>æ³¨æ„äº‹é¡¹:ä¸è¦å¯¹ this.props.children è¿›è¡Œä»»ä½•æ“ä½œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Taro åœ¨å°ç¨‹åºä¸­å®ç°è¿™ä¸ªåŠŸèƒ½ä½¿ç”¨çš„æ˜¯å°ç¨‹åºçš„ slot åŠŸèƒ½,ä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ this.props.children ç†è§£ä¸º slot çš„è¯­æ³•ç³–ï¼Œthis.props.children åœ¨ Taro ä¸­å¹¶ä¸æ˜¯ React çš„ ReactElement å¯¹è±¡ï¼Œå› æ­¤å½¢å¦‚ this.props.children &amp;&amp; this.props.childrenã€this.props.children[0] åœ¨ Taro ä¸­éƒ½æ˜¯éæ³•çš„ã€‚</span></span><br><span class="line"><span class="comment">// this.props.children æ— æ³•ç”¨ defaultProps è®¾ç½®é»˜è®¤å†…å®¹ã€‚ç”±äºå°ç¨‹åºçš„é™åˆ¶ï¼ŒTaro ä¹Ÿæ— æ³•çŸ¥é“ç»„ä»¶çš„æ¶ˆè´¹è€…æ˜¯å¦ä¼ å…¥å†…å®¹ï¼Œæ‰€ä»¥æ— æ³•åº”ç”¨é»˜è®¤å†…å®¹ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸èƒ½æŠŠ this.props.children åˆ†è§£ä¸ºå˜é‡å†ä½¿ç”¨ã€‚ç”±äºæ™®é€šçš„ props æœ‰ä¸€ä¸ªç¡®åˆ‡çš„å€¼ï¼Œæ‰€ä»¥å½“ä½ æŠŠå®ƒä»¬åˆ†è§£ä¸ºå˜é‡è¿è¡Œæ—¶å¯ä»¥å¤„ç†ï¼Œthis.props.children åˆ™ä¸èƒ½è¿™æ ·æ“ä½œï¼Œä½ å¿…é¡»æ˜¾æ€§åœ°æŠŠ this.props.children å…¨éƒ¨éƒ½å†™å®Œæ•´æ‰èƒ½å®ç°å®ƒçš„åŠŸèƒ½ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="ç»„åˆ"><a href="#ç»„åˆ" class="headerlink" title="ç»„åˆ"></a>ç»„åˆ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dialog</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View className=<span class="string">'dialog'</span>&gt;</span><br><span class="line">        &lt;View className=<span class="string">'header'</span>&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.props.renderHeader&#125;</span><br><span class="line">        &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">        &lt;View className='body'&gt;</span></span><br><span class="line"><span class="regexp">          &#123;this.props.children&#125;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>View&gt;</span><br><span class="line">        &lt;View className=<span class="string">'footer'</span>&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.props.renderFooter&#125;</span><br><span class="line">        &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>View&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View className=<span class="string">'container'</span>&gt;</span><br><span class="line">        &lt;Dialog</span><br><span class="line">          renderHeader=&#123;</span><br><span class="line">            &lt;View className=<span class="string">'welcome-message'</span>&gt;Welcome!<span class="xml"><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">          &#125;</span><br><span class="line">          renderFooter=&#123;</span><br><span class="line">            &lt;Button className=<span class="string">'close'</span>&gt;Close&lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">          &#125;</span></span><br><span class="line"><span class="regexp">        &gt;</span></span><br><span class="line"><span class="regexp">          &lt;View className="dialog-message"&gt;</span></span><br><span class="line"><span class="regexp">            Thank you for using Taro.</span></span><br><span class="line"><span class="regexp">          &lt;/</span>View&gt;</span><br><span class="line">        &lt;<span class="regexp">/Dialog&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>View&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰ç»„åˆéƒ½å¿…é¡»ç”¨ render å¼€å¤´ï¼Œä¸”éµå®ˆé©¼å³°å¼å‘½åæ³•ã€‚å’Œæˆ‘ä»¬çš„äº‹ä»¶è§„èŒƒä»¥ on å¼€å¤´ä¸€æ ·ï¼Œç»„ä»¶ç»„åˆä½¿ç”¨ render å¼€å¤´ã€‚<br>ç»„åˆåªèƒ½ä¼ å…¥å•ä¸ª JSX å…ƒç´ ï¼Œä¸èƒ½ä¼ å…¥å…¶å®ƒä»»ä½•ç±»å‹ã€‚å½“ä½ éœ€è¦è¿›è¡Œä¸€äº›æ¡ä»¶åˆ¤æ–­æˆ–å¤æ‚é€»è¾‘æ“ä½œçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ª Block å…ƒç´ åŒ…è£¹ä½ï¼Œç„¶ååœ¨ Block å…ƒç´ çš„é‡Œé¢å¡«å……å…¶å®ƒå¤æ‚çš„é€»è¾‘ã€‚</p><h4 id="Render-Props"><a href="#Render-Props" class="headerlink" title="Render Props"></a>Render Props</h4><p>å…·æœ‰ render prop çš„ç»„ä»¶æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ª Taro å…ƒç´ å¹¶è°ƒç”¨å®ƒè€Œä¸æ˜¯å®ç°è‡ªå·±çš„æ¸²æŸ“é€»è¾‘ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cat.js</span></span><br><span class="line"><span class="keyword">import</span> catImage <span class="keyword">from</span> <span class="string">'./cat.jpg'</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Taro</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">    mouse: &#123;</span><br><span class="line">      x: <span class="number">0</span>,</span><br><span class="line">      y: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; mouse &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Image src=&#123;catImage&#125; style=&#123;&#123; <span class="attr">position</span>: <span class="string">'absolute'</span>, <span class="attr">left</span>: mouse.x, <span class="attr">top</span>: mouse.y &#125;&#125; /&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mouse.js</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mouse</span> <span class="keyword">extends</span> <span class="title">Taro</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.handleMouseMove = <span class="keyword">this</span>.handleClick.bind(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClick(event) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; x, y &#125;  = event.detail</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      x,</span><br><span class="line">      y</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View style=&#123;&#123; <span class="attr">height</span>: <span class="string">'100%'</span> &#125;&#125; onClick=&#123;<span class="keyword">this</span>.handleClick&#125;&gt;</span><br><span class="line"></span><br><span class="line">        &#123;<span class="comment">/*</span></span><br><span class="line"><span class="comment">          æˆ‘ä»¬å¯ä»¥æŠŠ prop å½“æˆä¸€ä¸ªå‡½æ•°ï¼ŒåŠ¨æ€åœ°è°ƒæ•´æ¸²æŸ“å†…å®¹ã€‚</span></span><br><span class="line"><span class="comment">        */</span>&#125;</span><br><span class="line">        &#123;<span class="keyword">this</span>.props.renderCat(<span class="keyword">this</span>.state)&#125;</span><br><span class="line">      &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ MouseTracker.js</span></span><br><span class="line"><span class="regexp">class MouseTracker extends Taro.Component &#123;</span></span><br><span class="line"><span class="regexp">  render() &#123;</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;View&gt;</span></span><br><span class="line"><span class="regexp">        &lt;View&gt;ç‚¹å‡»é¼ æ ‡!&lt;/</span>View&gt;</span><br><span class="line">        &#123;<span class="comment">/*</span></span><br><span class="line"><span class="comment">          Mouse å¦‚ä½•æ¸²æŸ“ç”± MouseTracker çš„çŠ¶æ€æ§åˆ¶</span></span><br><span class="line"><span class="comment">        */</span>&#125;</span><br><span class="line">        &lt;Mouse renderCat=&#123;mouse =&gt; (</span><br><span class="line">          &lt;Cat mouse=&#123;mouse&#125; /&gt;</span><br><span class="line">        )&#125;/&gt;</span><br><span class="line">      &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="REF"><a href="#REF" class="headerlink" title="REF"></a>REF</h3><h4 id="ä½¿ç”¨å­—ç¬¦ä¸²åˆ›å»º-ref"><a href="#ä½¿ç”¨å­—ç¬¦ä¸²åˆ›å»º-ref" class="headerlink" title="ä½¿ç”¨å­—ç¬¦ä¸²åˆ›å»º ref"></a>ä½¿ç”¨å­—ç¬¦ä¸²åˆ›å»º ref</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  componentDidMount () &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœ ref çš„æ˜¯å°ç¨‹åºåŸç”Ÿç»„ä»¶ï¼Œé‚£åªæœ‰åœ¨ didMount ç”Ÿå‘½å‘¨æœŸä¹‹åæ‰èƒ½é€šè¿‡</span></span><br><span class="line">    <span class="comment">// this.refs.input è®¿é—®åˆ°å°ç¨‹åºåŸç”Ÿç»„ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (process.env.TARO_ENV === <span class="string">'weapp'</span>) &#123;</span><br><span class="line">      <span class="comment">// è¿™é‡Œ this.refs.input è®¿é—®çš„æ—¶å€™é€šè¿‡ `wx.createSeletorQuery` å–åˆ°çš„å°ç¨‹åºåŸç”Ÿç»„ä»¶</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (process.env.TARO_ENV === <span class="string">'h5'</span>) &#123;</span><br><span class="line">      <span class="comment">// è¿™é‡Œ this.refs.input è®¿é—®åˆ°çš„æ˜¯ `@tarojs/components` çš„ `Input` ç»„ä»¶å®ä¾‹</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Input</span> <span class="attr">ref</span>=<span class="string">'input'</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="é€šè¿‡å‡½æ•°åˆ›å»º-ref"><a href="#é€šè¿‡å‡½æ•°åˆ›å»º-ref" class="headerlink" title="é€šè¿‡å‡½æ•°åˆ›å»º ref"></a>é€šè¿‡å‡½æ•°åˆ›å»º ref</h4><p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªå‡½æ•°åˆ›å»º ref, åœ¨å‡½æ•°ä¸­è¢«å¼•ç”¨çš„ç»„ä»¶ä¼šä½œä¸ºå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ã€‚å¦‚æœæ˜¯è¢«å¼•ç”¨çš„ç»„ä»¶æ˜¯è‡ªå®šä¹‰ç»„ä»¶ï¼Œé‚£å¯ä»¥åœ¨ä»»æ„çš„ç”Ÿå‘½å‘¨æœŸè®¿é—®å¼•ç”¨ã€‚</p><blockquote><p>ä¸ç®¡åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼ŒTaro éƒ½æ¨èä½ ä½¿ç”¨å‡½æ•°çš„æ–¹å¼åˆ›å»º refã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  roar () &#123;</span><br><span class="line">    <span class="comment">// ä¼šæ‰“å° `miao, miao, miao~`</span></span><br><span class="line">    <span class="keyword">this</span>.cat.miao()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  refCat = <span class="function">(<span class="params">node</span>) =&gt;</span> <span class="keyword">this</span>.cat = node <span class="comment">// `this.cat` ä¼šå˜æˆ `Cat` ç»„ä»¶å®ä¾‹çš„å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Cat</span> <span class="attr">ref</span>=<span class="string">&#123;this.refCat&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">class Cat extends Component &#123;</span></span><br><span class="line"><span class="xml">  miao () &#123;</span></span><br><span class="line"><span class="xml">    console.log('miao, miao, miao~')</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">  render () &#123;</span></span><br><span class="line"><span class="xml">    return <span class="tag">&lt;<span class="name">View</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="é€šè¿‡-createRef-åˆ›å»º-ref"><a href="#é€šè¿‡-createRef-åˆ›å»º-ref" class="headerlink" title="é€šè¿‡ createRef åˆ›å»º ref"></a>é€šè¿‡ createRef åˆ›å»º ref</h3><blockquote><p>Refs è¿˜æ˜¯ä½¿ç”¨ Taro.createRef() åˆ›å»ºçš„ï¼Œå¹¶é€šè¿‡ ref å±æ€§é™„åŠ åˆ° Taro å…ƒç´ ã€‚åœ¨æ„é€ ç»„ä»¶æ—¶ï¼Œé€šå¸¸å°† Refs åˆ†é…ç»™å®ä¾‹å±æ€§ï¼Œä»¥ä¾¿å¯ä»¥åœ¨æ•´ä¸ªç»„ä»¶ä¸­å¼•ç”¨å®ƒä»¬ã€‚</p></blockquote><blockquote><p>å½“ ref è¢«ä¼ é€’ç»™ render ä¸­çš„å…ƒç´ æ—¶ï¼Œå¯¹è¯¥èŠ‚ç‚¹çš„å¼•ç”¨å¯ä»¥åœ¨ ref çš„ current å±æ€§ä¸­è¢«è®¿é—®ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.cat = Taro.createRef()</span><br><span class="line"></span><br><span class="line">  roar () &#123;</span><br><span class="line">    <span class="comment">// ä¼šæ‰“å° `miao, miao, miao~`</span></span><br><span class="line">    <span class="keyword">this</span>.cat.current.miao()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Cat</span> <span class="attr">ref</span>=<span class="string">&#123;this.cat&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">class Cat extends Component &#123;</span></span><br><span class="line"><span class="xml">  miao () &#123;</span></span><br><span class="line"><span class="xml">    console.log('miao, miao, miao~')</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">  render () &#123;</span></span><br><span class="line"><span class="xml">    return <span class="tag">&lt;<span class="name">View</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="è·¨å¹³å°å¼€å‘"><a href="#è·¨å¹³å°å¼€å‘" class="headerlink" title="è·¨å¹³å°å¼€å‘"></a>è·¨å¹³å°å¼€å‘</h3><p>å†…ç½®ç¯å¢ƒå˜é‡<br>Taro åœ¨ç¼–è¯‘æ—¶æä¾›äº†ä¸€äº›å†…ç½®çš„ç¯å¢ƒå˜é‡æ¥å¸®åŠ©ç”¨æˆ·åšä¸€äº›ç‰¹æ®Šå¤„ç†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">process.env.TARO_ENV </span><br><span class="line"><span class="comment">//ç”¨äºåˆ¤æ–­å½“å‰ç¼–è¯‘ç±»å‹ï¼Œç›®å‰æœ‰ weapp / swan / alipay / h5 / rn / tt / qq / quickapp å…«ä¸ªå–å€¼ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªå˜é‡æ¥ä¹¦å†™å¯¹åº”ä¸€äº›ä¸åŒç¯å¢ƒä¸‹çš„ä»£ç ï¼Œåœ¨ç¼–è¯‘æ—¶ä¼šå°†ä¸å±äºå½“å‰ç¼–è¯‘ç±»å‹çš„ä»£ç å»æ‰ï¼Œåªä¿ç•™å½“å‰ç¼–è¯‘ç±»å‹ä¸‹çš„ä»£ç ï¼Œä¾‹å¦‚æƒ³åœ¨å¾®ä¿¡å°ç¨‹åºå’Œ H5 ç«¯åˆ†åˆ«å¼•ç”¨ä¸åŒèµ„æº</span></span><br><span class="line"><span class="keyword">if</span> (process.env.TARO_ENV === <span class="string">'weapp'</span>) &#123;</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">'path/to/weapp/name'</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (process.env.TARO_ENV === <span class="string">'h5'</span>) &#123;</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">'path/to/h5/name'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åŒæ—¶ä¹Ÿå¯ä»¥åœ¨ JSX ä¸­ä½¿ç”¨ï¼Œå†³å®šä¸åŒç«¯è¦åŠ è½½çš„ç»„ä»¶</span></span><br><span class="line">render () &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;View&gt;</span><br><span class="line">      &#123;process.env.TARO_ENV === <span class="string">'weapp'</span> &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">ScrollViewWeapp</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="xml">      &#123;process.env.TARO_ENV === 'h5' &amp;&amp; <span class="tag">&lt;<span class="name">ScrollViewH5</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»Ÿä¸€æ¥å£çš„å¤šç«¯æ–‡ä»¶"><a href="#ç»Ÿä¸€æ¥å£çš„å¤šç«¯æ–‡ä»¶" class="headerlink" title="ç»Ÿä¸€æ¥å£çš„å¤šç«¯æ–‡ä»¶"></a>ç»Ÿä¸€æ¥å£çš„å¤šç«¯æ–‡ä»¶</h3><p>å†…ç½®ç¯å¢ƒå˜é‡è™½ç„¶å¯ä»¥è§£å†³å¤§éƒ¨åˆ†è·¨ç«¯çš„é—®é¢˜ï¼Œä½†æ˜¯ä¼šè®©ä»£ç ä¸­å……æ–¥ç€é€»è¾‘åˆ¤æ–­çš„ä»£ç ï¼Œå½±å“ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œè€Œä¸”ä¹Ÿè®©ä»£ç å˜å¾—æ„ˆå‘ä¸‘é™‹ï¼Œä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œè‡ª 1.2.17 å¼€å§‹ï¼ŒTaro æä¾›äº†å¦å¤–ä¸€ç§è·¨ç«¯å¼€å‘çš„æ–¹å¼ä½œä¸ºè¡¥å……ã€‚</p><p>å¼€å‘è€…å¯ä»¥é€šè¿‡ä½¿ç”¨ç»Ÿä¸€æ¥å£çš„å¤šç«¯æ–‡ä»¶ï¼Œæ¥è§£å†³è·¨ç«¯å·®å¼‚çš„åŠŸèƒ½ã€‚é’ˆå¯¹ä¸€é¡¹åŠŸèƒ½ï¼Œå¦‚æœå¤šä¸ªç«¯ä¹‹é—´éƒ½æœ‰å·®å¼‚ï¼Œé‚£ä¹ˆå¼€å‘è€…å¯ä»¥é€šè¿‡å°†æ–‡ä»¶ä¿®æ”¹æˆ åŸæ–‡ä»¶å + ç«¯ç±»å‹ çš„å‘½åå½¢å¼ï¼Œä¸åŒç«¯çš„æ–‡ä»¶ä»£ç å¯¹å¤–ä¿æŒç»Ÿä¸€æ¥å£ï¼Œè€Œå¼•ç”¨çš„æ—¶å€™ä»ç„¶æ˜¯ import åŸæ–‡ä»¶åçš„æ–‡ä»¶ï¼ŒTaro åœ¨ç¼–è¯‘æ—¶ï¼Œä¼šè·Ÿæ ¹æ®éœ€è¦ç¼–è¯‘å¹³å°ç±»å‹ï¼Œå°†åŠ è½½çš„æ–‡ä»¶å˜æ›´ä¸ºå¸¦æœ‰å¯¹åº”ç«¯ç±»å‹æ–‡ä»¶åçš„æ–‡ä»¶ï¼Œä»è€Œè¾¾åˆ°ä¸åŒçš„ç«¯åŠ è½½å¯¹åº”æ–‡ä»¶çš„ç›®çš„ã€‚</p><p>ç«¯ç±»å‹å¯¹åº”ç€ process.env.TARO_ENV çš„å€¼</p><p>é€šå¸¸æœ‰ä»¥ä¸‹ä¸¤ç§ä½¿ç”¨åœºæ™¯ã€‚</p><h4 id="å¤šç«¯ç»„ä»¶"><a href="#å¤šç«¯ç»„ä»¶" class="headerlink" title="å¤šç«¯ç»„ä»¶"></a>å¤šç«¯ç»„ä»¶</h4><p>å‡å¦‚æœ‰ä¸€ä¸ª Test ç»„ä»¶å­˜åœ¨å¾®ä¿¡å°ç¨‹åºã€ç™¾åº¦å°ç¨‹åºå’Œ H5 ä¸‰ä¸ªä¸åŒç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°±å¯ä»¥åƒå¦‚ä¸‹ç»„ç»‡ä»£ç </p><p>test.js æ–‡ä»¶ï¼Œè¿™æ˜¯ Test ç»„ä»¶é»˜è®¤çš„å½¢å¼ï¼Œç¼–è¯‘åˆ°å¾®ä¿¡å°ç¨‹åºã€ç™¾åº¦å°ç¨‹åºå’Œ H5 ä¸‰ç«¯ä¹‹å¤–çš„ç«¯ä½¿ç”¨çš„ç‰ˆæœ¬</p><p>test.h5.js æ–‡ä»¶ï¼Œè¿™æ˜¯ Test ç»„ä»¶çš„ H5 ç‰ˆæœ¬</p><p>test.weapp.js æ–‡ä»¶ï¼Œè¿™æ˜¯ Test ç»„ä»¶çš„ å¾®ä¿¡å°ç¨‹åº ç‰ˆæœ¬</p><p>test.swan.js æ–‡ä»¶ï¼Œè¿™æ˜¯ Test ç»„ä»¶çš„ ç™¾åº¦å°ç¨‹åº ç‰ˆæœ¬</p><p>test.qq.js æ–‡ä»¶ï¼Œè¿™æ˜¯ Test ç»„ä»¶çš„ QQ å°ç¨‹åº ç‰ˆæœ¬</p><p>test.quickapp.js æ–‡ä»¶ï¼Œè¿™æ˜¯ Test ç»„ä»¶çš„ å¿«åº”ç”¨ ç‰ˆæœ¬</p><p>å››ä¸ªæ–‡ä»¶ï¼Œå¯¹å¤–æš´éœ²çš„æ˜¯ç»Ÿä¸€çš„æ¥å£ï¼Œå®ƒä»¬æ¥å—ä¸€è‡´çš„å‚æ•°ï¼Œåªæ˜¯å†…éƒ¨æœ‰é’ˆå¯¹å„è‡ªå¹³å°çš„ä»£ç å®ç°</p><p>è€Œæˆ‘ä»¬ä½¿ç”¨ Test ç»„ä»¶çš„æ—¶å€™ï¼Œå¼•ç”¨çš„æ–¹å¼ä¾ç„¶å’Œä¹‹å‰ä¿æŒä¸€è‡´ï¼Œimport çš„æ˜¯ä¸å¸¦ç«¯ç±»å‹çš„æ–‡ä»¶åï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶æ·»åŠ ç«¯ç±»å‹åç¼€</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Test <span class="keyword">from</span> <span class="string">'../../components/test'</span></span><br><span class="line"></span><br><span class="line">&lt;Test argA=&#123;<span class="number">1</span>&#125; argA=&#123;<span class="number">2</span>&#125; /&gt;</span><br></pre></td></tr></table></figure><h4 id="å¤šç«¯è„šæœ¬é€»è¾‘"><a href="#å¤šç«¯è„šæœ¬é€»è¾‘" class="headerlink" title="å¤šç«¯è„šæœ¬é€»è¾‘"></a>å¤šç«¯è„šæœ¬é€»è¾‘</h4><p>ä¸å¤šç«¯ç»„ä»¶ç±»ä¼¼ï¼Œå‡å¦‚æœ‰éœ€è¦é’ˆå¯¹ä¸åŒçš„ç«¯å†™ä¸åŒçš„è„šæœ¬é€»è¾‘ä»£ç ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç±»ä¼¼çš„è¿›è¡Œå¤„ç†ï¼Œéµå®ˆçš„å”¯ä¸€åŸåˆ™å°±æ˜¯å¤šç«¯æ–‡ä»¶å¯¹å¤–çš„æ¥å£ä¿æŒä¸€è‡´ã€‚</p><p>ä¾‹å¦‚å¾®ä¿¡å°ç¨‹åºä¸Šä½¿ç”¨ Taro.setNavigationBarTitle æ¥è®¾ç½®é¡µé¢æ ‡é¢˜ï¼ŒH5 ä½¿ç”¨ document.titleï¼Œé‚£ä¹ˆå¯ä»¥å°è£…ä¸€ä¸ª setTitle æ–¹æ³•æ¥æŠ¹å¹³ä¸¤ä¸ªå¹³å°çš„å·®å¼‚ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¢åŠ  set_title.h5.jsï¼Œä»£ç å¦‚ä¸‹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">setTitle</span> (<span class="params">title</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.title = title</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¢åŠ  set_title.weapp.jsï¼Œä»£ç å¦‚ä¸‹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Taro <span class="keyword">from</span> <span class="string">'@tarojs/taro'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">setTitle</span> (<span class="params">title</span>) </span>&#123;</span><br><span class="line">  Taro.setNavigationBarTitle(&#123;</span><br><span class="line">    title</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è°ƒç”¨</span></span><br><span class="line"><span class="keyword">import</span> setTitle <span class="keyword">from</span> <span class="string">'../utils/set_title'</span></span><br><span class="line"></span><br><span class="line">setTitle(<span class="string">'é¡µé¢æ ‡é¢˜'</span>)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¦ç‚¹</p><ul><li>ä¸åŒç«¯çš„å¯¹åº”æ–‡ä»¶ä¸€å®šè¦ç»Ÿä¸€æ¥å£ï¼Œç»Ÿä¸€è°ƒç”¨æ–¹å¼</li><li>æœ€å¥½æœ‰ä¸€ä¸ªå¹³å°æ— å…³çš„é»˜è®¤æ–‡ä»¶ï¼Œè¿™æ ·åœ¨ä½¿ç”¨ ts çš„æ—¶å€™ä¹Ÿä¸ä¼šå‡ºç°æŠ¥é”™</li><li>å¼•ç”¨æ–‡ä»¶çš„æ—¶å€™ï¼Œåªéœ€è¦å†™é»˜è®¤æ–‡ä»¶åï¼Œä¸ç”¨å¸¦æ–‡ä»¶åç¼€</li></ul><h3 id="app-js-ä¸­ä½¿ç”¨ä¸åŒçš„-pages"><a href="#app-js-ä¸­ä½¿ç”¨ä¸åŒçš„-pages" class="headerlink" title="app.js ä¸­ä½¿ç”¨ä¸åŒçš„ pages"></a>app.js ä¸­ä½¿ç”¨ä¸åŒçš„ pages</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">config: Config = </span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"pages"</span>: preval<span class="string">`</span></span><br><span class="line"><span class="string">    module.exports=(function() &#123;</span></span><br><span class="line"><span class="string">      if (process.env.TARO_ENV === 'weapp') &#123;</span></span><br><span class="line"><span class="string">        return [</span></span><br><span class="line"><span class="string">          '/pages/index/index'</span></span><br><span class="line"><span class="string">        ]</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      if (process.env.TARO_ENV === 'swan') &#123;</span></span><br><span class="line"><span class="string">        return [</span></span><br><span class="line"><span class="string">          '/pages/indexswan/indexswan'</span></span><br><span class="line"><span class="string">        ]</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;)()</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤šç«¯åŒæ­¥è°ƒè¯•"><a href="#å¤šç«¯åŒæ­¥è°ƒè¯•" class="headerlink" title="å¤šç«¯åŒæ­¥è°ƒè¯•"></a>å¤šç«¯åŒæ­¥è°ƒè¯•</h3><p>ä» 1.3.5 ç‰ˆæœ¬å¼€å§‹ï¼Œå¯ä»¥åœ¨ dist ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªä¸ç¼–è¯‘çš„ç›®æ ‡å¹³å°ååŒåçš„ç›®å½•ï¼Œå¹¶å°†ç»“æœæ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œä¾‹å¦‚ç¼–è¯‘åˆ°å¾®ä¿¡å°ç¨‹åºï¼Œæœ€ç»ˆç»“æœæ˜¯åœ¨ dist/weapp ç›®å½•ä¸‹ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå„ä¸ªå¹³å°ä½¿ç”¨ç‹¬ç«‹çš„ç›®å½•äº’ä¸å½±å“ï¼Œä»è€Œè¾¾åˆ°å¤šç«¯åŒæ­¥è°ƒè¯•çš„ç›®çš„ï¼Œåœ¨ config/index.js é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">outputRoot: <span class="string">`dist/<span class="subst">$&#123;process.env.TARO_ENV&#125;</span>`</span></span><br></pre></td></tr></table></figure><p>å¤šç«¯åŒæ­¥è°ƒè¯•éœ€è¦åœ¨ç»ˆç«¯å·¥å…·ä¸­æ‰“å¼€å¤šä¸ª Tab æ¥åŒæ—¶æ‰§è¡Œ taro å‘½ä»¤è¿›è¡ŒåŒæ­¥è°ƒè¯•ï¼Œå¦‚ä¸‹å›¾ï¼Œç¼–è¯‘æˆå¾®ä¿¡å°ç¨‹åºå’Œæ”¯ä»˜å®å°ç¨‹åºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Item1:ç»ˆç«¯çª—å£1</span></span><br><span class="line">taro build --type alipay --watch</span><br><span class="line"></span><br><span class="line"><span class="comment">// Iterm2ï¼šç»ˆç«¯çª—å£2</span></span><br><span class="line">taro build --type weapp --watch</span><br></pre></td></tr></table></figure><h3 id="å°ç¨‹åºåŸç”Ÿä½œç”¨åŸŸè·å–"><a href="#å°ç¨‹åºåŸç”Ÿä½œç”¨åŸŸè·å–" class="headerlink" title="å°ç¨‹åºåŸç”Ÿä½œç”¨åŸŸè·å–"></a>å°ç¨‹åºåŸç”Ÿä½œç”¨åŸŸè·å–</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ Taro çš„é¡µé¢å’Œç»„ä»¶ç±»ä¸­ï¼Œthis æŒ‡å‘çš„æ˜¯ Taro é¡µé¢æˆ–ç»„ä»¶çš„å®ä¾‹ï¼Œä¾‹å¦‚</span></span><br><span class="line"><span class="keyword">import</span> Taro, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@tarojs/taro'</span></span><br><span class="line"><span class="keyword">import</span> &#123; View &#125; <span class="keyword">from</span> <span class="string">'@tarojs/components'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Menu</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">    data: []</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      checked: props.checked</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillMount () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// this -&gt; ç»„ä»¶ Menu çš„å®ä¾‹</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">View</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ä¸€èˆ¬æˆ‘ä»¬éœ€è¦è·å– Taro çš„é¡µé¢å’Œç»„ä»¶æ‰€å¯¹åº”çš„å°ç¨‹åºåŸç”Ÿé¡µé¢å’Œç»„ä»¶çš„å®ä¾‹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥é€šè¿‡ this.$scope å°±èƒ½è®¿é—®åˆ°å®ƒä»¬ã€‚</p><p>æ‰€ä»¥å½“è°ƒç”¨ä¸€äº› API éœ€è¦ä¼ å…¥å°ç¨‹åºçš„é¡µé¢æˆ–è€…ç»„ä»¶å®ä¾‹æ—¶ï¼Œå¯ä»¥ç›´æ¥ä¼ å…¥ this.$scopeï¼Œä¾‹å¦‚ Taro.createCanvasContext(canvasId, this) è¿™ä¸ª APIï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯è‡ªå®šä¹‰ç»„ä»¶å®ä¾‹ thisï¼Œåœ¨ Taro ä¸­å°±å¯ä»¥å¦‚ä¸‹ä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Taro.createCanvasContext(canvasId, <span class="keyword">this</span>.$scope)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Taro&quot;&gt;&lt;a href=&quot;#Taro&quot; class=&quot;headerlink&quot; title=&quot;Taro&quot;&gt;&lt;/a&gt;Taro&lt;/h2&gt;&lt;h3 id=&quot;ç¯å¢ƒè¦æ±‚&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒè¦æ±‚&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒè¦æ±‚&quot;&gt;&lt;/a
      
    
    </summary>
    
    
    
      <category term="react" scheme="https://jacob1811.github.io/blog/tags/react/"/>
    
      <category term="Taro" scheme="https://jacob1811.github.io/blog/tags/Taro/"/>
    
  </entry>
  
  <entry>
    <title>reactç”Ÿå‘½å‘¨æœŸ</title>
    <link href="https://jacob1811.github.io/blog/2019/11/27/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
    <id>https://jacob1811.github.io/blog/2019/11/27/reactç”Ÿå‘½å‘¨æœŸ/</id>
    <published>2019-11-27T07:35:36.000Z</published>
    <updated>2019-11-27T07:39:58.874Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://juejin.im/post/5cfe5b85e51d45775a7002f1" target="_blank" rel="noopener">reactç”Ÿå‘½å‘¨æœŸ</a></p><p><a href="http://git.baijiahulian.com/chuyonghui/fe-react-life" target="_blank" rel="noopener">é¡¹ç›®ä»£ç demo</a></p><h3 id="react-ç”Ÿå‘½å‘¨æœŸ"><a href="#react-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="react ç”Ÿå‘½å‘¨æœŸ"></a>react ç”Ÿå‘½å‘¨æœŸ</h3><blockquote><p>React ä¸æ˜¯çœŸæ­£çš„DOMï¼Œè€Œæ˜¯ä¼šç”Ÿæˆè™šæ‹ŸDOMï¼Œè™šæ‹ŸDOMä¼šç»å†ä¸€ä¸ªåˆ›å»ºï¼Œæ›´æ–°ï¼Œåˆ é™¤çš„è¿‡ç¨‹ï¼›</p></blockquote><h4 id="ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š"><a href="#ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š"></a>ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š</h4><h3 id="è£…é…ï¼š"><a href="#è£…é…ï¼š" class="headerlink" title="è£…é…ï¼š"></a>è£…é…ï¼š</h3><ul><li>constructor</li><li>static getDerivedStateFromProps</li><li>componentWillMount/UNSAFF_componentWillMount</li><li>render</li><li>componentDidMount</li></ul><h3 id="æ›´æ–°ï¼š"><a href="#æ›´æ–°ï¼š" class="headerlink" title="æ›´æ–°ï¼š"></a>æ›´æ–°ï¼š</h3><ul><li>componentWillReceiveProps/UNSAFF_componentWillReceiveProps</li><li>static getDerivedStateFromProps</li><li>shouldComponentUpdate</li><li>componentWillUpdate/UNSAFF_componentWillUpdate</li><li>render</li><li>getSnapshotBeforeUpdate</li><li>componentDidUpdate</li></ul><h3 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h3><ul><li>componentWillUnmount</li></ul><h3 id="é”™è¯¯æ•è·"><a href="#é”™è¯¯æ•è·" class="headerlink" title="é”™è¯¯æ•è·"></a>é”™è¯¯æ•è·</h3><blockquote><p>çˆ¶ç»„ä»¶æ›´æ–°ä¼šå¯¼è‡´å­ç»„ä»¶æ›´æ–°</p></blockquote><blockquote><p>æ›´æ–°ä¸‰ç§æ–¹å¼ï¼šçˆ¶ç»„ä»¶æ›´æ–°ï¼›setState;forceUpdate</p></blockquote><h3 id="componentWillMount-å·¥ä½œ"><a href="#componentWillMount-å·¥ä½œ" class="headerlink" title="componentWillMount å·¥ä½œ"></a>componentWillMount å·¥ä½œ</h3><blockquote><p>å› ä¸ºæ‰§è¡Œåœ¨renderä¹‹å‰ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä½¿ç”¨setStateä¸ä¼š re-render(é‡æ–°æ¸²æŸ“)<br>server render(æœåŠ¡ç«¯æ¸²æŸ“)å”¯ä¸€ä½¿ç”¨çš„ hook (é’©å­)<br>é€šå¸¸construtorä»£æ›¿</p></blockquote><h3 id="render"><a href="#render" class="headerlink" title="render()"></a>render()</h3><h3 id="getSnapshotBeforeUpdateè­¦å‘Š"><a href="#getSnapshotBeforeUpdateè­¦å‘Š" class="headerlink" title="getSnapshotBeforeUpdateè­¦å‘Š"></a>getSnapshotBeforeUpdateè­¦å‘Š</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6n1ppwo3aj327o0ccgpo.jpg" alt=""></p><h3 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6n1tqioqjj313u0u0ad9.jpg" alt=""></p><p>forceUpdate å¼ºåˆ¶æ›´æ–°ä¸å†è¯¢é—®shouldComponentUpdateç”Ÿå‘½å‘¨æœŸ</p><p>componentWillMount/componentWillUpdate  æ”¾ç½®ajax</p><h3 id="shouldComponentUpdate-å·¥ä½œå›¾"><a href="#shouldComponentUpdate-å·¥ä½œå›¾" class="headerlink" title="shouldComponentUpdate å·¥ä½œå›¾"></a>shouldComponentUpdate å·¥ä½œå›¾</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6ok1pae8jj31dq0p6mzq.jpg" alt=""></p><p><a href="https://zh-hans.reactjs.org/docs/react-api.html#reactpurecomponent" target="_blank" rel="noopener">React.PureComponent</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******  ä¼˜åŒ–å‰  ********/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Todo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.setState(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'setting state'</span>);</span><br><span class="line">                <span class="keyword">return</span> &#123; <span class="attr">unseen</span>: <span class="string">"does not display"</span> &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'render called'</span>);</span><br><span class="line">        <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******  ä¼˜åŒ–å  ********/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Todo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.setState(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'setting state'</span>);</span><br><span class="line">                <span class="keyword">return</span> &#123; <span class="attr">unseen</span>: <span class="string">"does not display"</span> &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    shouldComponentUpdate(nextProps) &#123;</span><br><span class="line">        <span class="keyword">const</span> differentTitle = <span class="keyword">this</span>.props.title !== nextProps.title;</span><br><span class="line">        <span class="keyword">const</span> differentDone = <span class="keyword">this</span>.props.done !== nextProps.done</span><br><span class="line">        <span class="keyword">return</span> differentTitle || differentDone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'render called'</span>);</span><br><span class="line">        <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿå‘½å‘¨æœŸä¸­çš„4ä¸ªéœ€è¦æ¥æ”¶å‚æ•°å‡½æ•°"><a href="#ç”Ÿå‘½å‘¨æœŸä¸­çš„4ä¸ªéœ€è¦æ¥æ”¶å‚æ•°å‡½æ•°" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸä¸­çš„4ä¸ªéœ€è¦æ¥æ”¶å‚æ•°å‡½æ•°"></a>ç”Ÿå‘½å‘¨æœŸä¸­çš„4ä¸ªéœ€è¦æ¥æ”¶å‚æ•°å‡½æ•°</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6ok882sgbj31b20iqdjc.jpg" alt=""></p><h3 id="react17ç‰ˆæœ¬åï¼Œé™æ€æ–¹æ³•æ›¿æ¢ä¸‰ä¸ªwillç”Ÿå‘½å‘¨æœŸ"><a href="#react17ç‰ˆæœ¬åï¼Œé™æ€æ–¹æ³•æ›¿æ¢ä¸‰ä¸ªwillç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="react17ç‰ˆæœ¬åï¼Œé™æ€æ–¹æ³•æ›¿æ¢ä¸‰ä¸ªwillç”Ÿå‘½å‘¨æœŸ"></a>react17ç‰ˆæœ¬åï¼Œé™æ€æ–¹æ³•æ›¿æ¢ä¸‰ä¸ªwillç”Ÿå‘½å‘¨æœŸ</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6oknh5v4ej31o40smdjr.jpg" alt=""><br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6oky255qnj31gu0o4q5w.jpg" alt=""></p><blockquote><p>é™æ€æ–¹æ³•</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es5</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line">obj.a = <span class="number">2</span></span><br><span class="line">obj.b = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'obj.b'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Obj2</span> </span>&#123;&#125;</span><br><span class="line">Obj2.a = <span class="number">111</span></span><br><span class="line">Obj2.b = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'obj2.b'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// es6 static å¯ä»¥æ·»åŠ é™æ€æ–¹æ³•ï¼Œé™æ€å±æ€§ä¸å¯ä»¥</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Obj2</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> b()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'static.b'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Obj2.a = <span class="number">111</span></span><br></pre></td></tr></table></figure><h3 id="æ–°ç”Ÿå‘½å‘¨æœŸ"><a href="#æ–°ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="æ–°ç”Ÿå‘½å‘¨æœŸ"></a>æ–°ç”Ÿå‘½å‘¨æœŸ</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6okw4svn3j31b80u0n18.jpg" alt=""></p><h3 id="å¿«ç…§-getSnapshotBeforeUpdate"><a href="#å¿«ç…§-getSnapshotBeforeUpdate" class="headerlink" title="å¿«ç…§ getSnapshotBeforeUpdate"></a>å¿«ç…§ getSnapshotBeforeUpdate</h3><blockquote><p>æ›´æ”¹DOMä¹‹å‰ä¼šè·å–å¿«ç…§,è¿™ä¸ªæ–¹æ³•è¿”å›çš„returnå°†ä¼šä¼ é€’ç»™componentDidUpdate</p></blockquote><p><a href="https://blog.csdn.net/wust_cyl/article/details/84306393" target="_blank" rel="noopener">getSnapshotBeforeUpdateåº”ç”¨</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">this.setState((prevState)=&gt;(&#123;</span><br><span class="line">  count:prevState.count+1</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure><h3 id="ä¼˜åŒ–ç‚¹"><a href="#ä¼˜åŒ–ç‚¹" class="headerlink" title="ä¼˜åŒ–ç‚¹"></a>ä¼˜åŒ–ç‚¹</h3><ul><li>key å¯¹list ä¼˜åŒ–</li><li>å¯¹è±¡ é‡ç»˜</li><li>åŒ¿åå‡½æ•°</li><li>æ ¹èŠ‚ç‚¹å˜æ¢</li><li>æµ…æ¯”è¾ƒ PureComponent </li></ul><p>å‚è€ƒé“¾æ¥<br><a href="https://blog.csdn.net/u014744118/article/details/88925722" target="_blank" rel="noopener">React16æ€§èƒ½ä¼˜åŒ–-å®æˆ˜</a></p><p><a href="https://blog.csdn.net/weixin_41902031/article/details/80353134" target="_blank" rel="noopener">Reactå¸¸ç”¨æ€§èƒ½ä¼˜åŒ–æ–¹å¼æ•´ç†</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://juejin.im/post/5cfe5b85e51d45775a7002f1&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;reactç”Ÿå‘½å‘¨æœŸ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://git.baijiah
      
    
    </summary>
    
    
    
      <category term="react" scheme="https://jacob1811.github.io/blog/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>react-hooks</title>
    <link href="https://jacob1811.github.io/blog/2019/11/25/react-hooks/"/>
    <id>https://jacob1811.github.io/blog/2019/11/25/react-hooks/</id>
    <published>2019-11-25T03:39:05.000Z</published>
    <updated>2019-11-27T07:36:21.020Z</updated>
    
    <content type="html"><![CDATA[<h3 id="what-this-hooks"><a href="#what-this-hooks" class="headerlink" title="what this hooks"></a>what this hooks</h3><p> 2018å¹´åº•ï¼ŒFaceBookçš„Reactå°ç»„æ¨å‡ºã€‚ <code>React Hooks</code>å°±æ˜¯ç”¨å‡½æ•°çš„å½¢å¼ä»£æ›¿åŸæ¥çš„ç»§æ‰¿ç±»çš„å½¢å¼ï¼Œå¹¶ä¸”ä½¿ç”¨é¢„å‡½æ•°çš„å½¢å¼ç®¡ç†<code>state</code>ï¼Œæœ‰<code>Hooks</code>å¯ä»¥ä¸å†ä½¿ç”¨ç±»çš„å½¢å¼å®šä¹‰ç»„ä»¶äº†ã€‚è¿™æ—¶å€™ä½ çš„è®¤çŸ¥ä¹Ÿè¦å‘ç”Ÿå˜åŒ–äº†ï¼ŒåŸæ¥æŠŠç»„ä»¶åˆ†ä¸ºæœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶ï¼Œæœ‰çŠ¶æ€ç»„ä»¶ç”¨ç±»çš„å½¢å¼å£°æ˜ï¼Œæ— çŠ¶æ€ç»„ä»¶ç”¨å‡½æ•°çš„å½¢å¼å£°æ˜ã€‚é‚£ç°åœ¨æ‰€æœ‰çš„ç»„ä»¶éƒ½å¯ä»¥ç”¨å‡½æ•°æ¥å£°æ˜äº†ã€‚</p><h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir ReactHooksDemo</span><br><span class="line">cd ReactHooksDemo</span><br><span class="line">create-react-app demo01</span><br></pre></td></tr></table></figure><p>åªç•™/src/index.jsæ–‡ä»¶ï¼Œç„¶åæŠŠé‡Œè¾¹çš„ä»£ç åˆ å‡æˆä¸‹é¢çš„æ ·å­:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span>, document.getElementById('root'));</span></span><br></pre></td></tr></table></figure><p>React Hooks ç¼–å†™å½¢å¼å¯¹æ¯”</p><blockquote><p>å†™ä¸€ä¸ªæœ€ç®€å•çš„æœ‰çŠ¶ä½“ç»„ä»¶ï¼Œç‚¹æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œç‚¹å‡»æ•°é‡ä¸æ–­å¢åŠ </p></blockquote><p>åŸå§‹å†™æ³•:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Example</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123; <span class="attr">count</span>:<span class="number">0</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p&gt;åŸå§‹ï¼šYou clicked &#123;<span class="keyword">this</span>.state.count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;this.addCount.bind(this)&#125;&gt;Chlick me&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  addCount()&#123;</span></span><br><span class="line"><span class="regexp">    this.setState(&#123;count:this.state.count+1&#125;)</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>hookså†™æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [ count , setCount ] = useState(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;p&gt;hooks:You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">            &lt;button onClick=&#123;()=&gt;&#123;setCount(count+1)&#125;&#125;&gt;click me&lt;/</span>button&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default Example;</span></span><br></pre></td></tr></table></figure><p>ä»è¿™ä¸¤ä¸ªç¨‹åºçš„å¯¹æ¯”ä¸Šå¯ä»¥çœ‹å‡ºHooksæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç±»ç‰¹æ®Šçš„å‡½æ•°ï¼Œä»–ä»¬å¯ä»¥ä¸ºä½ çš„å‡½æ•°å‹ç»„ä»¶ï¼ˆfunction componentï¼‰æ³¨å…¥ä¸€äº›ç‰¹æ®Šçš„åŠŸèƒ½ã€‚è¿™å¬èµ·æ¥æœ‰ç‚¹åƒä»¥å‰Reactä¸­çš„<code>Mixins</code>å·®ä¸å¤šå“¦ã€‚å…¶å®æ˜¯ç”±å¾ˆå¤šä¸åŒï¼Œhooksçš„ç›®çš„å°±æ˜¯è®©ä½ ä¸å†å†™classï¼Œè®©functionä¸€ç»Ÿæ±Ÿæ¹–ã€‚</p><h2 id="useState-çš„ä»‹ç»å’Œå¤šçŠ¶æ€å£°æ˜"><a href="#useState-çš„ä»‹ç»å’Œå¤šçŠ¶æ€å£°æ˜" class="headerlink" title="useState çš„ä»‹ç»å’Œå¤šçŠ¶æ€å£°æ˜"></a>useState çš„ä»‹ç»å’Œå¤šçŠ¶æ€å£°æ˜</h2><blockquote><p> useState æ˜¯reactè‡ªå¸¦çš„ä¸€ä¸ªhookå‡½æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯ç”¨æ¥å£°æ˜çŠ¶æ€å˜é‡ã€‚</p></blockquote><p>é‚£æˆ‘ä»¬ä»ä¸‰ä¸ªæ–¹é¢æ¥çœ‹useStateçš„ç”¨æ³•ï¼Œåˆ†åˆ«æ˜¯å£°æ˜ã€è¯»å–ã€ä½¿ç”¨ï¼ˆä¿®æ”¹ï¼‰</p><h5 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h5><p>è§£æ„å†™æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [ count , setCount ] = useState(<span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å‡ºæ¥ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> _useState = userState(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> count = _useState[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">let</span> setCount = _useState[<span class="number">1</span>]</span><br></pre></td></tr></table></figure><blockquote><p><code>useState</code>è¿™ä¸ªå‡½æ•°æ¥æ”¶çš„å‚æ•°æ˜¯çŠ¶æ€çš„åˆå§‹å€¼(Initial state)ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„çš„ç¬¬0ä½æ˜¯å½“å‰çš„çŠ¶æ€å€¼ï¼Œç¬¬1ä½æ˜¯å¯ä»¥æ”¹å˜çŠ¶æ€å€¼çš„æ–¹æ³•å‡½æ•°ã€‚ æ‰€ä»¥ä¸Šé¢çš„ä»£ç çš„æ„æ€å°±æ˜¯å£°æ˜äº†ä¸€ä¸ªçŠ¶æ€å˜é‡ä¸º<code>count</code>ï¼Œå¹¶æŠŠå®ƒçš„åˆå§‹å€¼è®¾ä¸º0ï¼ŒåŒæ—¶æä¾›äº†ä¸€ä¸ªå¯ä»¥æ”¹å˜<code>count</code>çš„çŠ¶æ€å€¼çš„æ–¹æ³•å‡½æ•°ã€‚</p></blockquote><h5 id="è¯»å–"><a href="#è¯»å–" class="headerlink" title="è¯»å–"></a>è¯»å–</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br></pre></td></tr></table></figure><p>è¯»å–æ˜¯å¾ˆç®€å•çš„ã€‚åªè¦ä½¿ç”¨{count}å°±å¯ä»¥ï¼Œå› ä¸ºè¿™æ—¶å€™çš„countå°±æ˜¯JSé‡Œçš„ä¸€ä¸ªå˜é‡ï¼Œæƒ³åœ¨JSXä¸­ä½¿ç”¨ï¼Œå€¼ç”¨åŠ ä¸Š{}å°±å¯ä»¥</p><h5 id="æ”¹å˜"><a href="#æ”¹å˜" class="headerlink" title="æ”¹å˜"></a>æ”¹å˜</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;()=&gt;&#123;setCount(count+<span class="number">1</span>)&#125;&#125;&gt;click me&lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure><p>ç›´æ¥è°ƒç”¨setCountå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶çš„å‚æ•°æ˜¯ä¿®æ”¹è¿‡çš„æ–°çŠ¶æ€å€¼ã€‚æ¥ä¸‹æ¥çš„äº‹æƒ…å°±äº¤ç»™React,ä»–ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚Reactè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬è®°å¿†äº†ç»„ä»¶çš„ä¸Šä¸€æ¬¡çŠ¶æ€å€¼ï¼Œä½†æ˜¯è¿™ç§è®°å¿†ä¹Ÿç»™æˆ‘ä»¬å¸¦æ¥äº†ä¸€ç‚¹å°éº»çƒ¦ï¼Œä½†æ˜¯è¿™ç§éº»çƒ¦ä½ å¯ä»¥çœ‹æˆè§„åˆ™ï¼Œåªè¦å‡†å®ˆè§„åˆ™ï¼Œå°±å¯ä»¥æ„‰å¿«çš„è¿›è¡Œç¼–ç ã€‚</p><h5 id="å¤šçŠ¶æ€å£°æ˜çš„æ³¨æ„äº‹é¡¹"><a href="#å¤šçŠ¶æ€å£°æ˜çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="å¤šçŠ¶æ€å£°æ˜çš„æ³¨æ„äº‹é¡¹"></a>å¤šçŠ¶æ€å£°æ˜çš„æ³¨æ„äº‹é¡¹</h5><p>æ¯”å¦‚ç°åœ¨æˆ‘ä»¬è¦å£°æ˜å¤šä¸ªçŠ¶æ€ï¼Œæœ‰å¹´é¾„ï¼ˆageï¼‰ã€æ€§åˆ«(sex)å’Œå·¥ä½œ(work)ã€‚ä»£ç å¯ä»¥è¿™ä¹ˆå†™.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [ age , setAge ] = useState(<span class="number">18</span>)</span><br><span class="line">    <span class="keyword">const</span> [ sex , setSex ] = useState(<span class="string">'ç”·'</span>)</span><br><span class="line">    <span class="keyword">const</span> [ work , setWork ] = useState(<span class="string">'å‰ç«¯ç¨‹åºå‘˜'</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;p&gt;JSPang ä»Šå¹´:&#123;age&#125;å²&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">            &lt;p&gt;æ€§åˆ«:&#123;sex&#125;&lt;/</span>p&gt;</span><br><span class="line">            &lt;p&gt;å·¥ä½œæ˜¯:&#123;work&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">            </span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Example2;</span><br></pre></td></tr></table></figure><p>ç–‘é—®ï¼šåœ¨ä½¿ç”¨useStateçš„æ—¶å€™åªèµ‹äº†åˆå§‹å€¼ï¼Œå¹¶æ²¡æœ‰ç»‘å®šä»»ä½•çš„key,é‚£Reactæ˜¯æ€ä¹ˆä¿è¯è¿™ä¸‰ä¸ªuseStateæ‰¾åˆ°å®ƒè‡ªå·±å¯¹åº”çš„stateå‘¢ï¼Ÿ</p><h5 id="ç­”æ¡ˆæ˜¯ï¼šReactæ˜¯æ ¹æ®useStateå‡ºç°çš„é¡ºåºæ¥ç¡®å®šçš„"><a href="#ç­”æ¡ˆæ˜¯ï¼šReactæ˜¯æ ¹æ®useStateå‡ºç°çš„é¡ºåºæ¥ç¡®å®šçš„" class="headerlink" title="ç­”æ¡ˆæ˜¯ï¼šReactæ˜¯æ ¹æ®useStateå‡ºç°çš„é¡ºåºæ¥ç¡®å®šçš„"></a>ç­”æ¡ˆæ˜¯ï¼šReactæ˜¯æ ¹æ®useStateå‡ºç°çš„é¡ºåºæ¥ç¡®å®šçš„</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> showSex = <span class="literal">true</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [ age , setAge ] = useState(<span class="number">18</span>)</span><br><span class="line">    <span class="keyword">if</span>(showSex)&#123;</span><br><span class="line">        <span class="keyword">const</span> [ sex , setSex ] = useState(<span class="string">'ç”·'</span>)</span><br><span class="line">        showSex=<span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">const</span> [ work , setWork ] = useState(<span class="string">'å‰ç«¯ç¨‹åºå‘˜'</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;p&gt;JSPang ä»Šå¹´:&#123;age&#125;å²&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">            &lt;p&gt;æ€§åˆ«:&#123;sex&#125;&lt;/</span>p&gt;</span><br><span class="line">            &lt;p&gt;å·¥ä½œæ˜¯:&#123;work&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">            </span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Example2;</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™æ§åˆ¶å°å°±ä¼šç›´æ¥ç»™æˆ‘ä»¬æŠ¥é”™ï¼Œé”™è¯¯å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./src/App.js</span><br><span class="line">  Line <span class="number">7</span>:<span class="number">34</span>:   React Hook <span class="string">"useState"</span> is called conditionally. React Hooks must be called <span class="keyword">in</span> the exact same order <span class="keyword">in</span> every component render  react-hooks/rules-<span class="keyword">of</span>-hooks</span><br><span class="line">  Line <span class="number">15</span>:<span class="number">20</span>:  <span class="string">'sex'</span> is not defined</span><br></pre></td></tr></table></figure><p>æ„æ€å°±æ˜¯useStateä¸èƒ½åœ¨ifâ€¦elseâ€¦è¿™æ ·çš„æ¡ä»¶è¯­å¥ä¸­è¿›è¡Œè°ƒç”¨ï¼Œå¿…é¡»è¦æŒ‰ç…§ç›¸åŒçš„é¡ºåºè¿›è¡Œæ¸²æŸ“ã€‚å¦‚æœä½ è¿˜æ˜¯ä¸ç†è§£ï¼Œä½ å¯ä»¥è®°ä½è¿™æ ·ä¸€å¥è¯å°±å¯ä»¥äº†ï¼šå°±æ˜¯<code>React Hooksä¸èƒ½å‡ºç°åœ¨æ¡ä»¶åˆ¤æ–­è¯­å¥ä¸­ï¼Œå› ä¸ºå®ƒå¿…é¡»æœ‰å®Œå…¨ä¸€æ ·çš„æ¸²æŸ“é¡ºåº</code>ã€‚</p><h4 id="useEffectä»£æ›¿å¸¸ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°"><a href="#useEffectä»£æ›¿å¸¸ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°" class="headerlink" title="useEffectä»£æ›¿å¸¸ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°"></a>useEffectä»£æ›¿å¸¸ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°</h4><p>åœ¨ç”¨Classåˆ¶ä½œç»„ä»¶æ—¶ï¼Œç»å¸¸ä¼šç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæ¥å¤„ç†ä¸€äº›é¢å¤–çš„äº‹æƒ…ï¼ˆå‰¯ä½œç”¨ï¼šå’Œå‡½æ•°ä¸šåŠ¡ä¸»é€»è¾‘å…³è”ä¸å¤§ï¼Œç‰¹å®šæ—¶é—´æˆ–äº‹ä»¶ä¸­æ‰§è¡Œçš„åŠ¨ä½œï¼Œæ¯”å¦‚Ajaxè¯·æ±‚åç«¯æ•°æ®ï¼Œæ·»åŠ ç™»å½•ç›‘å¬å’Œå–æ¶ˆç™»å½•ï¼Œæ‰‹åŠ¨ä¿®æ”¹DOMç­‰ç­‰ï¼‰ã€‚<br>åœ¨React Hooksä¸­ä¹Ÿéœ€è¦è¿™æ ·ç±»ä¼¼çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæ¯”å¦‚åœ¨æ¯æ¬¡çŠ¶æ€ï¼ˆStateï¼‰æ›´æ–°æ—¶æ‰§è¡Œï¼Œå®ƒä¸ºæˆ‘ä»¬å‡†å¤‡äº†<code>useEffect</code>ã€‚</p><h5 id="ç”¨Classçš„æ–¹å¼ä¸ºè®¡æ•°å™¨å¢åŠ ç”Ÿå‘½å‘¨æœŸå‡½æ•°"><a href="#ç”¨Classçš„æ–¹å¼ä¸ºè®¡æ•°å™¨å¢åŠ ç”Ÿå‘½å‘¨æœŸå‡½æ•°" class="headerlink" title="ç”¨Classçš„æ–¹å¼ä¸ºè®¡æ•°å™¨å¢åŠ ç”Ÿå‘½å‘¨æœŸå‡½æ•°"></a>ç”¨Classçš„æ–¹å¼ä¸ºè®¡æ•°å™¨å¢åŠ ç”Ÿå‘½å‘¨æœŸå‡½æ•°</h5><p>ä¸ºäº†è®©ä½ æ›´å¥½çš„ç†è§£useEffectçš„ä½¿ç”¨ï¼Œå…ˆç”¨åŸå§‹çš„æ–¹å¼æŠŠè®¡æ•°å™¨çš„Demoå¢åŠ ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°componentDidMountå’ŒcomponentDidUpdateã€‚åˆ†åˆ«åœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“ååœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰“å°å‡ºè®¡æ•°å™¨ç»“æœå’Œåœ¨æ¯æ¬¡è®¡æ•°å™¨çŠ¶æ€å‘ç”Ÿå˜åŒ–åæ‰“å°å‡ºç»“æœã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example3</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props);</span><br><span class="line">        <span class="keyword">this</span>.state = &#123; <span class="attr">count</span>:<span class="number">0</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    componentDidMount()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`ComponentDidMount=&gt;You clicked <span class="subst">$&#123;<span class="keyword">this</span>.state.count&#125;</span> times`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    componentDidUpdate()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`componentDidUpdate=&gt;You clicked <span class="subst">$&#123;<span class="keyword">this</span>.state.count&#125;</span> times`</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123; </span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;p&gt;You clicked &#123;<span class="keyword">this</span>.state.count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">                &lt;button onClick=&#123;this.addCount.bind(this)&#125;&gt;Chlick me&lt;/</span>button&gt;</span><br><span class="line">            &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        );</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    addCount()&#123;</span></span><br><span class="line"><span class="regexp">        this.setState(&#123;count:this.state.count+1&#125;)</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"> </span></span><br><span class="line"><span class="regexp">export default Example3;</span></span><br></pre></td></tr></table></figure><h5 id="ç”¨useEffectå‡½æ•°æ¥ä»£æ›¿ç”Ÿå‘½å‘¨æœŸå‡½æ•°"><a href="#ç”¨useEffectå‡½æ•°æ¥ä»£æ›¿ç”Ÿå‘½å‘¨æœŸå‡½æ•°" class="headerlink" title="ç”¨useEffectå‡½æ•°æ¥ä»£æ›¿ç”Ÿå‘½å‘¨æœŸå‡½æ•°"></a>ç”¨useEffectå‡½æ•°æ¥ä»£æ›¿ç”Ÿå‘½å‘¨æœŸå‡½æ•°</h5><p>å…ˆå¼•å…¥useEffect</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState , useEffect &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [ count , setCount ] = useState(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">//---å…³é”®ä»£ç ---------start-------</span></span><br><span class="line">    useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`useEffect=&gt;You clicked <span class="subst">$&#123;count&#125;</span> times`</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//---å…³é”®ä»£ç ---------end-------</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">            &lt;button onClick=&#123;()=&gt;&#123;setCount(count+1)&#125;&#125;&gt;click me&lt;/</span>button&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default Example;</span></span><br></pre></td></tr></table></figure><p>é‚£è¿™æ®µä»£ç é€»è¾‘æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬æ¢³ç†ä¸€ä¸‹:é¦–å…ˆï¼Œæˆ‘ä»¬ç”Ÿå‘½äº†ä¸€ä¸ªçŠ¶æ€å˜é‡count,å°†å®ƒçš„åˆå§‹å€¼è®¾ä¸º0ï¼Œç„¶åæˆ‘ä»¬å‘Šè¯‰reactï¼Œæˆ‘ä»¬çš„è¿™ä¸ªç»„ä»¶æœ‰ä¸€ä¸ªå‰¯ä½œç”¨ã€‚ç»™<code>useEffecthook</code>ä¼ äº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°å°±æ˜¯æˆ‘ä»¬çš„å‰¯ä½œç”¨ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬æ‰“å°äº†ä¸€å¥è¯ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨çš„å»ä¿®æ”¹ä¸€ä¸ªDOMå…ƒç´ ã€‚å½“Reactè¦æ¸²æŸ“ç»„ä»¶æ—¶ï¼Œå®ƒä¼šè®°ä½ç”¨åˆ°çš„å‰¯ä½œç”¨ï¼Œç„¶åæ‰§è¡Œä¸€æ¬¡ã€‚ç­‰Reatæ›´æ–°äº†StateçŠ¶æ€æ—¶ï¼Œå®ƒå†ä¸€è¯æ‰§è¡Œå®šä¹‰çš„å‰¯ä½œç”¨å‡½æ•°ã€‚</p><h5 id="useEffectä¸¤ä¸ªæ³¨æ„ç‚¹"><a href="#useEffectä¸¤ä¸ªæ³¨æ„ç‚¹" class="headerlink" title="useEffectä¸¤ä¸ªæ³¨æ„ç‚¹"></a>useEffectä¸¤ä¸ªæ³¨æ„ç‚¹</h5><ol><li>Reacté¦–æ¬¡æ¸²æŸ“å’Œä¹‹åçš„æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè°ƒç”¨ä¸€éuseEffectå‡½æ•°ï¼Œè€Œä¹‹å‰æˆ‘ä»¬è¦ç”¨ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°åˆ†åˆ«è¡¨ç¤ºé¦–æ¬¡æ¸²æŸ“(<code>componentDidMonut</code>)å’Œæ›´æ–°å¯¼è‡´çš„é‡æ–°æ¸²æŸ“(<code>componentDidUpdate</code>)ã€‚</li><li>useEffectä¸­å®šä¹‰çš„å‡½æ•°çš„æ‰§è¡Œä¸ä¼šé˜»ç¢æµè§ˆå™¨æ›´æ–°è§†å›¾ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äº›å‡½æ•°æ—¶<code>å¼‚æ­¥</code>æ‰§è¡Œçš„ï¼Œè€Œ<code>componentDidMonut</code>å’Œ<code>componentDidUpdate</code>ä¸­çš„ä»£ç éƒ½æ˜¯<code>åŒæ­¥</code>æ‰§è¡Œçš„ã€‚ä¸ªäººè®¤ä¸ºè¿™ä¸ªæœ‰å¥½å¤„ä¹Ÿæœ‰åå¤„å§ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦æ ¹æ®é¡µé¢çš„å¤§å°ï¼Œç„¶åç»˜åˆ¶å½“å‰å¼¹å‡ºçª—å£çš„å¤§å°ï¼Œå¦‚æœæ—¶å¼‚æ­¥çš„å°±ä¸å¥½æ“ä½œäº†ã€‚</li></ol><h4 id="useEffect-å®ç°-componentWillUnmountç”Ÿå‘½å‘¨æœŸå‡½æ•°"><a href="#useEffect-å®ç°-componentWillUnmountç”Ÿå‘½å‘¨æœŸå‡½æ•°" class="headerlink" title="useEffect å®ç° componentWillUnmountç”Ÿå‘½å‘¨æœŸå‡½æ•°"></a>useEffect å®ç° componentWillUnmountç”Ÿå‘½å‘¨æœŸå‡½æ•°</h4><p>åœ¨ç»„ä»¶ä¸­ç»å¸¸ç”¨åˆ°componentWillUnmountç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ˆç»„ä»¶å°†è¦è¢«å¸è½½æ—¶æ‰§è¡Œï¼‰ã€‚æ¯”å¦‚æˆ‘ä»¬çš„å®šæ—¶å™¨è¦æ¸…ç©ºï¼Œé¿å…å‘ç”Ÿå†…å­˜æ³„æ¼;æ¯”å¦‚ç™»å½•çŠ¶æ€è¦å–æ¶ˆæ‰ï¼Œé¿å…ä¸‹æ¬¡è¿›å…¥ä¿¡æ¯å‡ºé”™ã€‚æ‰€ä»¥è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œè¿™èŠ‚è¯¾å°±æ¥ç”¨useEffectæ¥å®ç°è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°,å¹¶è®²è§£ä¸€ä¸‹useEffectå®¹æ˜“è¸©çš„å‘ã€‚</p><h5 id="useEffectè§£ç»‘å‰¯ä½œç”¨"><a href="#useEffectè§£ç»‘å‰¯ä½œç”¨" class="headerlink" title="useEffectè§£ç»‘å‰¯ä½œç”¨"></a>useEffectè§£ç»‘å‰¯ä½œç”¨</h5><p>å­¦ä¹ React Hooks æ—¶ï¼Œæˆ‘ä»¬è¦æ”¹æ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„æ¦‚å¿µï¼ˆäººå¾€å¾€æœ‰å…ˆå…¥ä¸ºä¸»çš„æ¯›ç—…ï¼Œæ‰€ä»¥å¾ˆéš¾æ”¹æ‰ï¼‰ï¼Œå› ä¸ºHookså«å®ƒå‰¯ä½œç”¨ï¼Œæ‰€ä»¥componentWillUnmountä¹Ÿå¯ä»¥ç†è§£æˆè§£ç»‘å‰¯ä½œç”¨ã€‚è¿™é‡Œä¸ºäº†æ¼”ç¤ºç”¨useEffectæ¥å®ç°ç±»ä¼¼componentWillUnmountæ•ˆæœï¼Œå…ˆå®‰è£…React-Routerè·¯ç”±,è¿›å…¥é¡¹ç›®æ ¹æœ¬å½•ï¼Œä½¿ç”¨npmè¿›è¡Œå®‰è£…ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save react-router-dom</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰“å¼€Example4.jsæ–‡ä»¶ï¼Œè¿›è¡Œæ”¹å†™ä»£ç ï¼Œå…ˆå¼•å…¥å¯¹åº”çš„React-Routerç»„ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; BrowserRouter <span class="keyword">as</span> Router, Route, Link &#125; <span class="keyword">from</span> <span class="string">"react-router-dom"</span></span><br></pre></td></tr></table></figure><p>ç¼–å†™ä¸¤ä¸ªæ–°ç»„ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Index</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>JSPang.com<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">List</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>List-Page<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™ä¸¤ä¸ªç»„ä»¶åï¼Œæ¥ä¸‹æ¥å¯ä»¥ç¼–å†™è·¯ç”±é…ç½®ï¼Œåœ¨ä»¥å‰çš„è®¡æ•°å™¨ä»£ç ä¸­ç›´æ¥å¢åŠ å°±å¯ä»¥äº†ã€‚<br>ç„¶ååˆ°æµè§ˆå™¨ä¸­æŸ¥çœ‹ä¸€ä¸‹ï¼Œçœ‹çœ‹ç»„ä»¶å’Œè·¯ç”±æ˜¯å¦å¯ç”¨ã€‚å¦‚æœå¯ç”¨ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥è°ƒæ•´useEffectäº†ã€‚åœ¨ä¸¤ä¸ªæ–°ç»„ä»¶ä¸­åˆ†åˆ«åŠ å…¥useEffect()å‡½æ•°:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Index</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'useEffect=&gt;è€å¼Ÿï¼Œä½ æ¥äº†ï¼Indexé¡µé¢'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>JSPang.com<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">List</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'useEffect=&gt;è€å¼Ÿï¼Œä½ æ¥äº†ï¼Listé¡µé¢'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>List-Page<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™æˆ‘ä»¬ç‚¹å‡»Linkè¿›å…¥ä»»ä½•ä¸€ä¸ªç»„ä»¶ï¼Œåœ¨æµè§ˆå™¨ä¸­éƒ½ä¼šæ‰“å°å‡ºå¯¹åº”çš„ä¸€æ®µè¯ã€‚è¿™æ—¶å€™å¯ä»¥ç”¨è¿”å›ä¸€ä¸ªå‡½æ•°çš„å½¢å¼è¿›è¡Œè§£ç»‘ï¼Œä»£ç å¦‚ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Index</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'useEffect=&gt;è€å¼Ÿä½ æ¥äº†ï¼Indexé¡µé¢'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'è€å¼Ÿï¼Œä½ èµ°äº†!Indexé¡µé¢'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>JSPang.com<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ä½ åœ¨æµè§ˆå™¨ä¸­é¢„è§ˆï¼Œæˆ‘ä»¬ä»¿ä½›å®ç°äº†componentWillUnmountæ–¹æ³•ã€‚ä½†è¿™åªæ˜¯å¥½åƒå®ç°äº†ï¼Œå½“ç‚¹å‡»è®¡æ•°å™¨æŒ‰é’®æ—¶ï¼Œä½ ä¼šå‘ç°è€å¼Ÿï¼Œä½ èµ°äº†!Indexé¡µé¢ï¼Œä¹Ÿå‡ºç°äº†ã€‚è¿™åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹é‚£ï¼Ÿå…¶å®æ¯æ¬¡çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼ŒuseEffectéƒ½è¿›è¡Œäº†è§£ç»‘ã€‚</p><h5 id="useEffectçš„ç¬¬äºŒä¸ªå‚æ•°"><a href="#useEffectçš„ç¬¬äºŒä¸ªå‚æ•°" class="headerlink" title="useEffectçš„ç¬¬äºŒä¸ªå‚æ•°"></a>useEffectçš„ç¬¬äºŒä¸ªå‚æ•°</h5><p>é‚£åˆ°åº•è¦å¦‚ä½•å®ç°ç±»ä¼¼componentWillUnmountçš„æ•ˆæœé‚£?è¿™å°±éœ€è¦è¯·å‡ºuseEffectçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­å¯ä»¥å†™å…¥å¾ˆå¤šçŠ¶æ€å¯¹åº”çš„å˜é‡ï¼Œæ„æ€æ˜¯å½“çŠ¶æ€å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬æ‰è¿›è¡Œè§£ç»‘ã€‚ä½†æ˜¯å½“ä¼ ç©ºæ•°ç»„[]æ—¶ï¼Œå°±æ˜¯å½“ç»„ä»¶å°†è¢«é”€æ¯æ—¶æ‰è¿›è¡Œè§£ç»‘ï¼Œè¿™ä¹Ÿå°±å®ç°äº†componentWillUnmountçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Index</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'useEffect=&gt;è€å¼Ÿä½ æ¥äº†ï¼Indexé¡µé¢'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'è€å¼Ÿï¼Œä½ èµ°äº†!Indexé¡µé¢'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,[])</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>JSPang.com<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ›´åŠ æ·±å…¥äº†è§£ç¬¬äºŒä¸ªå‚æ•°çš„ä½œç”¨ï¼ŒæŠŠè®¡æ•°å™¨çš„ä»£ç ä¹ŸåŠ ä¸ŠuseEffectå’Œè§£ç»‘æ–¹æ³•ï¼Œå¹¶åŠ å…¥ç¬¬äºŒä¸ªå‚æ•°ä¸ºç©ºæ•°ç»„ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [ count , setCount ] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`useEffect=&gt;You clicked <span class="subst">$&#123;count&#125;</span> times`</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'===================='</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,[])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">            &lt;button onClick=&#123;()=&gt;&#123;setCount(count+1)&#125;&#125;&gt;click me&lt;/</span>button&gt;</span><br><span class="line"></span><br><span class="line">            &lt;Router&gt;</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    &lt;li&gt; <span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">"/"</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span> <span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">                    &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">"/list/"</span>&gt;</span>åˆ—è¡¨<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span> <span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">                &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">                &lt;Route path="/</span><span class="string">" exact component=&#123;Index&#125; /&gt;</span></span><br><span class="line"><span class="string">                &lt;Route path="</span>/list/<span class="string">" component=&#123;List&#125; /&gt;</span></span><br><span class="line"><span class="string">            &lt;/Router&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™çš„ä»£ç æ˜¯ä¸èƒ½æ‰§è¡Œè§£ç»‘å‰¯ä½œç”¨å‡½æ•°çš„ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³æ¯æ¬¡countå‘ç”Ÿå˜åŒ–ï¼Œæˆ‘ä»¬éƒ½è¿›è¡Œè§£ç»‘ï¼Œåªéœ€è¦åœ¨ç¬¬äºŒä¸ªå‚æ•°çš„æ•°ç»„é‡ŒåŠ å…¥countå˜é‡å°±å¯ä»¥äº†ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [ count , setCount ] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`useEffect=&gt;You clicked <span class="subst">$&#123;count&#125;</span> times`</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'===================='</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,[count])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">            &lt;button onClick=&#123;()=&gt;&#123;setCount(count+1)&#125;&#125;&gt;click me&lt;/</span>button&gt;</span><br><span class="line"></span><br><span class="line">            &lt;Router&gt;</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    &lt;li&gt; <span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">"/"</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span> <span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">                    &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">"/list/"</span>&gt;</span>åˆ—è¡¨<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span> <span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">                &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">                &lt;Route path="/</span><span class="string">" exact component=&#123;Index&#125; /&gt;</span></span><br><span class="line"><span class="string">                &lt;Route path="</span>/list/<span class="string">" component=&#123;List&#125; /&gt;</span></span><br><span class="line"><span class="string">            &lt;/Router&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™åªè¦countçŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œéƒ½ä¼šæ‰§è¡Œè§£ç»‘å‰¯ä½œç”¨å‡½æ•°ï¼Œæµè§ˆå™¨çš„æ§åˆ¶å°ä¹Ÿå°±æ‰“å°å‡ºäº†ä¸€ä¸²=================ã€‚</p><h4 id="useContext-è®©çˆ¶å­ç»„ä»¶ä¼ å€¼æ›´ç®€å•"><a href="#useContext-è®©çˆ¶å­ç»„ä»¶ä¼ å€¼æ›´ç®€å•" class="headerlink" title="useContext è®©çˆ¶å­ç»„ä»¶ä¼ å€¼æ›´ç®€å•"></a>useContext è®©çˆ¶å­ç»„ä»¶ä¼ å€¼æ›´ç®€å•</h4><p>åœ¨ç”¨ç±»å£°æ˜ç»„ä»¶æ—¶ï¼Œçˆ¶å­ç»„ä»¶çš„ä¼ å€¼æ˜¯é€šè¿‡ç»„ä»¶å±æ€§å’Œ<code>props</code>è¿›è¡Œçš„ï¼Œé‚£ç°åœ¨ä½¿ç”¨æ–¹æ³•(Function)æ¥å£°æ˜ç»„ä»¶ï¼Œå·²ç»æ²¡æœ‰äº†<code>constructor</code>æ„é€ å‡½æ•°ä¹Ÿå°±æ²¡æœ‰äº†propsçš„æ¥æ”¶ï¼Œé‚£çˆ¶å­ç»„ä»¶çš„ä¼ å€¼å°±æˆäº†ä¸€ä¸ªé—®é¢˜ã€‚React Hooks ä¸ºæˆ‘ä»¬å‡†å¤‡äº†<code>useContext</code>ã€‚è¿™èŠ‚è¯¾å°±å­¦ä¹ ä¸€ä¸‹useContextï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬è·¨è¶Šç»„ä»¶å±‚çº§ç›´æ¥ä¼ é€’å˜é‡ï¼Œå®ç°å…±äº«ã€‚éœ€è¦æ³¨æ„çš„æ˜¯<code>useContext</code>å’Œ<code>redux</code>çš„ä½œç”¨æ˜¯ä¸åŒçš„ï¼Œä¸€ä¸ªè§£å†³çš„æ˜¯ç»„ä»¶ä¹‹é—´å€¼ä¼ é€’çš„é—®é¢˜ï¼Œä¸€ä¸ªæ˜¯åº”ç”¨ä¸­ç»Ÿä¸€ç®¡ç†çŠ¶æ€çš„é—®é¢˜ï¼Œä½†é€šè¿‡å’ŒuseReducerçš„é…åˆä½¿ç”¨ï¼Œå¯ä»¥å®ç°ç±»ä¼¼Reduxçš„ä½œç”¨ã€‚</p><blockquote><p>Contextçš„ä½œç”¨å°±æ˜¯å¯¹å®ƒæ‰€åŒ…å«çš„ç»„ä»¶æ ‘æä¾›å…¨å±€å…±äº«æ•°æ®çš„ä¸€ç§æŠ€æœ¯ã€‚</p></blockquote><h5 id="createContext-å‡½æ•°åˆ›å»ºcontext"><a href="#createContext-å‡½æ•°åˆ›å»ºcontext" class="headerlink" title="createContext å‡½æ•°åˆ›å»ºcontext"></a>createContext å‡½æ•°åˆ›å»ºcontext</h5><p>ä½¿ç”¨è®¡æ•°å™¨ä»£ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState  &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example6</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [ count , setCount ] = useState(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">            &lt;button onClick=&#123;()=&gt;&#123;setCount(count+1)&#125;&#125;&gt;click me&lt;/</span>button&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default Example6;</span></span><br></pre></td></tr></table></figure><p>å¼•å…¥createContextå‡½æ•°ï¼Œå¹¶ä½¿ç”¨å¾—åˆ°ä¸€ä¸ªç»„ä»¶ï¼Œç„¶ååœ¨returnæ–¹æ³•ä¸­è¿›è¡Œä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState , createContext &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="comment">//===å…³é”®ä»£ç </span></span><br><span class="line"><span class="keyword">const</span> CountContext = createContext()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example6</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [ count , setCount ] = useState(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">        &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;()=&gt;&#123;setCount(count+1)&#125;&#125;&gt;click me&lt;/</span>button&gt;</span><br><span class="line">        &#123;<span class="comment">/*======å…³é”®ä»£ç  */</span>&#125;</span><br><span class="line">        &lt;CountContext.Provider value=&#123;count&#125;&gt;</span><br><span class="line">        &lt;<span class="regexp">/CountContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Example6;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å°±ç›¸å½“äºæŠŠcountå˜é‡å…è®¸è·¨å±‚çº§å®ç°ä¼ é€’å’Œä½¿ç”¨äº†ï¼ˆä¹Ÿå°±æ˜¯å®ç°äº†ä¸Šä¸‹æ–‡ï¼‰ï¼Œå½“çˆ¶ç»„ä»¶çš„countå˜é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå­ç»„ä»¶ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±çœ‹çœ‹ä¸€ä¸ªReact Hooksçš„ç»„ä»¶å¦‚ä½•æ¥æ”¶åˆ°è¿™ä¸ªå˜é‡ã€‚</p><h5 id="useContext-æ¥æ”¶ä¸Šä¸‹æ–‡å˜é‡"><a href="#useContext-æ¥æ”¶ä¸Šä¸‹æ–‡å˜é‡" class="headerlink" title="useContext æ¥æ”¶ä¸Šä¸‹æ–‡å˜é‡"></a>useContext æ¥æ”¶ä¸Šä¸‹æ–‡å˜é‡</h5><p>å·²ç»æœ‰äº†ä¸Šä¸‹æ–‡å˜é‡ï¼Œå‰©ä¸‹çš„å°±æ—¶å¦‚ä½•æ¥æ”¶äº†ï¼Œæ¥æ”¶è¿™ä¸ªç›´æ¥ä½¿ç”¨useContextå°±å¯ä»¥ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨å‰éœ€è¦æ–°è¿›è¡Œå¼•å…¥useContextï¼ˆä¸å¼•å…¥æ˜¯æ²¡åŠæ³•ä½¿ç”¨çš„ï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState , createContext , useContext &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br></pre></td></tr></table></figure><p>å¼•å…¥åå†™ä¸€ä¸ªCounterç»„ä»¶ï¼Œåªæ˜¯æ˜¾ç¤ºä¸Šä¸‹æ–‡ä¸­çš„countå˜é‡ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> count = useContext(CountContext)  <span class="comment">//ä¸€å¥è¯å°±å¯ä»¥å¾—åˆ°count</span></span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥ä½¿ç”¨äº†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;CountContext.Provider value=&#123;count&#125;&gt;</span><br><span class="line">    &lt;Counter /&gt;</span><br><span class="line">&lt;<span class="regexp">/CountContext.Provider&gt;</span></span><br></pre></td></tr></table></figure><p>å®Œæ•´ä»£ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState , createContext ,useContext&#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="comment">//===å…³é”®ä»£ç </span></span><br><span class="line"><span class="keyword">const</span> CountContext = createContext()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> count = useContext(CountContext)  <span class="comment">//ä¸€å¥è¯å°±å¯ä»¥å¾—åˆ°count</span></span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example6</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [ count , setCount ] = useState(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">        &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;()=&gt;&#123;setCount(count+1)&#125;&#125;&gt;click me&lt;/</span>button&gt;</span><br><span class="line">        &#123;<span class="comment">/*======å…³é”®ä»£ç  */</span>&#125;</span><br><span class="line">        &lt;CountContext.Provider value=&#123;count&#125;&gt;</span><br><span class="line">            &lt;Counter /&gt;</span><br><span class="line">        &lt;<span class="regexp">/CountContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Example6;</span><br></pre></td></tr></table></figure><h4 id="useReducerä»‹ç»å’Œç®€å•ä½¿ç”¨"><a href="#useReducerä»‹ç»å’Œç®€å•ä½¿ç”¨" class="headerlink" title=":useReducerä»‹ç»å’Œç®€å•ä½¿ç”¨"></a>:useReducerä»‹ç»å’Œç®€å•ä½¿ç”¨</h4><h6 id="reduceråˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#reduceråˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="reduceråˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ"></a>reduceråˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h6><p>ä¸ºäº†æ›´å¥½çš„ç†è§£useReducerï¼Œæ‰€ä»¥å…ˆè¦äº†è§£JavaScripté‡Œçš„Redcueræ˜¯ä»€ä¹ˆã€‚å®ƒçš„å…´èµ·æ˜¯ä»Reduxå¹¿æ³›ä½¿ç”¨å¼€å§‹çš„ï¼Œä½†ä¸ä»…ä»…å­˜åœ¨Reduxä¸­ï¼Œå¯ä»¥ä½¿ç”¨å†ˆçš„JavaScriptæ¥å®ŒæˆReduceræ“ä½œã€‚é‚£reducerå…¶å®å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯çŠ¶æ€ï¼Œä¸€ä¸ªç”¨æ¥æ§åˆ¶ä¸šåŠ¡é€»è¾‘çš„åˆ¤æ–­å‚æ•°ã€‚æˆ‘ä»¬ä¸¾ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countReducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(action.type) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'add'</span>:</span><br><span class="line">            <span class="keyword">return</span> state + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'sub'</span>:</span><br><span class="line">            <span class="keyword">return</span> state - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">default</span>: </span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å°±æ˜¯Reducerï¼Œä½ ä¸»è¦ç†è§£çš„å°±æ˜¯è¿™ç§å½¢å¼å’Œä¸¤ä¸ªå‚æ•°çš„ä½œç”¨ï¼Œä¸€ä¸ªå‚æ•°æ˜¯çŠ¶æ€ï¼Œä¸€ä¸ªå‚æ•°æ˜¯å¦‚ä½•æ§åˆ¶çŠ¶æ€ã€‚</p><h5 id="useReducerçš„ä½¿ç”¨"><a href="#useReducerçš„ä½¿ç”¨" class="headerlink" title="useReducerçš„ä½¿ç”¨"></a>useReducerçš„ä½¿ç”¨</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example7</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [ count , dispatch ] =useReducer(<span class="function">(<span class="params">state,action</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">switch</span>(action)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'add'</span>:</span><br><span class="line">                <span class="keyword">return</span> state+<span class="number">1</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">'sub'</span>:</span><br><span class="line">                <span class="keyword">return</span> state<span class="number">-1</span></span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> state</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">       &lt;div&gt;</span><br><span class="line">           &lt;h2&gt;ç°åœ¨çš„åˆ†æ•°æ˜¯&#123;count&#125;&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">           &lt;button onClick=&#123;()=&gt;dispatch('add')&#125;&gt;Increment&lt;/</span>button&gt;</span><br><span class="line">           &lt;button onClick=&#123;()=&gt;dispatch(<span class="string">'sub'</span>)&#125;&gt;Decrement&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">       &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Example7</span><br></pre></td></tr></table></figure><h4 id="useReducerä»£æ›¿Reduxå°æ¡ˆä¾‹-1"><a href="#useReducerä»£æ›¿Reduxå°æ¡ˆä¾‹-1" class="headerlink" title="useReducerä»£æ›¿Reduxå°æ¡ˆä¾‹-1"></a>useReducerä»£æ›¿Reduxå°æ¡ˆä¾‹-1</h4><h5 id="ç†è®ºä¸Šçš„å¯è¡Œæ€§"><a href="#ç†è®ºä¸Šçš„å¯è¡Œæ€§" class="headerlink" title="ç†è®ºä¸Šçš„å¯è¡Œæ€§"></a>ç†è®ºä¸Šçš„å¯è¡Œæ€§</h5><p><code>useContext</code>ï¼š(çŠ¶æ€å…±äº«)å¯è®¿é—®å…¨å±€çŠ¶æ€ï¼Œé¿å…ä¸€å±‚å±‚çš„ä¼ é€’çŠ¶æ€ã€‚è¿™ç¬¦åˆReduxå…¶ä¸­çš„ä¸€é¡¹è§„åˆ™ï¼Œå°±æ˜¯çŠ¶æ€å…¨å±€åŒ–ï¼Œå¹¶èƒ½ç»Ÿä¸€ç®¡ç†ã€‚</p><p><code>useReducer</code>ï¼š(æ§åˆ¶ä¸šåŠ¡é€»è¾‘)é€šè¿‡actionçš„ä¼ é€’ï¼Œæ›´æ–°å¤æ‚é€»è¾‘çš„çŠ¶æ€ï¼Œä¸»è¦æ˜¯å¯ä»¥å®ç°ç±»ä¼¼Reduxä¸­çš„Reduceréƒ¨åˆ†ï¼Œå®ç°ä¸šåŠ¡é€»è¾‘çš„å¯è¡Œæ€§ã€‚</p><h5 id="ç¼–å†™åŸºæœ¬UIç»„ä»¶"><a href="#ç¼–å†™åŸºæœ¬UIç»„ä»¶" class="headerlink" title="ç¼–å†™åŸºæœ¬UIç»„ä»¶"></a>ç¼–å†™åŸºæœ¬UIç»„ä»¶</h5><p>src/reducerPage/showArea.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ShowArea</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;color:</span>'<span class="attr">blue</span>'&#125;&#125;&gt;</span>å­—ä½“é¢œè‰²ä¸ºblue<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ShowArea</span><br></pre></td></tr></table></figure><p>src/reducerPage/Buttons.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Buttons</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;button&gt;çº¢è‰²&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;button&gt;é»„è‰²&lt;/</span>button&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Buttons</span></span><br></pre></td></tr></table></figure><p>src/reducerPage/reducerPage.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ShowArea <span class="keyword">from</span> <span class="string">'./ShowArea'</span>;</span><br><span class="line"><span class="keyword">import</span> Buttons <span class="keyword">from</span> <span class="string">'./Buttons'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ReducerPage</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">                &lt;ShowArea /&gt;</span><br><span class="line">                &lt;Buttons /&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default ReducerPage</span></span><br></pre></td></tr></table></figure><p>index ä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> ReducerPage <span class="keyword">from</span> <span class="string">'./ReducerPage/ReducerPage'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">ReducerPage</span> /&gt;</span>, document.getElementById('root'));</span></span><br></pre></td></tr></table></figure><h5 id="ç¼–å†™é¢œè‰²å…±äº«ç»„ä»¶color-js"><a href="#ç¼–å†™é¢œè‰²å…±äº«ç»„ä»¶color-js" class="headerlink" title="ç¼–å†™é¢œè‰²å…±äº«ç»„ä»¶color.js"></a>ç¼–å†™é¢œè‰²å…±äº«ç»„ä»¶color.js</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; createContext &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ColorContext = createContext(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Color = <span class="function"><span class="params">props</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;ColorContext.Provider value=&#123;&#123;<span class="attr">color</span>:<span class="string">"blue"</span>&#125;&#125;&gt;</span><br><span class="line">            &#123;props.children&#125;</span><br><span class="line">        &lt;<span class="regexp">/ColorContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>ä»£ç ä¸­å¼•å…¥äº†createContextç”¨æ¥åˆ›å»ºå…±äº«ä¸Šä¸‹æ–‡ColorContextç»„ä»¶ï¼Œç„¶åæˆ‘ä»¬è¦ç”¨{props.children}æ¥æ˜¾ç¤ºå¯¹åº”çš„å­ç»„ä»¶ã€‚è¯¦ç»†è§£é‡Šæˆ‘åœ¨è§†é¢‘ä¸­è®²è§£å§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ShowArea <span class="keyword">from</span> <span class="string">'./ShowArea'</span>;</span><br><span class="line"><span class="keyword">import</span> Buttons <span class="keyword">from</span> <span class="string">'./Buttons'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Color &#125; <span class="keyword">from</span> <span class="string">'./color'</span>;   <span class="comment">//å¼•å…¥Colorç»„ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ReducerPage</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;Color&gt;</span><br><span class="line">                &lt;ShowArea /&gt;</span><br><span class="line">                &lt;Buttons /&gt;</span><br><span class="line">            &lt;<span class="regexp">/Color&gt;</span></span><br><span class="line"><span class="regexp">            </span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ReducerPage</span><br></pre></td></tr></table></figure><p>ç„¶åå†æ”¹å†™showArea.jsæ–‡ä»¶ï¼Œæˆ‘ä»¬ä¼šå¼•å…¥useContextå’Œåœ¨color.jsä¸­å£°æ˜çš„ColorContextï¼Œè®©ç»„ä»¶å¯ä»¥æ¥æ”¶å…¨å±€å˜é‡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React , &#123; useContext &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ColorContext &#125; <span class="keyword">from</span> <span class="string">'./color'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ShowArea</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;color&#125; = useContext(ColorContext)</span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;color:color&#125;&#125;</span>&gt;</span>å­—ä½“é¢œè‰²ä¸º&#123;color&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ShowArea</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™å°±é€šè¿‡useContextå®ç°äº†çŠ¶æ€çš„å…±äº«ï¼Œå¯ä»¥åˆ°æµè§ˆå™¨ä¸­çœ‹ä¸€ä¸‹æ•ˆæœã€‚ç„¶åæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†å®ç°å¤æ‚é€»è¾‘çŠ¶æ€çš„å˜åŒ–ã€‚</p><h4 id="useReducerä»£æ›¿Reduxå°æ¡ˆä¾‹-2"><a href="#useReducerä»£æ›¿Reduxå°æ¡ˆä¾‹-2" class="headerlink" title="useReducerä»£æ›¿Reduxå°æ¡ˆä¾‹-2"></a>useReducerä»£æ›¿Reduxå°æ¡ˆä¾‹-2</h4><h5 id="åœ¨color-jsä¸­æ·»åŠ Reducer"><a href="#åœ¨color-jsä¸­æ·»åŠ Reducer" class="headerlink" title="åœ¨color.jsä¸­æ·»åŠ Reducer"></a>åœ¨color.jsä¸­æ·»åŠ Reducer</h5><p>é¢œè‰²ï¼ˆstateï¼‰ç®¡ç†çš„ä»£ç æˆ‘ä»¬éƒ½æ”¾åœ¨äº†color.jsä¸­ï¼Œæ‰€ä»¥åœ¨æ–‡ä»¶é‡Œæ·»åŠ ä¸€ä¸ªreducerï¼Œç”¨äºå¤„ç†é¢œè‰²æ›´æ–°çš„é€»è¾‘ã€‚å…ˆå£°æ˜ä¸€ä¸ªreducerçš„å‡½æ•°ï¼Œå®ƒå°±æ˜¯JavaScriptä¸­çš„æ™®é€šå‡½æ•°ï¼Œåœ¨è®²useReducerçš„æ—¶å€™å·²ç»è¯¦ç»†è®²è¿‡äº†ã€‚æœ‰äº†reduceråï¼Œåœ¨Colorç»„ä»¶é‡Œä½¿ç”¨useReducer,è¿™æ ·Colorç»„ä»¶å°±æœ‰äº†é‚£ä¸ªå…±äº«çŠ¶æ€å’Œå¤„ç†ä¸šåŠ¡é€»è¾‘çš„èƒ½åŠ›ï¼Œè·Ÿä»¥å‰ä½¿ç”¨çš„Reduxå‡ ä¹ä¸€æ ·äº†ã€‚ä¹‹åä¿®æ”¹ä¸€ä¸‹å…±äº«çŠ¶æ€ã€‚æˆ‘ä»¬æ¥çœ‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; createContext,useReducer &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ColorContext = createContext(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> UPDATE_COLOR = <span class="string">"UPDATE_COLOR"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reducer= <span class="function">(<span class="params">state,action</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(action.type)&#123;</span><br><span class="line">        <span class="keyword">case</span> UPDATE_COLOR:</span><br><span class="line">            <span class="keyword">return</span> action.color</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Color = <span class="function"><span class="params">props</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [color,dispatch]=useReducer(reducer,<span class="string">'blue'</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;ColorContext.Provider value=&#123;&#123;color,dispatch&#125;&#125;&gt;</span><br><span class="line">            &#123;props.children&#125;</span><br><span class="line">        &lt;<span class="regexp">/ColorContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å…±äº«å‡ºå»çš„çŠ¶æ€å˜æˆäº†colorå’Œdispatch,å¦‚æœä¸å…±äº«å‡ºå»dispatchï¼Œä½ æ˜¯æ²¡åŠæ³•å®ŒæˆæŒ‰é’®çš„ç›¸åº”äº‹ä»¶çš„ã€‚</p><h5 id="é€šè¿‡dispatchä¿®æ”¹çŠ¶æ€"><a href="#é€šè¿‡dispatchä¿®æ”¹çŠ¶æ€" class="headerlink" title="é€šè¿‡dispatchä¿®æ”¹çŠ¶æ€"></a>é€šè¿‡dispatchä¿®æ”¹çŠ¶æ€</h5><p>ç›®å‰ç¨‹åºå·²ç»æœ‰äº†å¤„ç†å…±äº«çŠ¶æ€çš„ä¸šåŠ¡é€»è¾‘èƒ½åŠ›ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥åœ¨buttons.jsä½¿ç”¨dispatchæ¥å®ŒæˆæŒ‰é’®çš„ç›¸åº”æ“ä½œäº†ã€‚å…ˆå¼•å…¥useContextã€ColorContextå’ŒUPDATE_COLORï¼Œç„¶åå†™onClickäº‹ä»¶å°±å¯ä»¥äº†ã€‚ä»£ç å¦‚ä¸‹:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React ,&#123;useContext&#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;ColorContext,UPDATE_COLOR&#125; <span class="keyword">from</span> <span class="string">'./color'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Buttons</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; dispatch &#125; = useContext(ColorContext)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;button onClick=&#123;()=&gt;&#123;dispatch(&#123;<span class="attr">type</span>:UPDATE_COLOR,<span class="attr">color</span>:<span class="string">"red"</span>&#125;)&#125;&#125;&gt;çº¢è‰²&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;button onClick=&#123;()=&gt;&#123;dispatch(&#123;type:UPDATE_COLOR,color:"yellow"&#125;)&#125;&#125;&gt;é»„è‰²&lt;/</span>button&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Buttons</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·ä»£ç å°±ç¼–å†™å®Œæˆäº†ï¼Œç”¨useContextå’ŒuseReducerå®ç°äº†Reduxçš„æ•ˆæœ</p><h4 id="useMemoä¼˜åŒ–React-Hooksç¨‹åºæ€§èƒ½"><a href="#useMemoä¼˜åŒ–React-Hooksç¨‹åºæ€§èƒ½" class="headerlink" title="useMemoä¼˜åŒ–React Hooksç¨‹åºæ€§èƒ½"></a>useMemoä¼˜åŒ–React Hooksç¨‹åºæ€§èƒ½</h4><p>useMemoä¸»è¦ç”¨æ¥è§£å†³ä½¿ç”¨React hooksäº§ç”Ÿçš„æ— ç”¨æ¸²æŸ“çš„æ€§èƒ½é—®é¢˜ã€‚ä½¿ç”¨functionçš„å½¢å¼æ¥å£°æ˜ç»„ä»¶ï¼Œå¤±å»äº†shouldCompnentUpdateï¼ˆåœ¨ç»„ä»¶æ›´æ–°ä¹‹å‰ï¼‰è¿™ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ²¡æœ‰åŠæ³•é€šè¿‡ç»„ä»¶æ›´æ–°å‰æ¡ä»¶æ¥å†³å®šç»„ä»¶æ˜¯å¦æ›´æ–°ã€‚è€Œä¸”åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œä¹Ÿä¸å†åŒºåˆ†mountå’Œupdateä¸¤ä¸ªçŠ¶æ€ï¼Œè¿™æ„å‘³ç€å‡½æ•°ç»„ä»¶çš„æ¯ä¸€æ¬¡è°ƒç”¨éƒ½ä¼šæ‰§è¡Œå†…éƒ¨çš„æ‰€æœ‰é€»è¾‘ï¼Œå°±å¸¦æ¥äº†éå¸¸å¤§çš„æ€§èƒ½æŸè€—ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React , &#123;useState,useMemo&#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example7</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [xiaohong , setXiaohong] = useState(<span class="string">'å°çº¢å¾…å®¢çŠ¶æ€'</span>)</span><br><span class="line">    <span class="keyword">const</span> [zhiling , setZhiling] = useState(<span class="string">'å¿—ç²å¾…å®¢çŠ¶æ€'</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;button onClick=&#123;()=&gt;&#123;setXiaohong(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime())&#125;&#125;&gt;å°çº¢&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;button onClick=&#123;()=&gt;&#123;setZhiling(new Date().getTime()+',å¿—ç²å‘æˆ‘ä»¬èµ°æ¥äº†')&#125;&#125;&gt;å¿—ç²&lt;/</span>button&gt;</span><br><span class="line">            &lt;ChildComponent name=&#123;xiaohong&#125;&gt;&#123;zhiling&#125;&lt;<span class="regexp">/ChildComponent&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çˆ¶ç»„ä»¶è°ƒç”¨äº†å­ç»„ä»¶ï¼Œå­ç»„ä»¶æˆ‘ä»¬è¾“å‡ºä¸¤ä¸ªå§‘å¨˜çš„çŠ¶æ€ï¼Œæ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ChildComponent</span>(<span class="params">&#123;name,children&#125;</span>)</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">changeXiaohong</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'å¥¹æ¥äº†ï¼Œå¥¹æ¥äº†ã€‚å°çº¢å‘æˆ‘ä»¬èµ°æ¥äº†'</span>)</span><br><span class="line">        <span class="keyword">return</span> name+<span class="string">',å°çº¢å‘æˆ‘ä»¬èµ°æ¥äº†'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> actionXiaohong = changeXiaohong(name)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;div&gt;&#123;actionXiaohong&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">            &lt;div&gt;&#123;children&#125;&lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ä½ ä¼šå‘ç°åœ¨æµè§ˆå™¨ä¸­ç‚¹å‡»å¿—ç²æŒ‰é’®ï¼Œå°çº¢å¯¹åº”çš„æ–¹æ³•éƒ½ä¼šæ‰§è¡Œï¼Œç»“æœè™½ç„¶æ²¡å˜ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½æ‰§è¡Œï¼Œè¿™å°±æ˜¯æ€§èƒ½çš„æŸè€—ã€‚ç›®å‰åªæœ‰å­ç»„ä»¶ï¼Œä¸šåŠ¡é€»è¾‘ä¹Ÿéå¸¸ç®€å•ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªåå°æŸ¥è¯¢ï¼Œè¿™å°†äº§ç”Ÿä¸¥é‡çš„åæœã€‚æ‰€ä»¥è¿™ä¸ªé—®é¢˜å¿…é¡»è§£å†³ã€‚å½“æˆ‘ä»¬ç‚¹å‡»å¿—ç²æŒ‰é’®æ—¶ï¼Œå°çº¢å¯¹åº”çš„changeXiaohongæ–¹æ³•ä¸èƒ½æ‰§è¡Œï¼Œåªæœ‰åœ¨ç‚¹å‡»å°çº¢æŒ‰é’®æ—¶æ‰èƒ½æ‰§è¡Œã€‚</p><h3 id="useMemo-ä¼˜åŒ–æ€§èƒ½"><a href="#useMemo-ä¼˜åŒ–æ€§èƒ½" class="headerlink" title="useMemo ä¼˜åŒ–æ€§èƒ½"></a>useMemo ä¼˜åŒ–æ€§èƒ½</h3><p>å…¶å®åªè¦ä½¿ç”¨useMemoï¼Œç„¶åç»™å¥¹ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼Œå‚æ•°åŒ¹é…æˆåŠŸï¼Œæ‰ä¼šæ‰§è¡Œã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ChildComponent</span>(<span class="params">&#123;name,children&#125;</span>)</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">changeXiaohong</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'å¥¹æ¥äº†ï¼Œå¥¹æ¥äº†ã€‚å°çº¢å‘æˆ‘ä»¬èµ°æ¥äº†'</span>)</span><br><span class="line">        <span class="keyword">return</span> name+<span class="string">',å°çº¢å‘æˆ‘ä»¬èµ°æ¥äº†'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> actionXiaohong = useMemo(<span class="function"><span class="params">()</span>=&gt;</span>changeXiaohong(name),[name]) </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;div&gt;&#123;actionXiaohong&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">            &lt;div&gt;&#123;children&#125;&lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>è¿™æ—¶åœ¨æµè§ˆå™¨ä¸­ç‚¹å‡»ä¸€ä¸‹å¿—ç²æŒ‰é’®ï¼ŒchangeXiaohongå°±ä¸å†æ‰§è¡Œäº†ã€‚ä¹ŸèŠ‚çœäº†æ€§èƒ½çš„æ¶ˆè€—</p><h4 id="useRefè·å–DOMå…ƒç´ å’Œä¿å­˜å˜é‡"><a href="#useRefè·å–DOMå…ƒç´ å’Œä¿å­˜å˜é‡" class="headerlink" title="useRefè·å–DOMå…ƒç´ å’Œä¿å­˜å˜é‡"></a>useRefè·å–DOMå…ƒç´ å’Œä¿å­˜å˜é‡</h4><p><code>useRef</code>åœ¨å·¥ä½œä¸­è™½ç„¶ç”¨çš„ä¸å¤šï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½ç¼ºå°‘ã€‚å®ƒæœ‰ä¸¤ä¸ªä¸»è¦çš„ä½œç”¨:</p><ol><li><p>ç”¨useRefè·å–React JSXä¸­çš„DOMå…ƒç´ ï¼Œè·å–åä½ å°±å¯ä»¥æ§åˆ¶DOMçš„ä»»ä½•ä¸œè¥¿äº†ã€‚ä½†æ˜¯ä¸€èˆ¬ä¸å»ºè®®è¿™æ ·æ¥ä½œï¼ŒReactç•Œé¢çš„å˜åŒ–å¯ä»¥é€šè¿‡çŠ¶æ€æ¥æ§åˆ¶ã€‚</p></li><li><p>ç”¨useRefæ¥ä¿å­˜å˜é‡ï¼Œè¿™ä¸ªåœ¨å·¥ä½œä¸­ä¹Ÿå¾ˆå°‘èƒ½ç”¨åˆ°ï¼Œæˆ‘ä»¬æœ‰äº†useContextè¿™æ ·çš„ä¿å­˜å…¶å®æ„ä¹‰ä¸å¤§ï¼Œä½†æ˜¯è¿™æ˜¯å­¦ä¹ ï¼Œä¹Ÿè¦æŠŠè¿™ä¸ªç‰¹æ€§è®²ä¸€ä¸‹ã€‚</p></li></ol><h5 id="useRefè·å–DOMå…ƒç´ "><a href="#useRefè·å–DOMå…ƒç´ " class="headerlink" title="useRefè·å–DOMå…ƒç´ "></a>useRefè·å–DOMå…ƒç´ </h5><p>ç•Œé¢ä¸Šæœ‰ä¸€ä¸ªæ–‡æœ¬æ¡†ï¼Œåœ¨æ–‡æœ¬æ¡†çš„æ—è¾¹æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œåœ¨æ§åˆ¶å°æ‰“å°å‡ºinputçš„DOMå…ƒç´ ï¼Œå¹¶è¿›è¡Œå¤åˆ¶åˆ°DOMä¸­çš„valueä¸Šã€‚è¿™ä¸€åˆ‡éƒ½æ˜¯é€šè¿‡useRefæ¥å®ç°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useRef&#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example8</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> inputEl = useRef(<span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">const</span> onButtonClick=<span class="function"><span class="params">()</span>=&gt;</span>&#123; </span><br><span class="line">        inputEl.current.value=<span class="string">"Hello ,JSPang"</span></span><br><span class="line">        <span class="built_in">console</span>.log(inputEl) <span class="comment">//è¾“å‡ºè·å–åˆ°çš„DOMèŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &#123;<span class="comment">/*ä¿å­˜inputçš„refåˆ°inputEl */</span>&#125;</span><br><span class="line">            &lt;input ref=&#123;inputEl&#125; type=<span class="string">"text"</span>/&gt;</span><br><span class="line">            &lt;button onClick = &#123;onButtonClick&#125;&gt;åœ¨inputä¸Šå±•ç¤ºæ–‡å­—&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Example8</span><br></pre></td></tr></table></figure><p>å½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œä½ å¯ä»¥çœ‹åˆ°åœ¨æµè§ˆå™¨ä¸­çš„æ§åˆ¶å°å®Œæ•´çš„æ‰“å°å‡ºäº†DOMçš„æ‰€æœ‰ä¸œè¥¿ï¼Œå¹¶ä¸”ç•Œé¢ä¸Šçš„<input/>æ¡†çš„valueå€¼ä¹Ÿè¾“å‡ºäº†æˆ‘ä»¬å†™å¥½çš„Hello ,JSPangã€‚è¿™ä¸€åˆ‡è¯´æ˜æˆ‘ä»¬å¯ä»¥ä½¿ç”¨useRefè·å–DOMå…ƒç´ ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡useRefuæ§åˆ¶DOMçš„å±æ€§å’Œå€¼ã€‚</p><h5 id="useRefä¿å­˜æ™®é€šå˜é‡"><a href="#useRefä¿å­˜æ™®é€šå˜é‡" class="headerlink" title="useRefä¿å­˜æ™®é€šå˜é‡"></a>useRefä¿å­˜æ™®é€šå˜é‡</h5><p>è¿™ä¸ªæ“ä½œåœ¨å®é™…å¼€å‘ä¸­ç”¨çš„å¹¶ä¸å¤šï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯è¦è®²è§£ä¸€ä¸‹ã€‚å°±æ˜¯useRefå¯ä»¥ä¿å­˜Reactä¸­çš„å˜é‡ã€‚æˆ‘ä»¬è¿™é‡Œå°±å†™ä¸€ä¸ªæ–‡æœ¬æ¡†ï¼Œæ–‡æœ¬æ¡†ç”¨æ¥æ”¹å˜textçŠ¶æ€ã€‚åˆç”¨useRefæŠŠtextçŠ¶æ€è¿›è¡Œä¿å­˜ï¼Œæœ€åæ‰“å°åœ¨æ§åˆ¶å°ä¸Šã€‚å†™è¿™æ®µä»£ç ä½ ä¼šè§‰çš„å¾ˆç»•ï¼Œå…¶å®æ˜¾ç¤ºå¼€å‘ä¸­æ²¡å¿…è¦è¿™æ ·å†™ï¼Œç”¨ä¸€ä¸ªstateçŠ¶æ€å°±å¯ä»¥æå®šï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†å±•ç¤ºçŸ¥è¯†ç‚¹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useRef ,useState,useEffect &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example8</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> inputEl = useRef(<span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">const</span> onButtonClick=<span class="function"><span class="params">()</span>=&gt;</span>&#123; </span><br><span class="line">        inputEl.current.value=<span class="string">"Hello ,useRef"</span></span><br><span class="line">        <span class="built_in">console</span>.log(inputEl)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> [text, setText] = useState(<span class="string">'jspang'</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &#123;<span class="comment">/*ä¿å­˜inputçš„refåˆ°inputEl */</span>&#125;</span><br><span class="line">            &lt;input ref=&#123;inputEl&#125; type=<span class="string">"text"</span>/&gt;</span><br><span class="line">            &lt;button onClick = &#123;onButtonClick&#125;&gt;åœ¨inputä¸Šå±•ç¤ºæ–‡å­—&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;br/</span>&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line">            &lt;input value=&#123;text&#125; onChange=&#123;(e)=&gt;&#123;setText(e.target.value)&#125;&#125; /&gt;</span><br><span class="line">         </span><br><span class="line">        &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Example8</span></span><br></pre></td></tr></table></figure><p>è¿™æ—¶æƒ³æ¯æ¬¡textå‘ç”ŸçŠ¶æ€æ”¹å˜ï¼Œä¿å­˜åˆ°ä¸€ä¸ªå˜é‡ä¸­æˆ–è€…è¯´æ˜¯useRefä¸­ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨useRefäº†ã€‚å…ˆå£°æ˜ä¸€ä¸ªtextRefå˜é‡ï¼Œä»–å…¶å®å°±æ˜¯useRefå‡½æ•°ã€‚ç„¶åä½¿ç”¨useEffectå‡½æ•°å®ç°æ¯æ¬¡çŠ¶æ€å˜åŒ–éƒ½è¿›è¡Œå˜é‡ä¿®æ”¹ï¼Œå¹¶æ‰“å°ã€‚æœ€åçš„å…¨éƒ¨ä»£ç å¦‚ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useRef ,useState,useEffect &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example8</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> inputEl = useRef(<span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">const</span> onButtonClick=<span class="function"><span class="params">()</span>=&gt;</span>&#123; </span><br><span class="line">        inputEl.current.value=<span class="string">"Hello ,useRef"</span></span><br><span class="line">        <span class="built_in">console</span>.log(inputEl)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//-----------å…³é”®ä»£ç --------start</span></span><br><span class="line">    <span class="keyword">const</span> [text, setText] = useState(<span class="string">'jspang'</span>)</span><br><span class="line">    <span class="keyword">const</span> textRef = useRef()</span><br><span class="line"></span><br><span class="line">    useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        textRef.current = text;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'textRef.current:'</span>, textRef.current)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//----------å…³é”®ä»£ç --------------end</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &#123;<span class="comment">/*ä¿å­˜inputçš„refåˆ°inputEl */</span>&#125;</span><br><span class="line">            &lt;input ref=&#123;inputEl&#125; type=<span class="string">"text"</span>/&gt;</span><br><span class="line">            &lt;button onClick = &#123;onButtonClick&#125;&gt;åœ¨inputä¸Šå±•ç¤ºæ–‡å­—&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;br/</span>&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line">            &lt;input value=&#123;text&#125; onChange=&#123;(e)=&gt;&#123;setText(e.target.value)&#125;&#125; /&gt;</span><br><span class="line">        &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Example8</span></span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™å°±å¯ä»¥å®ç°æ¯æ¬¡çŠ¶æ€ä¿®æ”¹ï¼ŒåŒæ—¶ä¿å­˜åˆ°useRefä¸­äº†ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ä¿å­˜å˜é‡çš„åŠŸèƒ½ã€‚</p><h4 id="è‡ªå®šä¹‰Hookså‡½æ•°è·å–çª—å£å¤§å°"><a href="#è‡ªå®šä¹‰Hookså‡½æ•°è·å–çª—å£å¤§å°" class="headerlink" title="è‡ªå®šä¹‰Hookså‡½æ•°è·å–çª—å£å¤§å°"></a>è‡ªå®šä¹‰Hookså‡½æ•°è·å–çª—å£å¤§å°</h4><h5 id="ç¼–å†™è‡ªå®šä¹‰å‡½æ•°"><a href="#ç¼–å†™è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="ç¼–å†™è‡ªå®šä¹‰å‡½æ•°"></a>ç¼–å†™è‡ªå®šä¹‰å‡½æ•°</h5><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸ºäº†ç•Œé¢æ›´åŠ ç¾è§‚ã€‚è·å–æµè§ˆå™¨çª—å£çš„å°ºå¯¸æ˜¯ä¸€ä¸ªç»å¸¸ä½¿ç”¨çš„åŠŸèƒ½ï¼Œè¿™æ ·ç»å¸¸ä½¿ç”¨çš„åŠŸèƒ½ï¼Œå°±å¯ä»¥å°è£…æˆä¸€ä¸ªè‡ªå®šä¹‰Hookså‡½æ•°ï¼Œè®°ä½ä¸€å®šè¦ç”¨useå¼€å¤´ï¼Œè¿™æ ·æ‰èƒ½åŒºåˆ†å‡ºä»€ä¹ˆæ˜¯ç»„ä»¶ï¼Œä»€ä¹ˆæ˜¯è‡ªå®šä¹‰å‡½æ•°ã€‚</p><p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶Example9.js,ç„¶åç¼–å†™ä¸€ä¸ªuseWinSize,ç¼–å†™æ—¶æˆ‘ä»¬ä¼šç”¨åˆ°useStateã€useEffectå’ŒuseCallbackæ‰€ä»¥å…ˆç”¨importè¿›è¡Œå¼•å…¥ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState ,useEffect ,useCallback &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br></pre></td></tr></table></figure><p>ç„¶åç¼–å†™å‡½æ•°ï¼Œå‡½æ•°ä¸­å…ˆç”¨useStateè®¾ç½®sizeçŠ¶æ€ï¼Œç„¶åç¼–å†™ä¸€ä¸ªæ¯æ¬¡ä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•onResizeï¼Œè¿™ä¸ªæ–¹æ³•ä½¿ç”¨useCallbackï¼Œç›®çš„æ˜¯ä¸ºäº†ç¼“å­˜æ–¹æ³•(useMemoæ˜¯ä¸ºäº†ç¼“å­˜å˜é‡)ã€‚ ç„¶ååœ¨ç¬¬ä¸€æ¬¡è¿›å…¥æ–¹æ³•æ—¶ç”¨useEffectæ¥æ³¨å†Œresizeç›‘å¬æ—¶é—´ã€‚ä¸ºäº†é˜²æ­¢ä¸€ç›´ç›‘å¬æ‰€ä»¥åœ¨æ–¹æ³•ç§»é™¤æ—¶ï¼Œä½¿ç”¨returnçš„æ–¹å¼ç§»é™¤ç›‘å¬ã€‚æœ€åè¿”å›sizeå˜é‡å°±å¯ä»¥äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useWinSize</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [ size , setSize] = useState(&#123;</span><br><span class="line">        width:<span class="built_in">document</span>.documentElement.clientWidth,</span><br><span class="line">        height:<span class="built_in">document</span>.documentElement.clientHeight</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> onResize = useCallback(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        setSize(&#123;</span><br><span class="line">            width: <span class="built_in">document</span>.documentElement.clientWidth,</span><br><span class="line">            height: <span class="built_in">document</span>.documentElement.clientHeight</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,[]) </span><br><span class="line">    useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>,onResize)</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">window</span>.removeEventListener(<span class="string">'resize'</span>,onResize)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,[])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> size;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™ç»„ä»¶å¹¶ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°"><a href="#ç¼–å†™ç»„ä»¶å¹¶ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="ç¼–å†™ç»„ä»¶å¹¶ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°"></a>ç¼–å†™ç»„ä»¶å¹¶ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°</h3><p>è‡ªå®šä¹‰Hookså‡½æ•°å·²ç»å†™å¥½äº†ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œä½¿ç”¨ï¼Œç”¨æ³•å’ŒJavaScriptçš„æ™®é€šå‡½æ•°ç”¨èµ·æ¥æ˜¯ä¸€æ ·çš„ã€‚ç›´æ¥åœ¨Example9ç»„ä»¶ä½¿ç”¨useWinSizeå¹¶æŠŠç»“æœå®æ—¶å±•ç¤ºåœ¨é¡µé¢ä¸Šã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example9</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> size = useWinSize()</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;é¡µé¢Size:&#123;size.width&#125;x&#123;size.height&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Example9</span></span><br></pre></td></tr></table></figure><p>ä¹‹åå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­é¢„è§ˆä¸€ä¸‹ç»“æœï¼Œå¯ä»¥çœ‹åˆ°å½“æˆ‘ä»¬æ”¾å¤§ç¼©å°æµè§ˆå™¨çª—å£æ—¶ï¼Œé¡µé¢ä¸Šçš„ç»“æœéƒ½ä¼šè·Ÿç€è¿›è¡Œå˜åŒ–ã€‚è¯´æ˜è‡ªå®šä¹‰çš„å‡½æ•°èµ·åˆ°äº†ä½œç”¨ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;what-this-hooks&quot;&gt;&lt;a href=&quot;#what-this-hooks&quot; class=&quot;headerlink&quot; title=&quot;what this hooks&quot;&gt;&lt;/a&gt;what this hooks&lt;/h3&gt;&lt;p&gt; 2018å¹´åº•ï¼ŒFaceBookçš„R
      
    
    </summary>
    
    
      <category term="react" scheme="https://jacob1811.github.io/blog/categories/react/"/>
    
    
      <category term="react" scheme="https://jacob1811.github.io/blog/tags/react/"/>
    
      <category term="hooks" scheme="https://jacob1811.github.io/blog/tags/hooks/"/>
    
  </entry>
  
  <entry>
    <title>reactä¼˜åŒ–</title>
    <link href="https://jacob1811.github.io/blog/2019/11/18/react%E4%BC%98%E5%8C%96/"/>
    <id>https://jacob1811.github.io/blog/2019/11/18/reactä¼˜åŒ–/</id>
    <published>2019-11-18T11:32:23.000Z</published>
    <updated>2019-11-18T11:35:09.008Z</updated>
    
    <content type="html"><![CDATA[<p>æ€§èƒ½ä¼˜åŒ–æ¥ä¸€æ³¢</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æ€§èƒ½ä¼˜åŒ–æ¥ä¸€æ³¢&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="react" scheme="https://jacob1811.github.io/blog/categories/react/"/>
    
    
      <category term="react" scheme="https://jacob1811.github.io/blog/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>react-base</title>
    <link href="https://jacob1811.github.io/blog/2019/11/18/react-base/"/>
    <id>https://jacob1811.github.io/blog/2019/11/18/react-base/</id>
    <published>2019-11-18T09:19:39.000Z</published>
    <updated>2019-11-18T11:35:06.226Z</updated>
    
    <content type="html"><![CDATA[<h3 id="react-å¸¸ç”¨å°æŠ€å·§"><a href="#react-å¸¸ç”¨å°æŠ€å·§" class="headerlink" title="react å¸¸ç”¨å°æŠ€å·§"></a>react å¸¸ç”¨å°æŠ€å·§</h3><ol><li>ä¸èƒ½ä½¿ç”¨æ•°å­—å¾ªç¯ç´¢å¼• ä½œä¸ºreact åˆ—è¡¨çš„ key<br>æ¸²æŸ“ç›¸é‚»åŒçº§å…ƒç´ æ—¶éœ€è¦ç»™æ¯ä¸€ä¸ªitemæŒ‡å®šç›¸åº”çš„keyä½œä¸ºå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œrenderæ ‘è¿›è¡ŒdiffæŸ¥æ‰¾æ—¶ï¼Œæœªå‘ç”Ÿå˜åŒ–çš„å…ƒç´ ä¸é‡æ–°æ¸²æŸ“ã€‚<br>ä¸€èˆ¬å¯¹è±¡ç»“æ„æ•°æ®æ²¡é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡å”¯ä¸€ id è®¾ç½®key ,ä½†æ•°ç»„æ¸²æŸ“æ˜¯æ²¡æœ‰keyçš„ã€‚å¦‚ä¸‹ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ListRender</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      list: [<span class="number">12</span>, <span class="number">23</span>, <span class="number">43</span>, <span class="number">41</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  deleteOne = <span class="function"><span class="params">index</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ é™¤æ“ä½œ</span></span><br><span class="line">    <span class="keyword">const</span> &#123; list &#125; = <span class="keyword">this</span>.state</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">list</span>: list.filter(<span class="function">(<span class="params">v, i</span>) =&gt;</span> i !== index) &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; list &#125; = <span class="keyword">this</span>.state</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &#123;list.map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> (</span><br><span class="line">          &lt;li  key=&#123;i&#125;&gt;</span><br><span class="line">            &lt;button onClick=&#123;() =&gt; <span class="keyword">this</span>.deleteOne(i)&#125;&gt;å»é™¤&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &#123;v&#125; &lt;input/</span>&gt;</span><br><span class="line">          &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">        ))&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/u</span>l&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>åœ¨inputå†…è¾“å…¥å€¼ï¼Œåˆ é™¤å‰ä¸€é¡¹ï¼Œreactåˆ¤æ–­ keyæœªå‘ç”Ÿå˜åŒ–ï¼ŒæŒ‰ç…§åŸå§‹ç»“æ„æ¸²æŸ“ï¼Œä¼šå¯¼è‡´æ‰€æœ‰inputé”™ä½ï¼Œé‚£å°±æœ‰é—®é¢˜äº†ã€‚</p><p>é‚£æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ<br>æ–¹æ³•ä¸€ï¼šå°†æ•°ç»„ä¸å”¯ä¸€idé‡æ–°ç»„åˆæˆå¯¹è±¡è¿›è¡Œæ“ä½œ;<br>æ–¹æ³•äºŒï¼šåˆ©ç”¨ shortid ç”Ÿæˆå¯¹åº”id æ•°ç»„ï¼Œå¦‚ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> shortid <span class="keyword">from</span> <span class="string">'shortid'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ListRender</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      list: [<span class="number">12</span>, <span class="number">23</span>, <span class="number">43</span>, <span class="number">41</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.dataKeys = <span class="keyword">this</span>.state.list.map(<span class="function"><span class="params">v</span> =&gt;</span> shortid.generate())</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.dataKeys) <span class="comment">// ["okFqqvP8", "-wG6MT9Oj", "3MEB9Fiuk", "pFooXW8LZ"]</span></span><br><span class="line">  &#125;</span><br><span class="line">  deleteOne = <span class="function"><span class="params">index</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ é™¤æ“ä½œ</span></span><br><span class="line">    <span class="keyword">const</span> &#123; list &#125; = <span class="keyword">this</span>.state</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">list</span>: list.filter(<span class="function">(<span class="params">v, i</span>) =&gt;</span> i !== index) &#125;)</span><br><span class="line">    <span class="keyword">this</span>.dataKeys.splice(index, <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; list &#125; = <span class="keyword">this</span>.state</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &#123;list.map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> (</span><br><span class="line">          &lt;li  key=&#123;<span class="keyword">this</span>.dataKeys[i]&#125;&gt;</span><br><span class="line">            &lt;button onClick=&#123;() =&gt; <span class="keyword">this</span>.deleteOne(i)&#125;&gt;å»é™¤&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &#123;v&#125; &lt;input/</span>&gt;</span><br><span class="line">          &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">        ))&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/u</span>l&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é—®é¢˜å®Œç¾è§£å†³</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;react-å¸¸ç”¨å°æŠ€å·§&quot;&gt;&lt;a href=&quot;#react-å¸¸ç”¨å°æŠ€å·§&quot; class=&quot;headerlink&quot; title=&quot;react å¸¸ç”¨å°æŠ€å·§&quot;&gt;&lt;/a&gt;react å¸¸ç”¨å°æŠ€å·§&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;ä¸èƒ½ä½¿ç”¨æ•°å­—å¾ªç¯ç´¢å¼• ä½œä¸ºreact åˆ—è¡¨çš„ key&lt;b
      
    
    </summary>
    
    
      <category term="react" scheme="https://jacob1811.github.io/blog/categories/react/"/>
    
    
      <category term="react" scheme="https://jacob1811.github.io/blog/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>js-surprise</title>
    <link href="https://jacob1811.github.io/blog/2019/11/12/js-surprise/"/>
    <id>https://jacob1811.github.io/blog/2019/11/12/js-surprise/</id>
    <published>2019-11-12T11:55:15.000Z</published>
    <updated>2019-11-12T11:55:15.391Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>python-base</title>
    <link href="https://jacob1811.github.io/blog/2019/11/10/python-base/"/>
    <id>https://jacob1811.github.io/blog/2019/11/10/python-base/</id>
    <published>2019-11-10T13:00:54.000Z</published>
    <updated>2019-11-15T11:03:09.351Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
      <category term="python" scheme="https://jacob1811.github.io/blog/categories/python/"/>
    
    
      <category term="base" scheme="https://jacob1811.github.io/blog/tags/base/"/>
    
  </entry>
  
  <entry>
    <title>ä¸æƒ³å†çœ‹çš„ command</title>
    <link href="https://jacob1811.github.io/blog/2019/11/01/%22%E5%8D%97%E6%9E%81%22%E7%9A%84%E5%91%BD%E4%BB%A4/"/>
    <id>https://jacob1811.github.io/blog/2019/11/01/&quot;å—æ&quot;çš„å‘½ä»¤/</id>
    <published>2019-11-01T02:32:02.000Z</published>
    <updated>2019-11-27T07:59:43.945Z</updated>
    
    <content type="html"><![CDATA[<h3 id="vscode-å‘½ä»¤"><a href="#vscode-å‘½ä»¤" class="headerlink" title="vscode å‘½ä»¤"></a>vscode å‘½ä»¤</h3><p>è¿è¡Œjs/py:</p><blockquote><p> control + option + N </p></blockquote><h3 id="mac"><a href="#mac" class="headerlink" title="mac"></a>mac</h3><p>å±å¹•æˆªå›¾ï¼š</p><blockquote><p>command+shift+3/4</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;vscode-å‘½ä»¤&quot;&gt;&lt;a href=&quot;#vscode-å‘½ä»¤&quot; class=&quot;headerlink&quot; title=&quot;vscode å‘½ä»¤&quot;&gt;&lt;/a&gt;vscode å‘½ä»¤&lt;/h3&gt;&lt;p&gt;è¿è¡Œjs/py:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt; control + op
      
    
    </summary>
    
    
      <category term="rote" scheme="https://jacob1811.github.io/blog/categories/rote/"/>
    
    
      <category term="command" scheme="https://jacob1811.github.io/blog/tags/command/"/>
    
  </entry>
  
  <entry>
    <title>ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°åŒºåˆ«ï¼Œæ™®é€šå‡½æ•°å¯ä»¥é€šè¿‡newç”Ÿæˆå®ä¾‹ï¼Œç®­å¤´å‡½æ•°å¯ä»¥å—ï¼Ÿwhy?</title>
    <link href="https://jacob1811.github.io/blog/2019/11/01/My-New-Post/"/>
    <id>https://jacob1811.github.io/blog/2019/11/01/My-New-Post/</id>
    <published>2019-10-31T23:19:34.000Z</published>
    <updated>2019-11-12T11:55:58.723Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°åŒºåˆ«ï¼Œæ™®é€šå‡½æ•°å¯ä»¥é€šè¿‡newç”Ÿæˆå®ä¾‹ï¼Œç®­å¤´å‡½æ•°å¯ä»¥å—ï¼Ÿwhy"><a href="#ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°åŒºåˆ«ï¼Œæ™®é€šå‡½æ•°å¯ä»¥é€šè¿‡newç”Ÿæˆå®ä¾‹ï¼Œç®­å¤´å‡½æ•°å¯ä»¥å—ï¼Ÿwhy" class="headerlink" title="ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°åŒºåˆ«ï¼Œæ™®é€šå‡½æ•°å¯ä»¥é€šè¿‡newç”Ÿæˆå®ä¾‹ï¼Œç®­å¤´å‡½æ•°å¯ä»¥å—ï¼Ÿwhy?"></a>ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°åŒºåˆ«ï¼Œæ™®é€šå‡½æ•°å¯ä»¥é€šè¿‡newç”Ÿæˆå®ä¾‹ï¼Œç®­å¤´å‡½æ•°å¯ä»¥å—ï¼Ÿwhy?</h3><p>  åŒºåˆ«ï¼š<br>  1.æ›´åŠ ç®€æ´<br>  2.ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„this,å®ƒå†…éƒ¨çš„thisä»å±äºå‡½æ•°æ‰€å±ä¸Šä¸‹æ–‡ï¼ˆcallå’Œapplyä¹Ÿæ— æ³•æ”¹å˜ï¼‰<br>  3.ç®­å¤´å‡½æ•°æ²¡æœ‰arguments (ç±»æ•°ç»„)åªèƒ½åŸºäº â€¦arg è·å–å‚æ•°ï¼ˆæ•°ç»„ï¼‰<br>  4.ç®­å¤´å‡½æ•°ä¸èƒ½è¢«newæ‰§è¡Œ, ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„this, æ²¡æœ‰prototype</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// const y = 7</span></span><br><span class="line"><span class="comment">//  function fn(x)&#123;</span></span><br><span class="line"><span class="comment">//   // const y = 7</span></span><br><span class="line"><span class="comment">//   return function(y)&#123;</span></span><br><span class="line"><span class="comment">//     console.log(x,y);</span></span><br><span class="line"><span class="comment">//     return x+y</span></span><br><span class="line"><span class="comment">//   &#125;(y)</span></span><br><span class="line"><span class="comment">//  &#125;</span></span><br><span class="line"><span class="comment">// //  console.log(fn(4))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  let fn1= x =&gt;&#123;</span></span><br><span class="line"><span class="comment">//    return (y =&gt; &#123;</span></span><br><span class="line"><span class="comment">//      console.log(111,x,y);</span></span><br><span class="line"><span class="comment">//      return x+y;</span></span><br><span class="line"><span class="comment">//     &#125;)(y)</span></span><br><span class="line"><span class="comment">//  &#125;</span></span><br><span class="line"><span class="comment">// let fn2 = x=&gt;y=&gt;x+y;</span></span><br><span class="line"><span class="comment">//  console.log(fn1(3));</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// * 2.ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„this,å®ƒå†…éƒ¨çš„thisä»å±äºå‡½æ•°æ‰€å±ä¸Šä¸‹æ–‡ï¼ˆcallå’Œapplyä¹Ÿæ— æ³•æ”¹å˜ï¼‰</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// let obj = &#123;</span></span><br><span class="line"><span class="comment">//   name:'jack'</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// function fn1()&#123;</span></span><br><span class="line"><span class="comment">//   console.log(this.name);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// let fn2=()=&gt;&#123;</span></span><br><span class="line"><span class="comment">//   console.log(this.name);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// fn1();// undefined</span></span><br><span class="line"><span class="comment">// fn1.call(obj)//jack</span></span><br><span class="line"><span class="comment">// fn2() // undefined</span></span><br><span class="line"><span class="comment">// fn2.call(obj) // undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// document.body.onclick=function()&#123;</span></span><br><span class="line"><span class="comment">//   console.log(this); // this: body</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// document.body.onclick=()=&gt;&#123;</span></span><br><span class="line"><span class="comment">//   console.log(this); // this: windows </span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// document.body.onclick=function()&#123;</span></span><br><span class="line"><span class="comment">//   // this: body</span></span><br><span class="line"><span class="comment">//   arr.sort(function(a,b)&#123;</span></span><br><span class="line"><span class="comment">//     // this: window å›è°ƒå‡½æ•°ä¸­çš„thisä¸€èˆ¬éƒ½æ˜¯window</span></span><br><span class="line"><span class="comment">//     return a-b</span></span><br><span class="line"><span class="comment">//   &#125;) </span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// document.body.onclick=function()&#123;</span></span><br><span class="line"><span class="comment">//   // this: body</span></span><br><span class="line"><span class="comment">//   arr.sort((a,b)=&gt;&#123;</span></span><br><span class="line"><span class="comment">//     // this: body</span></span><br><span class="line"><span class="comment">//     return a-b</span></span><br><span class="line"><span class="comment">//   &#125;) </span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// JQ forEach</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">each</span>(<span class="params">arr,callback</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>,len=arr.length;i&lt;len;i++)&#123;</span><br><span class="line">     <span class="keyword">let</span> item = arr[i]</span><br><span class="line">     index=i</span><br><span class="line">    <span class="comment">//  callback(item,index) // this: window</span></span><br><span class="line">     <span class="keyword">let</span> flag = callback.call(arr,item,index)  <span class="comment">// this: arr</span></span><br><span class="line">     <span class="comment">//æ¥æ”¶å›è°ƒå‡½æ•°è¿”å›çš„ç»“æœ å¦‚æœæ˜¯falseç»“æŸå¾ªç¯</span></span><br><span class="line">     <span class="keyword">if</span> (flag === <span class="literal">false</span>)&#123;</span><br><span class="line">       <span class="keyword">break</span></span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">each([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],<span class="function"><span class="keyword">function</span>(<span class="params">item,index</span>)</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="keyword">this</span>);   </span><br><span class="line">     <span class="built_in">console</span>.log(item,index);</span><br><span class="line">     <span class="keyword">if</span>(index&gt;=<span class="number">2</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// * 3.ç®­å¤´å‡½æ•°æ²¡æœ‰arguments (ç±»æ•°ç»„)åªèƒ½åŸºäº ...arg è·å–å‚æ•°ï¼ˆæ•°ç»„ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// let fn03 = ()=&gt;&#123;</span></span><br><span class="line"><span class="comment">//   console.log(arguments);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// let fn04 = (...arg)=&gt;&#123;</span></span><br><span class="line"><span class="comment">//   console.log(arg);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// fn03(10,20,30)</span></span><br><span class="line"><span class="comment">// fn04(10,20,30)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.x =<span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line">Fn.prototype.getX = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> f = <span class="keyword">new</span> Fn()</span><br><span class="line">f.getX()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> Fn01 = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.x = <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.dir(Fn01)</span><br><span class="line"><span class="comment">// Fn01.prototype.getX = function()&#123;  // Cannot set property 'getX' of undefined</span></span><br><span class="line"><span class="comment">//   console.log(this.x);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// let f01 = new Fn01() // Fn01 is not a constructor</span></span><br><span class="line"><span class="comment">// f01.getX()</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°åŒºåˆ«ï¼Œæ™®é€šå‡½æ•°å¯ä»¥é€šè¿‡newç”Ÿæˆå®ä¾‹ï¼Œç®­å¤´å‡½æ•°å¯ä»¥å—ï¼Ÿwhy&quot;&gt;&lt;a href=&quot;#ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°åŒºåˆ«ï¼Œæ™®é€šå‡½æ•°å¯ä»¥é€šè¿‡newç”Ÿæˆå®ä¾‹ï¼Œç®­å¤´å‡½æ•°å¯ä»¥å—ï¼Ÿwhy&quot; class=&quot;headerlink&quot; title=&quot;ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°åŒºåˆ«ï¼Œæ™®é€š
      
    
    </summary>
    
    
      <category term="com" scheme="https://jacob1811.github.io/blog/categories/com/"/>
    
    
      <category term="js" scheme="https://jacob1811.github.io/blog/tags/js/"/>
    
      <category term="css" scheme="https://jacob1811.github.io/blog/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>Hexo-config</title>
    <link href="https://jacob1811.github.io/blog/2019/11/01/hexo-config/"/>
    <id>https://jacob1811.github.io/blog/2019/11/01/hexo-config/</id>
    <published>2019-10-31T22:09:07.025Z</published>
    <updated>2019-11-27T08:07:30.259Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h3 id="å®˜ç½‘åœ°å€"><a href="#å®˜ç½‘åœ°å€" class="headerlink" title="å®˜ç½‘åœ°å€"></a>å®˜ç½‘åœ°å€</h3><p><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">Hexoå®˜ç½‘</a></p><h3 id="blog"><a href="#blog" class="headerlink" title="blog"></a>blog</h3><p><a href="http://jeffyang.top/Hexo/Hexo%E4%B8%BB%E9%A2%98Next%E7%BE%8E%E5%8C%96/" target="_blank" rel="noopener">Hexo config blog</a></p><h3 id="ç‚«é…·é…ç½®"><a href="#ç‚«é…·é…ç½®" class="headerlink" title="ç‚«é…·é…ç½®"></a>ç‚«é…·é…ç½®</h3><p><a href="https://www.jianshu.com/p/f054333ac9e6" target="_blank" rel="noopener">Hexoç‚«é…·é…ç½®</a></p><h3 id="next-themes"><a href="#next-themes" class="headerlink" title="next themes"></a>next themes</h3><p><a href="https://theme-next.iissnan.com/getting-started.html" target="_blank" rel="noopener">nexté…ç½®</a></p><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server </span><br><span class="line">// ç®€å†™</span><br><span class="line">$ hexo s</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br><span class="line"></span><br><span class="line">// ç®€å†™</span><br><span class="line"></span><br><span class="line">$ hexo g</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deployÂ Â </span><br><span class="line"></span><br><span class="line">// ç®€å†™</span><br><span class="line">$ hexo d</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
      <category term="Hexo" scheme="https://jacob1811.github.io/blog/categories/Hexo/"/>
    
    
      <category term="doc" scheme="https://jacob1811.github.io/blog/tags/doc/"/>
    
  </entry>
  
</feed>
